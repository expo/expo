---
title: Override update configuration at runtime
sidebar_title: Override update configuration at runtime
description: Learn how to override the update URL and request headers at runtime to control which update is loaded in preview builds.
---

> **warning** The features described in this guide are available in Expo SDK 52 with the expo-updates package version 0.27.0 and later. Using the `disableAntiBrickingMeasures` option is not recommended for production apps, it should only be used in preview environments.

The typical way to use EAS Update is to have a single update URL and a set of request headers (such as update channel name) embedded in a build of your app. To control which update is loaded you make changes on the server through the `eas update` command or the EAS dashboard. For example, you publish a new update to a channel that your build is pointing to, then the build fetches that update on the next launch. Updates published to a channel different from the one your build is pointing to will not be downloaded with this approach.

This guide explains is how you can change the update URL and request headers at runtime, making it possible for load a specific update by ID or change the channel that updates are pulled from without creating and installing a new build.

## Use cases for changing the update URL and request headers at runtime

The primary use case that this is intended for is to **enable switching between updates from a preview build**, similar to what is possible in a development build. This is useful to enable non-technical stakeholders to test and validate updates on work-in-progress (such as from a pull request or different feature branches), without having to use a development build or create a separate preview build for each change.

Another potential future use case is to provide different updates to different users, for example so that employees receive updates before end-users. We do not recommend using the approach described in this guide for this use case yet, because the level of stability of the feature is only suitable for preview builds.

## How it works

There are two relevant APIs:

1. `Updates.setUpdateURLAndRequestHeadersOverride({ url: string, requestHeaders: Object })` - this method overrides the update URL and the request headers that are specified in **app.json** / **Expo.plist** / **AndroidManifest.xml**, such as the `expo-channel-name` header.
2. `disableAntiBrickingMeasures` - this field in the app config disables the anti-bricking measures that are applied when the update URL and request headers are overridden. When you change this value, you will need to create a new build for it to take effect. **Do not enable this in your production builds.** The reason for this name is to clearly indicate that when you override the update URL/headers, we're no longer able to safely rollback to the previous update that was loaded. So, if the new update you have loaded causes the app to crash then `expo-updates`cannot automatically recover, because this field in conjunction with `setUpdateURLAndRequestHeadersOverride` will disable embedded updates and therefore there will not be any update to rollback to. The user would need to uninstall and reinstall the app. You should only use this feature in preview builds.

How to use these APIs:

1. **Override the update URL/headers, instruct user to close the app**: Somewhere in your app, you would provide a way for users to trigger the change to the URL and/or request headers. This may be in a hidden menu that only trusted users have access to, or some other mechanism depending on your use case. When the parameters are changed, notify the user that they need to close and re-open the app, such as via an alert. The `expo-updates` library, with methods like `checkForUpdateAsync()`, will not use the new overridden URL and request headers until the app is closed and reopened.
2. **The new update will be downloaded and launched on the next app open**: After the app is completely closed ("killed" and not just backgrounded) and re-opened, the update and its related assets will all be downloaded. Once they are ready, the app will launch. While it's downloading, the user will have to wait on the splash screen. We understand that waiting on the splash screen is not ideal, and we intend to improve this experience in the future if this feature is widely used. For the currently recommended use case (previews), this is likely an acceptable compromise.

## Example code

Here's an example of how you might use these APIs:

```js
import * as Updates from 'expo-updates';

// Where you call this method depends on your use case - it may make sense to
// have a menu in your preview builds that allows testers to pick from available
// pull requests, for example.
function overrideUpdateURLAndHeaders() {
  Updates.setUpdateURLAndRequestHeadersOverride({
    url: '<https://u.expo.dev/>...',
    requestHeaders: { 'expo-channel-name': 'pr-123' },
  });

  alert('Close and re-open the app to load the latest version.');
}
```

```json
{
  "expo": {
    "updates": {
      // Be sure to enable this only in your preview builds.
      // You can use app.config.js to configure it dynamically.
      "disableAntiBrickingMeasures": true
      // etc..
    }
  }
}
```
