<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>NARUTO SHIPPUDEN - Hokage Console V5.5 (CYBER MATRIX FIXED)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <style>
        /* CSS KEYFRAMES & GLOBAL STYLES */
        @keyframes neon-glow-red {
            0%, 100% { box-shadow: 0 0 5px #ff3333, 0 0 15px #cc0000; }
            50% { box-shadow: 0 0 20px #ff3333, 0 0 30px #cc0000; }
        }
        @keyframes neon-glow-green {
             0%, 100% { box-shadow: 0 0 5px #00ffaa, 0 0 15px #00cc66; }
             50% { box-shadow: 0 0 20px #00ffaa, 0 0 30px #00cc66; }
        }
        @keyframes pulse-border {
             0%, 100% { border-color: #ffaa00; }
             50% { border-color: #ff3333; }
        }
        /* ADMIN FLASHING KEYFRAME */
        @keyframes admin-flash {
            0%, 100% { color: #00ffaa; text-shadow: 0 0 5px #00ffaa; }
            50% { color: #ff3333; text-shadow: 0 0 10px #ff3333; }
        }
        #admin-link-flashing {
            animation: admin-flash 1s infinite alternate;
        }
        
        body { 
            font-family: 'Rajdhani', sans-serif; 
            background: #000; 
            color: #e0e0e0; 
            min-height: 100vh; 
            background-image: 
                radial-gradient(circle at center, rgba(0, 255, 170, 0.05) 0%, transparent 80%),
                radial-gradient(circle at bottom right, rgba(255, 51, 51, 0.08) 0%, transparent 70%);
            background-size: 100% 100%;
            background-attachment: fixed;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            position: relative;
        }

        /* Th√™m hi·ªáu ·ª©ng nhi·ªÖu nh·∫π */
        body::before {
             content: '';
             position: absolute;
             top: 0; left: 0; right: 0; bottom: 0;
             opacity: 0.05;
             background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 300 300' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
             pointer-events: none;
             z-index: -1;
        }

        /* C·∫•u tr√∫c Console */
        #console-container {
            display: none;
            width: 100%;
            max-width: 400px;
            background: rgba(10, 10, 15, 0.95);
            border-left: 2px solid #00ffaa;
            border-right: 2px solid #ff3333;
            position: relative;
            box-shadow: 0 0 30px rgba(0, 255, 170, 0.2);
            /* B·ªï sung padding d∆∞·ªõi c√πng ƒë·ªÉ n·ªôi dung kh√¥ng b·ªã che b·ªüi footer c·ªë ƒë·ªãnh */
            padding-bottom: 70px; 
            min-height: 100vh;
        }
        
        /* C·ªë ƒë·ªãnh Footer Navigation */
        .bottom-nav {
            position: fixed; /* ƒê√≠nh c·ªë ƒë·ªãnh */
            bottom: 0;      /* D∆∞·ªõi c√πng */
            left: 50%; /* CƒÉn gi·ªØa */
            transform: translateX(-50%); /* D·ªãch chuy·ªÉn ng∆∞·ª£c l·∫°i 50% chi·ªÅu r·ªông ƒë·ªÉ cƒÉn gi·ªØa */
            width: 100%;
            max-width: 400px; /* B·∫±ng v·ªõi console-container */
            z-index: 50; /* ƒê·∫£m b·∫£o n√≥ n·∫±m tr√™n c√πng */
            background: rgba(10, 10, 15, 0.98); /* N·ªÅn ƒë·∫≠m */
            border-top: 2px solid #00ffaa;
            box-shadow: 0 -5px 20px rgba(0, 255, 170, 0.2);
            padding: 0.5rem 0;
            font-size: 0.75rem; 
        }
        .nav-item {
             color: #00ffaa;
             text-shadow: 0 0 5px rgba(0, 255, 170, 0.5);
             transition: color 0.2s;
        }
        .nav-item:hover {
            color: #ff3333;
            text-shadow: 0 0 8px #ff3333;
        }

        /* Th√™m style cho Key Login Panel */
        .key-panel {
             background: rgba(10, 10, 15, 0.95);
             border: 2px solid #ff3333;
             box-shadow: 0 0 20px rgba(255, 51, 51, 0.5);
             padding: 1.5rem;
        }
        .key-input {
             background-color: #000;
             border: 1px solid #ff3333;
             color: #00ffaa;
             padding: 0.75rem;
             border-radius: 0.25rem;
             text-align: center;
             font-family: 'Orbitron', sans-serif;
        }
        /* C√°c style c√≤n l·∫°i gi·ªØ nguy√™n */
        .console-title { font-size: 1.6rem !important; text-shadow: 0 0 5px #00ffaa; } 
        .tab-button { font-size: 0.8rem !important; padding: 0.75rem 0.75rem !important; text-shadow: 0 0 2px #000; } 
        .tab-button.active { color: #00ffaa; border-bottom: 3px solid #00ffaa; text-shadow: 0 0 8px #00ffaa; }
        .info-panel { background: rgba(30, 0, 0, 0.4); backdrop-filter: blur(5px); border: 1px solid rgba(255, 50, 50, 0.5); box-shadow: 0 0 15px rgba(255, 50, 50, 0.5); padding: 1rem; border-radius: 0.5rem; }
        .main-button { background: linear-gradient(135deg, #ff3333, #cc0000); transition: all 0.3s ease; animation: neon-glow-red 2.5s infinite ease-in-out; letter-spacing: 1px; text-shadow: 0 0 5px #000; border-radius: 0.5rem; border: 2px solid #ff6666; font-weight: 700; font-family: 'Orbitron', sans-serif; }
        .feature-item { border-left: 5px solid #333; transition: all 0.2s; cursor: pointer; background-color: #1a1a1a; border-radius: 0.25rem; padding: 0.75rem; box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5); }
        .feature-item:hover { background-color: #252525; border-left-color: #00ffaa; }
        .feature-icon { color: #00ffaa; text-shadow: 0 0 5px #00ffaa; }
        .toggle-switch-bg { background-color: #333; transition: background-color 0.4s, box-shadow 0.4s; }
        .peer:checked ~ .toggle-switch-bg { background-color: #00ffaa; animation: neon-glow-green 1.5s infinite alternate; }
        .peer:checked ~ .toggle-switch-bg:after { background-color: #fff; box-shadow: 0 0 5px #00ffaa; }
        .feature-item.active-glitch { border-left-color: #ff3333 !important; box-shadow: 0 0 15px rgba(255, 50, 50, 0.8), inset 0 0 8px rgba(255, 170, 0, 0.5); background-color: #201010 !important; animation: pulse-border 1s infinite step-end; }
        .swal2-popup { background: #0a0a0d !important; border: 3px solid #00ffaa !important; box-shadow: 0 0 25px rgba(0, 255, 170, 0.8) !important; }
        .swal2-title { color: #ff3333 !important; font-family: 'Orbitron', sans-serif !important; text-shadow: 0 0 8px #ff3333 !important; font-size: 1.5rem !important; }
        .swal2-html-container { color: #e0e0e0 !important; font-size: 1rem !important; }
        .swal2-close { color: #ff3333 !important; font-size: 1.5rem !important; top: 0.5rem !important; right: 0.5rem !important; opacity: 0.9 !important; transition: opacity 0.2s, color 0.2s; }
        .swal2-close:hover { color: #00ffaa !important; opacity: 1 !important; }
    </style>
</head>
<body class="flex flex-col items-center justify-start min-h-screen">

    <div id="login-section" class="flex items-center justify-center w-full flex-grow">
        <div class="key-panel w-full max-w-xs p-6 rounded-lg">
            <h2 class="modal-title font-['Orbitron'] text-red-500 text-center" style="text-shadow: 0 0 8px #ff3333;">üîì NH√ÇÃ£P KEY</h2>
            <p class="text-xs text-gray-400 mb-4 text-center">Nh·∫≠p Key k√≠ch ho·∫°t <span class="text-green-400 font-bold"></span> ƒë·ªÉ m·ªü NARUTO SHIPPUDEN.</p>
            
            <input type="text" id="key-input" placeholder=">> NH·∫¨P KEY CODE <<" class="key-input w-full mb-4 font-bold" maxlength="20">
            
            <button id="activate-key-button" class="main-button w-full py-3 text-base font-bold mb-3">
                <i class="fas fa-terminal mr-2"></i> K√çCH HO·∫†T KEY
            </button>
            
            <p id="admin-link-flashing" class="text-center text-xs font-bold cursor-pointer mt-2" style="font-family: 'Orbitron', sans-serif;">
                <i class="fas fa-user-shield mr-1"></i> ADMIN (H·ªñ TR·ª¢)
            </p>

            <p id="key-error-message" class="text-xs text-red-500 mt-3 hidden font-bold text-center"></p>
        </div>
    </div>
    
    <div id="console-container" class="relative mx-auto">
        <div class="max-w-sm mx-auto relative z-10 p-4">
            
            <div class="text-center pt-6 pb-4 border-b border-gray-800">
                <img src="https://i.postimg.cc/4NFC1Kpc/IMG-2417.jpg" alt="Naruto Shippuden Logo" class="naruto-logo inline-block h-20 w-20 rounded-full border-4 border-red-500/80 shadow-lg mb-2">
                <p class="text-red-500 text-lg font-bold mt-1 font-['Orbitron']">NARUTO SHIPPUDEN</p>
                <p class="text-gray-400 text-xs mt-1 font-['Orbitron']">SYSTEM ONLINE | V5.5 CYBER FIXED</p>
            </div>
            
            <div class="flex justify-around border-b border-red-900/50 px-2 mt-4">
                <button id="tab-config" class="tab-button active font-bold py-2 transition-colors duration-200">
                    <i class="fas fa-cog mr-1"></i> SYSTEM
                </button>
                <button id="tab-optimize" class="tab-button font-bold py-2 transition-colors duration-200">
                    <i class="fas fa-fighter-jet mr-1"></i> OPTIMAL FUNCTION
                </button>
            </div>

            <div id="tab-content" class="p-3 space-y-5 pb-16">
                
                <div id="content-config" class="tab-panel space-y-4">
                    <h2 class="text-red-400 border-b-2 border-red-500/50 pb-1 font-['Orbitron'] console-title text-center">
                         ‚öôÔ∏è SYSTEM CONFIGURATION
                    </h2>

                    <div class="flex flex-col space-y-3">
                         <div class="info-panel flex-1">
                            <h3 class="font-bold mb-1 text-sm font-['Orbitron']">TRANG THAI KEY:</h3>
                            <div class="text-xs space-y-1">
                                <p><i class="fas fa-key text-red-400 mr-2"></i> KEY: <span id="active-key-display" class="text-yellow-400 font-bold">...</span></p>
                                <p><i class="fas fa-hourglass-half text-red-400 mr-2"></i> H·∫°n D√πng: <span id="key-expiry-info" class="text-red-400 font-bold">...</span></p>
                                <p><i class="fas fa-lock text-red-400 mr-2"></i> Device UID: <span id="device-info" class="text-green-400">...</span></p>
                            </div>
                        </div>

                         <div class="info-panel flex-1">
                            <h3 class="font-bold mb-1 text-sm font-['Orbitron']">TH√îNG TIN THI√äÃÅT BIÃ£:</h3>
                            <div class="text-xs space-y-1">
                                <p><i class="fas fa-microchip text-red-400 mr-2"></i> HƒêH: <span id="os-platform" class="text-yellow-400">ƒêang ki·ªÉm tra...</span></p>
                                <p><i class="fas fa-battery-full text-red-400 mr-2"></i> Pin: <span id="battery-status" class="text-yellow-400">ƒêang ki·ªÉm tra...</span></p>
                                <p><i class="fas fa-tachometer-alt text-red-400 mr-2"></i> FPS: <span id="screen-fps" class="text-yellow-400">ƒêang ki·ªÉm tra...</span></p>
                                <p><i class="fas fa-globe text-red-400 mr-2"></i> INTERNET: <span id="network-type" class="text-yellow-400">ƒêang ki·ªÉm tra...</span></p>
                            </div>
                        </div>
                    </div>


                    <button id="optimize-system-button" class="main-button w-full py-3 text-sm font-bold">
                        <i class="fas fa-magic mr-2"></i> T∆ØÃ£ ƒê√îÃ£NG KIÃÅCH HOAÃ£T ALL CH∆ØÃÅC NƒÇNG SYTEM
                    </button>
                    
                    <h3 class="text-red-300 font-bold border-b border-[#333] pb-1 mt-3 text-sm font-['Orbitron']">
                        DEVICE OPTIMIZER 
                    </h3>
                    <div class="space-y-3">
                        
                        <div class="feature-item flex justify-between items-center" id="sys-ram-cleaner">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-memory"></i></span><span class="ml-2 text-white">RAM CLEANER</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                        
                        <div class="feature-item flex justify-between items-center" id="sys-junk-remover">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-trash-alt"></i></span><span class="ml-2 text-white">JUNK FILE REMOVER</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                        <div class="feature-item flex justify-between items-center" id="sys-display-boost">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-tv"></i></span><span class="ml-2 text-white">DISPLAY BOOST </span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                        
                        <div class="feature-item flex justify-between items-center" id="sys-network-boost">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-wifi"></i></span><span class="ml-2 text-white">NETWORK PING OPTIMIZER</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                        
                        <div class="feature-item flex justify-between items-center" id="sys-cpu-priority">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-microchip"></i></span><span class="ml-2 text-white">CPU PRIORITY SETTER</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                        
                        <div class="feature-item flex justify-between items-center" id="sys-turbo-mode">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-rocket"></i></span><span class="ml-2 text-white">TURBO POWER MODE</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                         <div class="feature-item flex justify-between items-center" id="sys-antiban">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-shield-alt"></i></span><span class="ml-2 text-white">ANTI-BAN VIRTUALIZATION</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                        <div class="feature-item flex justify-between items-center" id="sys-gpu-overclock">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-fire-alt"></i></span><span class="ml-2 text-white">GPU OVERCLOCK </span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                         <div class="feature-item flex justify-between items-center" id="sys-deep-cache">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-database"></i></span><span class="ml-2 text-white">DEEP CACHE CLEAR</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                         <div class="feature-item flex justify-between items-center" id="sys-bg-killer">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-stop-circle"></i></span><span class="ml-2 text-white">BACKGROUND PROCESS KILLER</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                    </div>
                </div>

                <div id="content-optimize" class="tab-panel space-y-4 hidden">
                    <h2 class="text-red-400 border-b-2 border-red-500/50 pb-1 font-['Orbitron'] console-title text-center">
                         ‚öîÔ∏è  OPTIMAL FUNCTION
                    </h2>
                    
                    <div id="game-selector-container" class="mb-4 pt-2 pb-2 px-3 bg-gray-900/50 rounded-lg border-2 border-red-500/50 shadow-lg" style="box-shadow: 0 0 10px rgba(255, 51, 51, 0.2);">
                        <div class="flex justify-between items-center mb-2">
                            <label for="game-select" class="block text-sm font-bold text-red-400 font-['Rajdhani']">·ª®ng d·ª•ng Game ƒê√£ C√†i ƒê·∫∑t (Ph·∫£i ch·ªçn tr∆∞·ªõc)</label>
                        </div>
                        
                        <select id="game-select" class="w-full mt-1 key-input text-sm focus:ring-green-400 focus:border-green-400" style="color: #00ffaa;">
                            <option value="" disabled selected>-- Ch·ªçn Game ƒë·ªÉ B·∫Øt ƒë·∫ßu --</option>
                        </select>

                        <div id="selected-game-status-display" class="relative flex items-center p-3 mt-3 bg-black/40 rounded-xl border border-green-500/50 shadow-inner">
                            <img id="game-logo-display" src="https://i.postimg.cc/4NFC1Kpc/IMG-2417.jpg" alt="Game Logo" class="h-10 w-10 rounded-full border-2 border-green-500/80 mr-3 shadow-lg">
                            <div>
                                <p id="game-name-display-status" class="text-white font-bold text-base">CH·ªåN GAME ƒê·ªÇ KH·ªûI ƒê·ªòNG</p>
                                <p id="game-package-display" class="text-xs text-red-400 font-bold">Package: (Ch∆∞a ch·ªçn)</p>
                            </div>
                            <i class="fas fa-cogs text-green-500 ml-auto text-xl"></i>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button id="optimize-optimal-button" class="main-button flex-1 py-3 text-sm font-bold opacity-50 cursor-not-allowed" disabled>
                            <i class="fas fa-atom mr-2"></i> T·ªêI ∆ØU T·∫§T C·∫¢ OPTIMAL
                        </button>
                    </div>
                    <h3 class="text-red-300 font-bold border-b border-[#333] pb-1 mt-5 text-sm font-['Orbitron']">
                       T√çNH NƒÇNG CHI TI·∫æT IN-GAME 
                    </h3>
                    <div class="space-y-3">

                        <div class="feature-item flex justify-between items-center" id="game-fps-booster">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-tachometer-alt"></i></span><span class="ml-2 text-white">FPS BOOSTER</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                        
                        <div class="feature-item flex justify-between items-center" id="game-aimlock">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-crosshairs"></i></span><span class="ml-2 text-white">AIMLOCK </span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                        
                        <div class="feature-item flex justify-between items-center" id="game-headlock">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-head-side-mask"></i></span><span class="ml-2 text-white">HEADLOCK </span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                        <div class="feature-item flex justify-between items-center" id="game-magic-bullet">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-burst"></i></span><span class="ml-2 text-white">MAGIC BULLET</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                        <div class="feature-item flex justify-between items-center" id="game-recoil-reducer">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-gun"></i></span><span class="ml-2 text-white">RECOIL REDUCER </span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                        <div class="feature-item flex justify-between items-center" id="game-wallhack">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-eye"></i></span><span class="ml-2 text-white">WALLHACK </span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                        <div class="feature-item flex justify-between items-center" id="game-autoloot">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-box-open"></i></span><span class="ml-2 text-white">AUTO LOOT</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                        
                        <div class="feature-item flex justify-between items-center" id="game-fov-mod">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-compress-arrows-alt"></i></span><span class="ml-2 text-white">FOV MODIFIER </span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>

                        <div class="feature-item flex justify-between items-center" id="game-rapid-fire">
                            <div class="flex items-center"><span class="feature-icon text-sm"><i class="fas fa-fire"></i></span><span class="ml-2 text-white">RAPID FIRE</span></div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer toggle-feature-ingame">
                                <div class="w-10 h-5 rounded-full peer toggle-switch-bg after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
                            </label>
                        </div>
                    </div>

                </div>

                <div id="content-guide" class="tab-panel space-y-3 hidden">
                     <div class="info-panel p-4 rounded-lg bg-gray-900/50 border-green-500/50">
                        <h3 class="font-bold border-b border-[#555] pb-1 font-['Orbitron'] text-lg">H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG</h3>
                         <p class="text-sm text-gray-400 mt-3">
                            1. **LI√äN H·ªÜ ADMIN** ƒë·ªÉ mua Key K√≠ch ho·∫°t **NARUTO SHIPPUDEN**.
                         </p>
                         <p class="text-sm text-gray-400 mt-2">
                            2. Nh·∫≠p **KEY** v√†o m√†n h√¨nh ƒëƒÉng nh·∫≠p ƒë·ªÉ m·ªü **NARUTO SHIPPUDEN**.
                         </p>
                          <p class="text-sm text-gray-400 mt-2">
                            3. **CH·ªåN ·ª®NG D·ª§NG GAME** t·ª´ danh s√°ch. 
                         </p>
                         <p class="text-sm text-gray-400 mt-2">
                            4. Nh·∫•n **T·ªêI ∆ØU T·∫§T C·∫¢ OPTIMAL** ƒë·ªÉ k√≠ch ho·∫°t c√°c t√≠nh nƒÉng 
                         </p>
                     </div>
                </div>

            </div>
            
            <div class="bottom-nav">
                 <div class="flex justify-around">
                     <a id="nav-home" class="nav-item flex flex-col items-center cursor-pointer transition-colors">
                         <i class="fas fa-home"></i>
                         <span>TRANG CH·ª¶</span>
                     </a>
                     <a id="nav-guide" class="nav-item flex flex-col items-center cursor-pointer transition-colors">
                         <i class="fas fa-book-open"></i>
                         <span>HDSD</span>
                     </a>
                     <a id="nav-admin" class="nav-item flex flex-col items-center cursor-pointer transition-colors">
                         <i class="fas fa-user-shield"></i>
                         <span>ADMIN</span>
                     </a>
                     <a id="nav-logout" class="nav-item flex flex-col items-center cursor-pointer transition-colors">
                         <i class="fas fa-sign-out-alt"></i>
                         <span>LOGOUT</span>
                     </a>
                 </div>
            </div>
        </div>
    </div>


    <script>
       
       
        const firebaseConfig = {
            apiKey: "AIzaSyBKGCVdZxmyw6VN0b7aYRQnCqpqfWwASXU",
            authDomain: "lllllk-20ede.firebaseapp.com",
            databaseURL: "https://lllllk-20ede-default-rtdb.firebaseio.com",
            projectId: "lllllk-20ede",
            storageBucket: "lllllk-20ede.firebasestorage.app",
            messagingSenderId: "314220235218",
            appId: "1:314220235218:web:679c9a246c314b535f200b",
            measurementId: "G-DM08514Z1N"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const validKeysRef = database.ref('validKeys'); 
        
        
        const getDeviceUid = () => {
            let uid = localStorage.getItem('device_uid');
            if (!uid) {
                uid = 'NARU-DEV-' + Math.random().toString(36).substr(2, 6).toUpperCase();
                localStorage.setItem('device_uid', uid);
            }
            return uid;
        };
        const DEVICE_UID = getDeviceUid();
        let currentKey = localStorage.getItem('active_key');
        
        
        const showNotification = (title, message, icon) => {
            Swal.fire({ 
                title: title, 
                html: message, 
                icon: icon, 
                showConfirmButton: false, 
                timer: 4500, 
                toast: false, 
                position: 'center', 
                showCloseButton: true, 
                customClass: {
                    container: 'swal2-center-notify',
                },
                didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer)
                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                }
            });
        };
        
        function updateKeyExpiryInfo(expiryTimestamp) {
            const expiryElement = document.getElementById('key-expiry-info');
            
            if (expiryTimestamp === 9999999999999) {
                 expiryElement.innerHTML = '<span class="text-green-400 font-bold">Vƒ®NH VI·ªÑN</span>';
                 return;
            }
            
            const now = Date.now();
            const remainingTime = expiryTimestamp - now;
            
            if (remainingTime <= 0) {
                 expiryElement.innerHTML = '<span class="text-red-500 font-bold">ƒê√É H·∫æT H·∫†N</span>';
                 return;
            }
            
            const days = Math.floor(remainingTime / (1000 * 60 * 60 * 24));
            const hours = Math.floor((remainingTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            expiryElement.textContent = `${days} ng√†y ${hours} gi·ªù`;
        }
        
       
        window.fpsInterval = null; 

       
        function updateDeviceStats() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            let os = 'Unknown/PC';
            if (/android/i.test(userAgent)) {
                os = 'Android (Adr)';
            } else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                os = 'iOS (Apple)';
            } else if (/Windows Phone/i.test(userAgent)) {
                os = 'Windows Phone';
            }
            document.getElementById('os-platform').textContent = os;

            
            const updateFPS = () => {
                const fpsElement = document.getElementById('screen-fps');
                let currentFps = 60;
                
                
                if (window.devicePixelRatio && window.devicePixelRatio > 2.5) { 
                     currentFps = 120; 
                } else if (window.screen.width > 700 || window.screen.height > 1000) { 
                     currentFps = 90; 
                }

                
                const delta = Math.floor(Math.random() * 11) - 5; 
                const displayedFps = Math.min(120, Math.max(60, currentFps + delta)); 
                
                fpsElement.innerHTML = `<span class="font-bold text-red-400">${displayedFps} FPS}</span> (T·ªëi ∆∞u)`;
            };

           
            updateFPS(); 
            if (!window.fpsInterval) { 
                 window.fpsInterval = setInterval(updateFPS, 1000); 
            }
            
            
            let connectionType = 'T√≠n hi·ªáu y·∫øu';
            if (navigator.connection) {
                const effectiveType = navigator.connection.effectiveType || 'unknown';
                if (effectiveType.includes('4g') || effectiveType.includes('3g')) {
                    connectionType = effectiveType.toUpperCase() + ' (Di ƒê·ªông)';
                } else if (navigator.connection.rtt < 100) {
                     connectionType = 'WiFi (T·ªëc ƒë·ªô cao)';
                } else {
                     connectionType = '4G/5G (∆Øu ti√™n)';
                }
            } else {
                connectionType = (Math.random() > 0.5) ? 'WiFi (·ªîn ƒë·ªãnh)' : '4G (T·ªëi ∆∞u)';
            }
            document.getElementById('network-type').textContent = connectionType;

            if ('getBattery' in navigator) {
                navigator.getBattery().then(function(battery) {
                    const updateBatteryStatus = () => {
                        const level = Math.round(battery.level * 100);
                        let chargingStatus = battery.charging ? ' (ƒêang S·∫°c)' : '';
                        let color = battery.charging ? 'text-green-400' : (level < 20 ? 'text-red-500' : 'text-yellow-400');
                        document.getElementById('battery-status').innerHTML = `<span class="${color}">${level}%${chargingStatus}</span>`;
                    };
                    updateBatteryStatus();
                    battery.addEventListener('levelchange', updateBatteryStatus);
                    battery.addEventListener('chargingchange', updateBatteryStatus);
                }).catch(() => {
                     document.getElementById('battery-status').textContent = '95% (Gi·∫£ l·∫≠p)';
                });
            } else {
                document.getElementById('battery-status').textContent = '99% (Gi·∫£ l·∫≠p)';
            }
        }

        
      
        function switchTab(tabId) {
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            if (tabId === 'config') {
                document.getElementById('content-config').classList.remove('hidden');
                document.getElementById('tab-config').classList.add('active');
            } else if (tabId === 'optimize') {
                document.getElementById('content-optimize').classList.remove('hidden');
                document.getElementById('tab-optimize').classList.add('active');
            } else if (tabId === 'guide') {
                document.getElementById('content-guide').classList.remove('hidden');
                document.getElementById('tab-config').classList.remove('active'); 
                document.getElementById('tab-optimize').classList.remove('active');
            }
        }
        
       
        function unlockConsoleUI(key, keyData) {
            currentKey = key;
            localStorage.setItem('active_key', key);
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('console-container').style.display = 'block'; 
            
            document.getElementById('active-key-display').textContent = key;
            document.getElementById('device-info').textContent = DEVICE_UID; 
            
            updateKeyExpiryInfo(keyData.expiry);
            updateDeviceStats(); 
            switchTab('config'); 
            
            requestInstalledGames(); 
        }

        function checkKeyLogin() {
            const enteredKey = document.getElementById('key-input').value.trim().toUpperCase();
            const errorElement = document.getElementById('key-error-message');
            
            if (enteredKey.length < 5) {
                errorElement.textContent = 'Key kh√¥ng h·ª£p l·ªá. Vui l√≤ng ki·ªÉm tra l·∫°i.';
                errorElement.style.display = 'block';
                return;
            }

            errorElement.style.display = 'none';
            document.getElementById('activate-key-button').disabled = true;

            const keyRef = validKeysRef.child(enteredKey);

            keyRef.once('value')
                .then((snapshot) => {
                    const keyData = snapshot.val();
                    const now = Date.now();
                    
                    if (!keyData) {
                        errorElement.textContent = 'ERROR: Key kh√¥ng t·ªìn t·∫°i. Vui l√≤ng li√™n h·ªá Admin.';
                        errorElement.style.display = 'block';
                        return;
                    }
                    
                    if (keyData.expiry !== 9999999999999 && keyData.expiry < now) {
                         errorElement.textContent = 'ERROR: Key ƒë√£ h·∫øt h·∫°n s·ª≠ d·ª•ng. Vui l√≤ng li√™n h·ªá Admin.';
                         errorElement.style.display = 'block';
                         localStorage.removeItem('active_key');
                         return;
                    }

                    const devices = keyData.devices || {};
                    const maxDevices = keyData.max_devices || 1;
                    const isKeyActiveOnDevice = devices[DEVICE_UID];

                    if (!isKeyActiveOnDevice && Object.keys(devices).length >= maxDevices) {
                        errorElement.textContent = `ACCESS DENIED: Key ch·ªâ ƒë∆∞·ª£c k√≠ch ho·∫°t tr√™n ${maxDevices} thi·∫øt b·ªã.`;
                        errorElement.style.display = 'block';
                        return;
                    }
                    
                    devices[DEVICE_UID] = now;
                    return keyRef.update({
                        devices: devices,
                        last_used: now
                    }).then(() => {
                        showNotification('‚úÖ K√çCH HO·∫†T TH√ÄNH C√îNG', `Welcome, ${enteredKey}. Truy c·∫≠p h·ªá th·ªëng ƒë√£ ƒë∆∞·ª£c c·∫•p ph√©p.`, 'success');
                        unlockConsoleUI(enteredKey, keyData);
                    });
                })
                .catch(error => {
                    console.error("Firebase Error:", error);
                    errorElement.textContent = 'L·ªói k·∫øt n·ªëi ho·∫∑c Key kh√¥ng h·ª£p l·ªá. Vui l√≤ng th·ª≠ l·∫°i.';
                    errorElement.style.display = 'block';
                })
                .finally(() => {
                    document.getElementById('activate-key-button').disabled = false;
                });
        }
        
        
        function attemptAutoLogin() {
            document.getElementById('device-info').textContent = DEVICE_UID; 
            if (currentKey) {
                 const keyRef = validKeysRef.child(currentKey);
                 keyRef.once('value').then((snapshot) => {
                      const keyData = snapshot.val();
                      if (keyData && (keyData.expiry === 9999999999999 || keyData.expiry > Date.now()) && keyData.devices && keyData.devices[DEVICE_UID]) {
                          
                          keyData.devices[DEVICE_UID] = Date.now(); 
                          unlockConsoleUI(currentKey, keyData); 
                          
                          keyRef.update({ 
                              devices: keyData.devices,
                              last_used: Date.now() 
                          });
                          showNotification('üîë T·ª∞ ƒê·ªòNG ƒêƒÇNG NH·∫¨P', `H·ªá th·ªëng ƒë√£ nh·∫≠n di·ªán Key: ${currentKey}.`, 'info');
                          
                          requestInstalledGames(); 
                      } else {
                          localStorage.removeItem('active_key');
                          updateDeviceStats(); 
                      }
                 }).catch(error => {
                      console.error("Auto-Login Firebase Error:", error);
                      updateDeviceStats();
                 });
            } else {
                updateDeviceStats(); 
            }
        }
        
        
        document.getElementById('nav-logout').addEventListener('click', () => {
             Swal.fire({
                title: 'TERMINATE SESSION?',
                text: "B·∫°n s·∫Ω c·∫ßn nh·∫≠p Key l·∫°i ƒë·ªÉ truy c·∫≠p Menu l·∫ßn sau.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#ff3333',
                cancelButtonColor: '#00ffaa',
                confirmButtonText: 'ƒê·ªíNG √ù (LOGOUT)',
                cancelButtonText: 'H·ª¶Y'
             }).then((result) => {
                if (result.isConfirmed) {
                     if (currentKey) {
                        const deviceRef = validKeysRef.child(currentKey).child('devices').child(DEVICE_UID);
                        deviceRef.remove();
                     }
                    
                     if (window.fpsInterval) {
                          clearInterval(window.fpsInterval);
                          window.fpsInterval = null;
                     }
                     localStorage.removeItem('active_key');
                     currentKey = null;
                     document.getElementById('key-input').value = '';
                     document.getElementById('console-container').style.display = 'none';
                     document.getElementById('login-section').style.display = 'flex';
                     showNotification('üîì PHI√äN ƒê√É K·∫æT TH√öC', 'ƒê√£ ƒëƒÉng xu·∫•t Key th√†nh c√¥ng.', 'info');
                     updateDeviceStats(); 
                }
             });
        });
        
       
        document.getElementById('tab-config').addEventListener('click', () => { switchTab('config'); });
        document.getElementById('tab-optimize').addEventListener('click', () => { switchTab('optimize'); });
        document.getElementById('nav-home').addEventListener('click', () => { switchTab('config'); });
        document.getElementById('nav-guide').addEventListener('click', () => { switchTab('guide'); });
        
        
        const openAdminLink = () => {
             window.open('https://linkbio.co/anhquan1', '_blank');
             showNotification('‚ÑπÔ∏è H·ªñ TR·ª¢ ADMIN', 'ƒêang m·ªü trang li√™n h·ªá Admin...', 'info');
        }
        document.getElementById('nav-admin').addEventListener('click', openAdminLink);
        document.getElementById('admin-link-flashing').addEventListener('click', openAdminLink);
        
      
        document.getElementById('activate-key-button').addEventListener('click', checkKeyLogin);
        document.getElementById('key-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkKeyLogin();
            }
        });
        
        // --- NATIVE BRIDGE & GAME SELECTION LOGIC ---
        const ANDROID_BRIDGE_NAME = "AndroidGameInterface"; 
        let INSTALLED_GAMES = []; 
        let currentSelectedPackage = null; // Bi·∫øn l∆∞u tr·ªØ g√≥i game ƒëang ƒë∆∞·ª£c ch·ªçn

        
        const allSysToggles = document.querySelectorAll('#content-config .toggle-feature');
        const allGameToggles = document.querySelectorAll('#content-optimize .toggle-feature-ingame');
        const gameFeatureItems = document.querySelectorAll('#game-fps-booster, #game-aimlock, #game-headlock, #game-magic-bullet, #game-recoil-reducer, #game-wallhack, #game-autoloot, #game-fov-mod, #game-rapid-fire');
        const optimizeOptimalButton = document.getElementById('optimize-optimal-button');
        const openGameButton = document.getElementById('open-game-button');


        
        window.receiveInstalledGames = function(gamesJson) {
            const selector = document.getElementById('game-select');
            selector.innerHTML = '<option value="" disabled selected>-- Ch·ªçn Game ƒë·ªÉ B·∫Øt ƒë·∫ßu --</option>';
            INSTALLED_GAMES = [];

            try {
                const games = JSON.parse(gamesJson);
                if (games && Array.isArray(games) && games.length > 0) {
                    INSTALLED_GAMES = games.map(game => ({
                        name: game.name || game.packageName,
                        packageName: game.packageName,
                        iconURL: game.iconURL || null 
                    }));
                    
                    INSTALLED_GAMES.forEach(game => {
                        const option = document.createElement('option');
                        option.value = game.packageName; 
                        option.textContent = game.name;
                        selector.appendChild(option);
                    });
                    
                } else {
                     document.getElementById('game-name-display-status').textContent = 'Kh√¥ng t√¨m th·∫•y Game n√†o.';
                     document.getElementById('game-package-display').textContent = 'Tr·∫°ng th√°i: Game Not Found';
                     document.getElementById('game-logo-display').src = 'https://i.postimg.cc/85zKx1zF/alert-icon.png'; 
                }

            } catch (e) {
                console.error("L·ªói ph√¢n t√≠ch JSON t·ª´ Native:", e);
                document.getElementById('game-name-display-status').textContent = 'L·ªói t·∫£i danh s√°ch Game.';
                document.getElementById('game-package-display').textContent = 'Tr·∫°ng th√°i: Error Loading';
            }
        };

        
        function requestInstalledGames() {
            const selector = document.getElementById('game-select');
            
            if (window[ANDROID_BRIDGE_NAME] && window[ANDROID_BRIDGE_NAME].requestInstalledApps) {
                document.getElementById('game-name-display-status').textContent = 'ƒêang Qu√©t Game... Vui l√≤ng ch·ªù';
                document.getElementById('game-package-display').textContent = 'Tr·∫°ng th√°i: SCANNING';
                selector.innerHTML = '<option value="" disabled selected>-- ƒêang Qu√©t Game tr√™n M√°y --</option>';
                window[ANDROID_BRIDGE_NAME].requestInstalledApps(); 
            } else {
                console.error("L·ªói: Native Bridge kh√¥ng t√¨m th·∫•y. Kh√¥ng th·ªÉ qu√©t ·ª©ng d·ª•ng tr√™n m√°y.");
                selector.innerHTML = `<option value="" disabled selected>-- Vui l√≤ng ch·ªçn Game ƒë·ªÉ B·∫Øt ƒë·∫ßu --</option>`;
                document.getElementById('game-name-display-status').textContent = 'CH·ªåN GAME ƒê·ªÇ KH·ªûI ƒê·ªòNG';
                document.getElementById('game-package-display').textContent = 'Package: (Ch∆∞a ch·ªçn)';
                document.getElementById('game-logo-display').src = 'https://i.postimg.cc/4NFC1Kpc/IMG-2417.jpg';
                INSTALLED_GAMES = []; 
            }
        }
        
        
        // --- H√ÄM T·ªêI ∆ØU T·∫§T C·∫¢ T√çNH NƒÇNG GAME (M·ªõi) ---
        function optimizeOptimalFeatures() {
             optimizeOptimalButton.disabled = true;
             optimizeOptimalButton.textContent = '>> K√çCH HO·∫†T PROTOCOL...';

             // B·∫¨T T·∫§T C·∫¢ T√çNH NƒÇNG GAME
             allGameToggles.forEach(checkbox => { 
                 checkbox.checked = true; 
                 const item = checkbox.closest('.feature-item');
                 if (item) item.classList.add('active-glitch');
             });

             setTimeout(() => {
                 showNotification('‚úÖ T·ªêI ∆ØU GAME TH√ÄNH C√îNG', 'T·∫•t c·∫£ c√°c m√¥-ƒëun Game ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t. S·∫µn s√†ng kh·ªüi ƒë·ªông!', 'success');
                 
                 // T·∫ÆT HI·ªÜU ·ª®NG GLITCH SAU KHI T·ªêI ∆ØU XONG
                 allGameToggles.forEach(checkbox => {
                     const item = checkbox.closest('.feature-item');
                     if (item) item.classList.remove('active-glitch');
                 });
                 
                 optimizeOptimalButton.textContent = 'T·ªêI ∆ØU T·∫§T C·∫¢ OPTIMAL';
                 optimizeOptimalButton.disabled = false;
             }, 2000);
        }


        // --- H√ÄM CH·ªà M·ªû GAME (M·ªõi) ---
        function launchSelectedGame() {
            if (!currentSelectedPackage) {
                 showNotification('‚ö†Ô∏è CH∆ØA CH·ªåN GAME', 'Vui l√≤ng ch·ªçn Game t·ª´ danh s√°ch th·∫£ xu·ªëng tr∆∞·ªõc khi m·ªü.', 'warning');
                 return;
            }

            openGameButton.disabled = true;
            openGameButton.textContent = '>> ƒêANG KH·ªûI ƒê·ªòNG GAME...';
            
            const game = INSTALLED_GAMES.find(g => g.packageName === currentSelectedPackage);

            // M√¥ ph·ªèng qu√° tr√¨nh kh·ªüi ƒë·ªông
            setTimeout(() => {
                 if (window[ANDROID_BRIDGE_NAME] && window[ANDROID_BRIDGE_NAME].launchApp) {
                     window[ANDROID_BRIDGE_NAME].launchApp(currentSelectedPackage); 
                     showNotification('üöÄ KH·ªûI ƒê·ªòNG GAME', `ƒêang m·ªü Game **${game.name}**. T·∫≠n h∆∞·ªüng!`, 'success');
                 } else {
                     // Fallback Deep Link 
                     window.location.href = `intent://${currentSelectedPackage}/#Intent;scheme=androidam;action=android.intent.action.VIEW;end`; 
                     showNotification('‚ö†Ô∏è C·∫¢NH B√ÅO', `Native Bridge kh√¥ng t·ªìn t·∫°i. Th·ª≠ kh·ªüi ch·∫°y Game **${game.name}**...`, 'warning');
                 }
                
                 openGameButton.textContent = 'M·ªû GAME';
                 openGameButton.disabled = false;

            }, 2000); 
        }

        // --- G·∫ÆN S·ª∞ KI·ªÜN CHO CH·ªåN GAME (Logic ƒë√£ thay ƒë·ªïi) ---
        document.getElementById('game-select').addEventListener('change', (e) => {
            currentSelectedPackage = e.target.value;
            
            if (currentSelectedPackage) {
                 const game = INSTALLED_GAMES.find(g => g.packageName === currentSelectedPackage);
                 if (game) {
                     // 1. C·∫≠p nh·∫≠t UI (Logo, T√™n)
                     document.getElementById('game-logo-display').src = game.iconURL || 'https://i.postimg.cc/7Hw9y1D5/default-game.png'; 
                     document.getElementById('game-name-display-status').textContent = game.name;
                     document.getElementById('game-package-display').textContent = `Package: ${game.packageName}`;
                     
                     // 2. K√≠ch ho·∫°t n√∫t Launch v√† Optimize
                     openGameButton.disabled = false;
                     optimizeOptimalButton.disabled = false;
                     openGameButton.classList.remove('opacity-50', 'cursor-not-allowed');
                     optimizeOptimalButton.classList.remove('opacity-50', 'cursor-not-allowed');
                 }
            } else {
                 // Ch·ªçn l·∫°i option m·∫∑c ƒë·ªãnh -> Disable n√∫t
                 currentSelectedPackage = null;
                 document.getElementById('game-logo-display').src = 'https://i.postimg.cc/4NFC1Kpc/IMG-2417.jpg';
                 document.getElementById('game-name-display-status').textContent = 'CH·ªåN GAME ƒê·ªÇ KH·ªûI ƒê·ªòNG';
                 document.getElementById('game-package-display').textContent = 'Package: (Ch∆∞a ch·ªçn)';

                 openGameButton.disabled = true;
                 optimizeOptimalButton.disabled = true;
                 openGameButton.classList.add('opacity-50', 'cursor-not-allowed');
                 optimizeOptimalButton.classList.add('opacity-50', 'cursor-not-allowed');

                 // ƒê·∫£m b·∫£o tr·∫°ng th√°i n√∫t tr·ªü l·∫°i ban ƒë·∫ßu
                 openGameButton.textContent = 'M·ªû GAME';
                 optimizeOptimalButton.textContent = 'T·ªêI ∆ØU T·∫§T C·∫¢ OPTIMAL';
            }
        });

        // --- G·∫ÆN S·ª∞ KI·ªÜN CHO N√öT M·ªöI ---
        optimizeOptimalButton.addEventListener('click', optimizeOptimalFeatures);
        openGameButton.addEventListener('click', launchSelectedGame);


        // --- G·∫ÆN S·ª∞ KI·ªÜN T·ªêI ∆ØU H·ªÜ TH·ªêNG (Gi·ªØ nguy√™n) ---
        const optimizeSystemButton = document.getElementById('optimize-system-button');
        
        optimizeSystemButton.addEventListener('click', () => {
             optimizeSystemButton.disabled = true;
             optimizeSystemButton.textContent = '>> ANALYZING & OPTIMIZING SYSTEM...';
             
             // B·∫¨T T·∫§T C·∫¢ T√çNH NƒÇNG SYSTEM
             allSysToggles.forEach(checkbox => { 
                checkbox.checked = true; 
                const item = checkbox.closest('.feature-item');
                if (item) item.classList.add('active-glitch');
             });

             setTimeout(() => {
                 showNotification('‚úÖ T·ªêI ∆ØU TH√ÄNH C√îNG', 'T·∫•t c·∫£ c√°c m√¥-ƒëun ƒë√£ ƒë∆∞·ª£c ƒëi·ªÅu ch·ªânh. **SYSTEM READY!**', 'success');
                 
                 // T·∫ÆT HI·ªÜU ·ª®NG GLITCH SAU KHI T·ªêI ∆ØU XONG
                 allSysToggles.forEach(checkbox => {
                     const item = checkbox.closest('.feature-item');
                     if (item) item.classList.remove('active-glitch');
                 });
                 
                 optimizeSystemButton.textContent = 'T∆ØÃ£ ƒê√îÃ£NG KIÃÅCH HOAÃ£T ALL CH∆ØÃÅC NƒÇNG SYTEM';
                 optimizeSystemButton.disabled = false;
             }, 2000);
        });
        
        // Kh·ªüi ƒë·ªông
        attemptAutoLogin();

    </script>
</body>
</html>
