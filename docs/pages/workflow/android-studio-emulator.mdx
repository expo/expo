
import React, { useState, useEffect } from "react"; import { View, Text, TextInput, TouchableOpacity, FlatList, Alert } from "react-native"; import auth from "@react-native-firebase/auth"; import firestore from "@react-native-firebase/firestore"; import { BannerAd, BannerAdSize, TestIds } from "react-native-google-mobile-ads";

export default function App() { const [user, setUser] = useState(null); const [email, setEmail] = useState(""); const [password, setPassword] = useState(""); const [coins, setCoins] = useState(0);

useEffect(() => { const subscriber = auth().onAuthStateChanged(async (user) => { setUser(user); if (user) { const doc = await firestore().collection("users").doc(user.uid).get(); if (doc.exists) setCoins(doc.data().coins || 0); } }); return subscriber; }, []);

const register = async () => { try { const res = await auth().createUserWithEmailAndPassword(email, password); await firestore().collection("users").doc(res.user.uid).set({ coins: 0 }); Alert.alert("Account Created", "Welcome to Utera Cash ðŸ’°"); } catch (err) { Alert.alert("Error", err.message); } };

const login = async () => { try { await auth().signInWithEmailAndPassword(email, password); } catch (err) { Alert.alert("Error", err.message); } };

const addCoins = async (amount) => { const uid = user.uid; const ref = firestore().collection("users").doc(uid); await ref.update({ coins: coins + amount }); setCoins(coins + amount); };

const withdraw = async () => { if (coins < 1) return Alert.alert("Error", "Minimum 1 coin required"); const uid = user.uid; await firestore().collection("withdraws").add({ uid, coins, method: "JazzCash", status: "pending", createdAt: new Date() }); Alert.alert("Request Sent", "Your withdraw request submitted"); };

if (!user) { return ( <View style={{ flex: 1, justifyContent: "center", alignItems: "center", padding: 20 }}> <Text style={{ fontSize: 24, fontWeight: "bold" }}>Utera Cash ðŸ’°</Text> <TextInput placeholder="Email" value={email} onChangeText={setEmail} style={{ borderWidth: 1, margin: 5, padding: 10, width: "80%" }} /> <TextInput placeholder="Password" value={password} onChangeText={setPassword} secureTextEntry style={{ borderWidth: 1, margin: 5, padding: 10, width: "80%" }} /> <TouchableOpacity onPress={login} style={{ backgroundColor: "green", padding: 10, margin: 5 }}> <Text style={{ color: "white" }}>Login</Text> </TouchableOpacity> <TouchableOpacity onPress={register} style={{ backgroundColor: "blue", padding: 10, margin: 5 }}> <Text style={{ color: "white" }}>Register</Text> </TouchableOpacity> </View> ); }

return ( <View style={{ flex: 1, padding: 20, backgroundColor: "white" }}> <Text style={{ fontSize: 20, fontWeight: "bold" }}>Welcome {user.email}</Text> <Text style={{ fontSize: 18, marginVertical: 10 }}>Your Coins: {coins}</Text>

<TouchableOpacity onPress={() => addCoins(2)} style={{ backgroundColor: "orange", padding: 10, marginVertical: 5 }}>
    <Text style={{ color: "white" }}>Watch Ad & Earn 2 Coins</Text>
  </TouchableOpacity>

  <TouchableOpacity onPress={() => addCoins(1)} style={{ backgroundColor: "purple", padding: 10, marginVertical: 5 }}>
    <Text style={{ color: "white" }}>Write Note & Earn 1 Coin</Text>
  </TouchableOpacity>

  <TouchableOpacity onPress={withdraw} style={{ backgroundColor: "red", padding: 10, marginVertical: 5 }}>
    <Text style={{ color: "white" }}>Withdraw via JazzCash</Text>
  </TouchableOpacity>

  <BannerAd unitId={TestIds.BANNER} size={BannerAdSize.FULL_BANNER} />
</View>

); }

