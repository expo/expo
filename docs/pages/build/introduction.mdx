import React, { useState } from 'react';
import { View, Text, TouchableOpacity, ScrollView, StyleSheet, Alert } from 'react-native';

export default function App() {
  const [screen, setScreen] = useState('home');
  const [score, setScore] = useState(0);
  const [answered, setAnswered] = useState(0);

  const lessons = [
    { title: 'Ø§Ù„Ø£Ù„ÙˆØ§Ù†', examples: { Red: 'Ø£Ø­Ù…Ø±', Blue: 'Ø£Ø²Ø±Ù‚', Green: 'Ø£Ø®Ø¶Ø±' } },
    { title: 'Ø§Ù„Ø£ÙŠØ§Ù…', examples: { Monday: 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', Friday: 'Ø§Ù„Ø¬Ù…Ø¹Ø©', Sunday: 'Ø§Ù„Ø£Ø­Ø¯' } },
    { title: 'Ø§Ù„Ø£Ø±Ù‚Ø§Ù…', examples: { One: 'ÙˆØ§Ø­Ø¯', Two: 'Ø§Ø«Ù†Ø§Ù†', Three: 'Ø«Ù„Ø§Ø«Ø©' } },
  ];

  const quiz = [
    { q: 'Ù…Ø§ Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© AppleØŸ', options: ['Ù…ÙˆØ²', 'ØªÙØ§Ø­', 'Ø¨Ø±ØªÙ‚Ø§Ù„'], correct: 'ØªÙØ§Ø­' },
    { q: 'Ù…Ø§ Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© BlueØŸ', options: ['Ø£Ø®Ø¶Ø±', 'Ø£Ø²Ø±Ù‚', 'Ø£Ø­Ù…Ø±'], correct: 'Ø£Ø²Ø±Ù‚' },
    { q: 'Ù…Ø§ Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© CatØŸ', options: ['ÙƒÙ„Ø¨', 'Ù‚Ø·Ø©', 'Ø¹ØµÙÙˆØ±'], correct: 'Ù‚Ø·Ø©' },
  ];

  const handleAnswer = (answer, correct) => {
    setAnswered(answered + 1);
    if (answer === correct) {
      setScore(score + 1);
      Alert.alert('ØµØ­ÙŠØ­ âœ…', 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!');
    } else {
      Alert.alert('Ø®Ø·Ø£ âŒ', `Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: ${correct}`);
    }
  };

  const restartQuiz = () => {
    setScore(0);
    setAnswered(0);
    setScreen('home');
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>ğŸ“˜ ØªØ¹Ù„Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ù…Ø¹ Ù†ØµØ±</Text>

      {screen === 'home' && (
        <View style={styles.content}>
          <Text style={styles.subtitle}>Ø§Ø®ØªØ± Ù…Ø§ ØªØ±ÙŠØ¯ ØªØ¹Ù„Ù…Ù‡ ğŸ‘‡</Text>

          <TouchableOpacity style={styles.btn} onPress={() => setScreen('lessons')}>
            <Text style={styles.btnText}>ğŸ“– Ø§Ù„Ø¯Ø±ÙˆØ³</Text>
          </TouchableOpacity>

          <TouchableOpacity style={styles.btn} onPress={() => setScreen('quiz')}>
            <Text style={styles.btnText}>ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹</Text>
          </TouchableOpacity>
        </View>
      )}

      {screen === 'lessons' && (
        <ScrollView style={styles.scroll}>
          <Text style={styles.subtitle}>ğŸ“– Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</Text>
          {lessons.map((lesson, i) => (
            <View key={i} style={styles.card}>
              <Text style={styles.lessonTitle}>ğŸ“˜ {lesson.title}</Text>
              {Object.entries(lesson.examples).map(([en, ar]) => (
                <Text key={en} style={styles.example}>
                  {en} âœ {ar}
                </Text>
              ))}
            </View>
          ))}
          <TouchableOpacity style={styles.backBtn} onPress={() => setScreen('home')}>
            <Text style={styles.backText}>ğŸ”™ Ø±Ø¬ÙˆØ¹</Text>
          </TouchableOpacity>
        </ScrollView>
      )}

      {screen === 'quiz' && (
        <ScrollView style={styles.scroll}>
          <Text style={styles.subtitle}>ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹</Text>

          {quiz.map((item, index) => (
            <View key={index} style={styles.card}>
              <Text style={styles.question}>{item.q}</Text>
              {item.options.map((opt) => (
                <TouchableOpacity
                  key={opt}
                  style={styles.option}
                  onPress={() => handleAnswer(opt, item.correct)}
                >
                  <Text style={styles.optionText}>{opt}</Text>
                </TouchableOpacity>
              ))}
            </View>
          ))}

          <Text style={styles.score}>
            ğŸ”¢ Ù†ØªÙŠØ¬ØªÙƒ: {score} Ù…Ù† {quiz.length}
          </Text>

          {answered === quiz.length && (
            <TouchableOpacity style={styles.btn} onPress={restartQuiz}>
              <Text style={styles.btnText}>ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</Text>
            </TouchableOpacity>
          )}

          <TouchableOpacity style={styles.backBtn} onPress={() => setScreen('home')}>
            <Text style={styles.backText}>ğŸ”™ Ø±Ø¬ÙˆØ¹</Text>
          </TouchableOpacity>
        </ScrollView>
      )}
    </View>
  );
}

// ğŸ¨ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª
const styles = StyleSheet.create({
  container: { flex: 1, backgroundColor: '#f1f5f9', paddingTop: 50, paddingHorizontal: 16 },
  title: { fontSize: 22, fontWeight: 'bold', color: '#007aff', textAlign: 'center', marginBottom: 16 },
  subtitle: { fontSize: 18, textAlign: 'center', marginBottom: 10, color: '#333' },
  btn: {
    backgroundColor: '#007aff',
    padding: 14,
    borderRadius: 10,
    marginVertical: 8,
  },
  btnText: { color: '#fff', fontWeight: 'bold', textAlign: 'center', fontSize: 16 },
  scroll: { flex: 1 },
  card: {
    backgroundColor: '#fff',
    borderRadius: 10,
    padding: 14,
    marginVertical: 8,
    elevation: 2,
  },
  lessonTitle: { fontSize: 18, color: '#007aff', fontWeight: '700', marginBottom: 6 },
  example: { fontSize: 16, marginVertical: 2 },
  question: { fontSize: 17, fontWeight: '600', marginBottom: 8 },
  option: {
    backgroundColor: '#e8e8e8',
    padding: 10,
    borderRadius: 8,
    marginVertical: 4,
  },
  optionText: { fontSize: 16, textAlign: 'center' },
  score: { textAlign: 'center', fontSize: 18, marginVertical: 12, color: '#007aff' },
  backBtn: {
    backgroundColor: '#ccc',
    padding: 12,
    borderRadius: 10,
    marginVertical: 12,
  },
  backText: { textAlign: 'center', color: '#000', fontSize: 16 },
  content: { alignItems: 'center', marginTop: 20 },
});
