# MiniApp Container MVP v2 - å®Œå…¨è§£è€¦æ–¹æ¡ˆ

## ğŸ‰ é‡å¤§æ”¹è¿›ï¼šç‹¬ç«‹çš„å¼€å‘å¯åŠ¨å™¨åŒ…

åŸºäºæ‚¨çš„å»ºè®®ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª**å®Œå…¨ç‹¬ç«‹**çš„ `expo-dev-miniapp-launcher` åŒ…ï¼Œå½»åº•è§£å†³äº†æ›´æ–°å†²çªé—®é¢˜ï¼

---

## ğŸ“¦ æ–°æ¶æ„æ¦‚è§ˆ

### ä¹‹å‰çš„æ–¹æ¡ˆ (v1) âŒ

```
ä¿®æ”¹ expo-dev-launcher
  â”œâ”€ HomeScreen.kt (ä¿®æ”¹)
  â””â”€ é—®é¢˜ï¼šæ›´æ–° expo ä»“åº“æ—¶ä¼šæœ‰å†²çª
```

### ç°åœ¨çš„æ–¹æ¡ˆ (v2) âœ…

```
åˆ›å»º expo-dev-miniapp-launcher (ç‹¬ç«‹åŒ…)
  â”œâ”€ å®Œå…¨ç‹¬ç«‹çš„ä»£ç åº“
  â”œâ”€ è‡ªå·±çš„ UI å®ç°
  â”œâ”€ ç‹¬ç«‹çš„ç‰ˆæœ¬æ§åˆ¶
  â””â”€ é›¶å†²çªï¼
```

---

## ğŸ—ï¸ åŒ…ç»“æ„

### æ–°åŒ…ï¼šexpo-dev-miniapp-launcher

```
packages/expo-dev-miniapp-launcher/
â”œâ”€â”€ android/
â”‚   â”œâ”€â”€ build.gradle
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main/
â”‚       â”‚   â”œâ”€â”€ AndroidManifest.xml
â”‚       â”‚   â”œâ”€â”€ DevMiniAppLauncherModule.kt      # Expo æ¨¡å—
â”‚       â”‚   â””â”€â”€ DevMiniAppLauncherPackage.kt     # åŒ…å®šä¹‰
â”‚       â””â”€â”€ debug/
â”‚           â””â”€â”€ ui/
â”‚               â””â”€â”€ MiniAppHomeScreen.kt         # ğŸ¨ è‡ªå®šä¹‰ UI
â”‚
â”œâ”€â”€ ios/                                         # TODO: iOS å®ç°
â”‚
â”œâ”€â”€ plugin/
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ index.ts                             # Config plugin
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ expo-module.config.json
â””â”€â”€ README.md
```

---

## ğŸ¨ è‡ªå®šä¹‰ UI ç‰¹æ€§

### MiniAppHomeScreen åŒ…å«ï¼š

1. **æ¸å˜æ¬¢è¿æ¨ªå¹…**
   - ğŸš€ å“ç‰Œæ ‡è¯†
   - ç´«è‰²åˆ°ç´«ç½—å…°æ¸å˜
   - æ¸…æ™°çš„åŠŸèƒ½è¯´æ˜

2. **æ‰«æäºŒç»´ç **
   - ğŸ“· å¤§æŒ‰é’®ï¼Œæ˜“äºç‚¹å‡»
   - è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨æˆ–åŠ è½½å°ç¨‹åº

3. **æ‰‹åŠ¨è¾“å…¥ URL**
   - âœï¸ è¾“å…¥æ¡† + è¿æ¥æŒ‰é’®
   - å ä½ç¬¦ç¤ºä¾‹ï¼š`http://192.168.1.100:8081`

4. **æœ€è¿‘ä½¿ç”¨åˆ—è¡¨**
   - ğŸ“š æ˜¾ç¤ºæœ€è¿‘è¿æ¥çš„åº”ç”¨
   - å¿«é€Ÿé‡æ–°è¿æ¥

5. **æç¤ºå¡ç‰‡**
   - ğŸ’¡ ç½‘ç»œè¿æ¥æç¤º
   - ä½¿ç”¨æŒ‡å—

### UI é¢„è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš€                                 â”‚
â”‚  MiniApp Container                  â”‚
â”‚  åŠ¨æ€åŠ è½½å°ç¨‹åºï¼Œéšæ—¶éšåœ°è¿è¡Œ         â”‚
â”‚  å®Œå…¨å…¼å®¹ Expo å¼€å‘æ¨¡å¼              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“·  æ‰«æäºŒç»´ç                       â”‚
â”‚      è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨æˆ–åŠ è½½å°ç¨‹åº      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰‹åŠ¨è¾“å…¥å¼€å‘æœåŠ¡å™¨åœ°å€               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ http://192.168.1.100:8081   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  [         è¿æ¥          ]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æœ€è¿‘ä½¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± http://192.168.1.100:8081      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åˆ›å»ºæ–°é¡¹ç›®

```bash
npx create-expo-miniapp-container my-container
```

ç”Ÿæˆçš„é¡¹ç›®è‡ªåŠ¨é…ç½®äº† `expo-dev-miniapp-launcher`ï¼

### 2. ç”Ÿæˆçš„ package.json

```json
{
  "dependencies": {
    "expo": "~52.0.0",
    "expo-dev-miniapp-launcher": "file:../../expo/packages/expo-dev-miniapp-launcher",
    "react": "18.3.1",
    "react-native": "0.76.5"
  }
}
```

### 3. ç”Ÿæˆçš„ app.json

```json
{
  "expo": {
    "plugins": [
      [
        "expo-dev-miniapp-launcher",
        {
          "enabled": true,
          "launchMode": "launcher"
        }
      ]
    ]
  }
}
```

### 4. è¿è¡Œé¡¹ç›®

```bash
cd my-container
npm install
npx expo prebuild
npx expo run:android
```

---

## âœ… ä¼˜åŠ¿å¯¹æ¯”

| ç‰¹æ€§ | ä¿®æ”¹ expo-dev-launcher | expo-dev-miniapp-launcher |
|------|----------------------|---------------------------|
| **æ›´æ–°å†²çª** | âŒ æœ‰å†²çª | âœ… é›¶å†²çª |
| **è‡ªå®šä¹‰ç¨‹åº¦** | âš ï¸ æœ‰é™ | âœ… å®Œå…¨æ§åˆ¶ |
| **ç‰ˆæœ¬ç®¡ç†** | âŒ ä¾èµ–ä¸Šæ¸¸ | âœ… ç‹¬ç«‹ç‰ˆæœ¬ |
| **ç»´æŠ¤æ€§** | âš ï¸ éœ€è¦åŒæ­¥ | âœ… ç‹¬ç«‹ç»´æŠ¤ |
| **æµ‹è¯•** | âš ï¸ å¤æ‚ | âœ… ç®€å• |
| **å‘å¸ƒ** | âŒ ä¸èƒ½å•ç‹¬å‘å¸ƒ | âœ… ç‹¬ç«‹å‘å¸ƒ |

---

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### ä¿®æ”¹ UI

1. ç¼–è¾‘ `packages/expo-dev-miniapp-launcher/android/src/debug/ui/MiniAppHomeScreen.kt`
2. é‡æ–°æ„å»ºé¡¹ç›®
3. è¿è¡Œæµ‹è¯•é¡¹ç›®æŸ¥çœ‹æ•ˆæœ

### æµ‹è¯•æ–°åŠŸèƒ½

```bash
# 1. æ„å»ºåŒ…
cd packages/expo-dev-miniapp-launcher/android
./gradlew assembleDebug

# 2. åœ¨æµ‹è¯•é¡¹ç›®ä¸­ä½¿ç”¨
cd my-test-container
npm install
npx expo run:android
```

### æ›´æ–° Expo ä»“åº“

```bash
# å†ä¹Ÿä¸ç”¨æ‹…å¿ƒå†²çªäº†ï¼
git pull upstream main
# ä½ çš„ expo-dev-miniapp-launcher å®Œå…¨ç‹¬ç«‹ï¼Œä¸å—å½±å“
```

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

```
æ–°å¢æ–‡ä»¶ï¼š12 ä¸ª
æ–°å¢ä»£ç ï¼š614 è¡Œ
åˆ é™¤å†²çªä»£ç ï¼š47 è¡Œ

packages/expo-dev-miniapp-launcher/
â”œâ”€â”€ Android æ¨¡å—ï¼š3 ä¸ªæ–‡ä»¶
â”œâ”€â”€ UI ç»„ä»¶ï¼š1 ä¸ªæ–‡ä»¶ (250+ è¡Œ)
â”œâ”€â”€ Config æ’ä»¶ï¼š2 ä¸ªæ–‡ä»¶
â””â”€â”€ æ–‡æ¡£ï¼š1 ä¸ªæ–‡ä»¶ (150+ è¡Œ)
```

---

## ğŸ¯ å®ç°ç»†èŠ‚

### 1. Expo æ¨¡å—é›†æˆ

```kotlin
// DevMiniAppLauncherModule.kt
class DevMiniAppLauncherModule : Module() {
  override fun definition() = ModuleDefinition {
    Name("DevMiniAppLauncher")

    Constants(
      "VERSION" to BuildConfig.VERSION
    )

    Function("openLauncher") {
      // æ‰“å¼€å¯åŠ¨å™¨
    }
  }
}
```

### 2. Compose UI

```kotlin
@Composable
fun MiniAppHomeScreen(
    onScanQRCode: () -> Unit,
    onConnectToServer: (String) -> Unit,
    recentApps: List<String>
) {
    // å®Œå…¨è‡ªå®šä¹‰çš„ UI
    // ä½¿ç”¨ Material Design 3
    // Jetpack Compose
}
```

### 3. Config Plugin

```typescript
const withMiniAppLauncher: ConfigPlugin = (config, props) => {
  // é…ç½® app.json
  config.extra.miniAppLauncher = {
    launchMode: props.launchMode,
    enabled: props.enabled,
  };
  return config;
};
```

---

## ğŸš¦ ä¸‹ä¸€æ­¥è®¡åˆ’

### Phase 1: å®Œå–„åŸºç¡€åŠŸèƒ½ âœ… (å½“å‰)

- [x] åˆ›å»ºç‹¬ç«‹åŒ…ç»“æ„
- [x] å®ç°è‡ªå®šä¹‰ Android UI
- [x] åˆ›å»º Config Plugin
- [x] æ›´æ–° CLI å·¥å…·
- [x] ç¼–å†™æ–‡æ¡£

### Phase 2: åŠŸèƒ½å¢å¼º

- [ ] iOS UI å®ç° (SwiftUI)
- [ ] QR ç æ‰«æåŠŸèƒ½
- [ ] å¼€å‘æœåŠ¡å™¨è‡ªåŠ¨å‘ç°
- [ ] æœ€è¿‘åº”ç”¨æŒä¹…åŒ–

### Phase 3: å°ç¨‹åºåŠ è½½

- [ ] Manifest è§£æå™¨
- [ ] Bundle åŠ è½½å™¨
- [ ] ç¦»çº¿åŒ…å®‰è£…
- [ ] æƒé™ç®¡ç†

### Phase 4: é«˜çº§åŠŸèƒ½

- [ ] Hot Reload
- [ ] DevTools é›†æˆ
- [ ] æ€§èƒ½ç›‘æ§
- [ ] é”™è¯¯è¿½è¸ª

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ä» QR ç åŠ è½½

```bash
# ç»ˆç«¯ 1ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd my-miniapp
npx expo start

# ç»ˆç«¯ 2ï¼šåœ¨å®¹å™¨ä¸­æ‰«ç 
cd my-container
npx expo run:android
# ç‚¹å‡» "æ‰«æäºŒç»´ç " æŒ‰é’®
# æ‰«æç»ˆç«¯ 1 æ˜¾ç¤ºçš„äºŒç»´ç 
```

### æ‰‹åŠ¨è¿æ¥

```bash
# åœ¨å®¹å™¨ä¸­æ‰‹åŠ¨è¾“å…¥
http://192.168.1.100:8081
# ç‚¹å‡» "è¿æ¥" æŒ‰é’®
```

---

## ğŸ” å…³é”®æ–‡ä»¶è¯´æ˜

### MiniAppHomeScreen.kt (250+ è¡Œ)

è¿™æ˜¯æ ¸å¿ƒ UI æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- Composable å‡½æ•°
- Material Design ç»„ä»¶
- äº‹ä»¶å¤„ç†
- çŠ¶æ€ç®¡ç†

**ç‰¹ç‚¹ï¼š**
- çº¯ Kotlin + Compose
- å“åº”å¼è®¾è®¡
- æ”¯æŒ Preview
- æ˜“äºæµ‹è¯•

### DevMiniAppLauncherModule.kt

Expo æ¨¡å—å®šä¹‰ï¼š
- æš´éœ²ç»™ JS çš„ API
- å¸¸é‡å®šä¹‰
- å‡½æ•°å®ç°

### Config Plugin (plugin/src/index.ts)

é…ç½®æ’ä»¶ï¼š
- è¯»å– app.json é…ç½®
- ä¿®æ”¹åŸç”Ÿé¡¹ç›®é…ç½®
- æ³¨å…¥è¿è¡Œæ—¶å‚æ•°

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æœ¬åœ°å¼€å‘

```bash
# ä½¿ç”¨ file: åè®®é“¾æ¥æœ¬åœ°åŒ…
"expo-dev-miniapp-launcher": "file:../../expo/packages/expo-dev-miniapp-launcher"
```

### 2. å‘å¸ƒåˆ° npm

```bash
cd packages/expo-dev-miniapp-launcher
npm publish
```

### 3. ç‰ˆæœ¬ç®¡ç†

éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼š
- `0.1.0` - MVP
- `0.2.0` - iOS æ”¯æŒ
- `1.0.0` - ç”Ÿäº§å°±ç»ª

---

## ğŸŠ æˆæœæ€»ç»“

æˆ‘ä»¬æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªï¼š

1. âœ… **å®Œå…¨ç‹¬ç«‹**çš„å¼€å‘å¯åŠ¨å™¨åŒ…
2. âœ… **é›¶å†²çª**çš„æ›´æ–°ç­–ç•¥
3. âœ… **ç¾è§‚ç°ä»£**çš„è‡ªå®šä¹‰ UI
4. âœ… **æ˜“äºä½¿ç”¨**çš„ CLI å·¥å…·
5. âœ… **æ–‡æ¡£é½å…¨**çš„é¡¹ç›®ç»“æ„

**æœ€é‡è¦çš„æ˜¯ï¼šå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæ›´æ–° Expo ä»“åº“æ—¶çš„å†²çªäº†ï¼** ğŸ‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [expo-dev-miniapp-launcher README](./packages/expo-dev-miniapp-launcher/README.md)
- [create-expo-miniapp-container ä½¿ç”¨æŒ‡å—](./packages/create-expo-miniapp-container/README.md)
- [æµ‹è¯•æŒ‡å—](./packages/create-expo-miniapp-container/TESTING.md)

---

## ğŸ”— Git ä¿¡æ¯

**åˆ†æ”¯:** `claude/miniapp-container-mvp-01CqTgFZ1wJ6EbFTWwqr5FvH`

**æäº¤:**
- `beaaa7b9` - æ–‡æ¡£
- `65450c08` - MVP v1 (å·²åºŸå¼ƒ)
- `35ee6591` - MVP v2 (å½“å‰ï¼Œç‹¬ç«‹åŒ…æ–¹æ¡ˆ)

**æ¨é€:**
```bash
git push -u origin claude/miniapp-container-mvp-01CqTgFZ1wJ6EbFTWwqr5FvH
```

---

**MVP v2 çŠ¶æ€:** âœ… **å®Œæˆå¹¶å‡†å¤‡æµ‹è¯•**

**ä¸»è¦æ”¹è¿›:** ä»ä¿®æ”¹ä¸Šæ¸¸åŒ…æ”¹ä¸ºåˆ›å»ºç‹¬ç«‹åŒ…ï¼Œå½»åº•è§£å†³å†²çªé—®é¢˜ï¼
