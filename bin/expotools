#!/usr/bin/env node

import { spawnSync } from 'node:child_process';
import path from 'node:path';

const repositoryRoot = path.resolve(import.meta.dirname, '..');
const expotoolsDir = path.join(repositoryRoot, 'tools');
const nodeBinary = process.env.NODE_BINARY || 'node';

const result = spawnSync(
  nodeBinary,
  [path.join(expotoolsDir, 'bin', 'expotools.js'), ...process.argv.slice(2)],
  {
    stdio: 'inherit',
    cwd: expotoolsDir,
  }
);

if (result.error) {
  console.error(result.error);
  process.exit(1);
}

process.exit(result.status ?? 0);
