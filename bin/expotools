#!/usr/bin/env node

import { spawn } from 'node:child_process';
import path from 'path';

const repositoryRoot = path.resolve(import.meta.dirname, '..');
const expotoolsDir = path.join(repositoryRoot, 'tools');
const nodeBinary = process.env.NODE_BINARY || 'node';

const child = spawn(
  nodeBinary,
  [path.join(expotoolsDir, 'bin', 'expotools.js'), ...process.argv.slice(2)],
  {
    stdio: 'inherit',
    cwd: expotoolsDir,
  }
);

child.on('close', (code) => {
  process.exit(code ?? 0);
});

child.on('error', (error) => {
  console.error(error);
  process.exit(1);
});
