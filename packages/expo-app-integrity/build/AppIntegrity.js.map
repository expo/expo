{"version":3,"file":"AppIntegrity.js","sourceRoot":"","sources":["../src/AppIntegrity.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAC;AAExC,OAAO,gBAAgB,MAAM,oBAAoB,CAAC;AAElD;;;;GAIG;AACH,MAAM,CAAC,MAAM,WAAW,GAAG,QAAQ,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AAEvF;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,gBAAgB;IACpC,IAAI,QAAQ,CAAC,EAAE,KAAK,KAAK,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;IAChE,CAAC;IACD,OAAO,gBAAgB,CAAC,gBAAgB,EAAE,CAAC;AAC7C,CAAC;AAED;;;;;;GAMG;AACH,MAAM,CAAC,KAAK,UAAU,cAAc,CAAC,KAAa,EAAE,SAAiB;IACnE,IAAI,QAAQ,CAAC,EAAE,KAAK,KAAK,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;IAChE,CAAC;IACD,OAAO,gBAAgB,CAAC,cAAc,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AAC3D,CAAC;AAED;;;;;;GAMG;AACH,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAAC,KAAa,EAAE,SAAiB;IAC3E,IAAI,QAAQ,CAAC,EAAE,KAAK,KAAK,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;IAChE,CAAC;IACD,OAAO,gBAAgB,CAAC,sBAAsB,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AACnE,CAAC;AAED;;;;;GAKG;AACH,MAAM,CAAC,KAAK,UAAU,kCAAkC,CAAC,kBAA0B;IACjF,IAAI,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE,CAAC;QAC9B,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;IAChF,CAAC;IACD,OAAO,gBAAgB,CAAC,kCAAkC,CAAC,kBAAkB,CAAC,CAAC;AACjF,CAAC;AAED;;;;;GAKG;AACH,MAAM,CAAC,KAAK,UAAU,0BAA0B,CAAC,WAAmB;IAClE,IAAI,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE,CAAC;QAC9B,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAC;IACxE,CAAC;IACD,OAAO,gBAAgB,CAAC,0BAA0B,CAAC,WAAW,CAAC,CAAC;AAClE,CAAC;AAED;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,mCAAmC;IACvD,IAAI,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE,CAAC;QAC9B,OAAO,KAAK,CAAC;IACf,CAAC;IACD,OAAO,gBAAgB,CAAC,mCAAmC,EAAE,CAAC;AAChE,CAAC;AAED;;;;;;;GAOG;AACH,MAAM,CAAC,KAAK,UAAU,gCAAgC,CAAC,QAAgB,EAAE,SAAiB;IACxF,IAAI,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE,CAAC;QAC9B,MAAM,IAAI,KAAK,CAAC,0DAA0D,CAAC,CAAC;IAC9E,CAAC;IACD,OAAO,gBAAgB,CAAC,gCAAgC,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;AAChF,CAAC;AAED;;;;;;GAMG;AACH,MAAM,CAAC,KAAK,UAAU,mCAAmC,CAAC,QAAgB;IACxE,IAAI,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE,CAAC;QAC9B,MAAM,IAAI,KAAK,CAAC,6DAA6D,CAAC,CAAC;IACjF,CAAC;IACD,OAAO,gBAAgB,CAAC,mCAAmC,CAAC,QAAQ,CAAC,CAAC;AACxE,CAAC","sourcesContent":["import { Platform } from 'react-native';\n\nimport ExpoAppIntegrity from './ExpoAppIntegrity';\n\n/**\n * A boolean value that indicates whether a particular device provides the [App Attest](https://developer.apple.com/documentation/devicecheck/establishing-your-app-s-integrity) service.\n * Not all device types support the App Attest service, so check for support before using the service.\n * @platform ios\n */\nexport const isSupported = Platform.OS === 'ios' ? ExpoAppIntegrity.isSupported : true;\n\n/**\n * Creates a new cryptographic key for use with the App Attest service.\n * @return A Promise that is fulfilled with a string that contains the key identifier. The key itself is stored securely in the Secure Enclave.\n * @platform ios\n */\nexport async function generateKeyAsync() {\n  if (Platform.OS !== 'ios') {\n    throw new Error('generateAssertion is only available on iOS');\n  }\n  return ExpoAppIntegrity.generateKeyAsync();\n}\n\n/**\n * Asks Apple to attest to the validity of a generated cryptographic key.\n * @param keyId The identifier you received by calling the `generateKey` function.\n * @param challenge A challenge string from your server.\n * @return A Promise that is fulfilled with a string that contains the attestation data. A statement from Apple about the validity of the key associated with keyId. Send this to your server for processing.\n * @platform ios\n */\nexport async function attestKeyAsync(keyId: string, challenge: string) {\n  if (Platform.OS !== 'ios') {\n    throw new Error('generateAssertion is only available on iOS');\n  }\n  return ExpoAppIntegrity.attestKeyAsync(keyId, challenge);\n}\n\n/**\n * Creates a block of data that demonstrates the legitimacy of an instance of your app running on a device.\n * @param keyId The identifier you received by calling the `generateKey` function.\n * @param challenge A string to be signed with the attested private key.\n * @return A Promise that is fulfilled with a string that contains the assertion object. A data structure that you send to your server for processing.\n * @platform ios\n */\nexport async function generateAssertionAsync(keyId: string, challenge: string) {\n  if (Platform.OS !== 'ios') {\n    throw new Error('generateAssertion is only available on iOS');\n  }\n  return ExpoAppIntegrity.generateAssertionAsync(keyId, challenge);\n}\n\n/**\n * Prepares the integrity token provider for the given cloud project number.\n * @param cloudProjectNumber The cloud project number.\n * @return A Promise that is fulfilled if the integrity token provider is prepared successfully.\n * @platform android\n */\nexport async function prepareIntegrityTokenProviderAsync(cloudProjectNumber: string) {\n  if (Platform.OS !== 'android') {\n    throw new Error('prepareIntegrityTokenProvider is only available on Android');\n  }\n  return ExpoAppIntegrity.prepareIntegrityTokenProviderAsync(cloudProjectNumber);\n}\n\n/**\n * Requests an integrity verdict for the given request hash from Google Play.\n * @param requestHash A string representing the request hash.\n * @return A Promise that is fulfilled with a string that contains the integrity check result.\n * @platform android\n */\nexport async function requestIntegrityCheckAsync(requestHash: string) {\n  if (Platform.OS !== 'android') {\n    throw new Error('requestIntegrityCheck is only available on Android');\n  }\n  return ExpoAppIntegrity.requestIntegrityCheckAsync(requestHash);\n}\n\n/**\n * Checks if hardware attestation is supported on this device.\n * @return A Promise that is fulfilled with a boolean indicating support.\n * @platform android\n */\nexport async function isHardwareAttestationSupportedAsync() {\n  if (Platform.OS !== 'android') {\n    return false;\n  }\n  return ExpoAppIntegrity.isHardwareAttestationSupportedAsync();\n}\n\n/**\n * Generates a hardware-attested key pair in the Android Keystore.\n * This key can be used for attestation on GrapheneOS and other secure Android distributions.\n * @param keyAlias A unique identifier for the key.\n * @param challenge A challenge string from your server.\n * @return A Promise that resolves when the key is generated successfully.\n * @platform android\n */\nexport async function generateHardwareAttestedKeyAsync(keyAlias: string, challenge: string) {\n  if (Platform.OS !== 'android') {\n    throw new Error('generateHardwareAttestedKey is only available on Android');\n  }\n  return ExpoAppIntegrity.generateHardwareAttestedKeyAsync(keyAlias, challenge);\n}\n\n/**\n * Retrieves the attestation certificate chain for a hardware-attested key.\n * The certificate chain can be validated on your server to verify device integrity.\n * @param keyAlias The identifier of the key to get certificates for.\n * @return A Promise that is fulfilled with an array of base64-encoded X.509 certificates.\n * @platform android\n */\nexport async function getAttestationCertificateChainAsync(keyAlias: string) {\n  if (Platform.OS !== 'android') {\n    throw new Error('getAttestationCertificateChain is only available on Android');\n  }\n  return ExpoAppIntegrity.getAttestationCertificateChainAsync(keyAlias);\n}\n"]}