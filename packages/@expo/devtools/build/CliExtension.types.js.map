{"version":3,"file":"CliExtension.types.js","sourceRoot":"","sources":["../src/CliExtension.types.ts"],"names":[],"mappings":"","sourcesContent":["/**\n * TypeScript types for the Expo DevTools app information. An app is a running Expo React Native application\n * that is connected to the Expo DevTools, which provides debugging and development tools.\n */\nexport type ExpoCliExtensionAppInfo = {\n  /** Unique device ID combined with the page ID */\n  id: string;\n  /** Information about the underlying CDP implementation, e.g. \"React Native Bridgeless [C++ connection]\" */\n  title: string;\n  /** The application ID that is currently running on the device, e.g. \"dev.expo.bareexpo\" */\n  appId: string;\n  /** The description of the runtime, e.g. \"React Native Bridgeless [C++ connection]\" */\n  description: string;\n  /** The CDP debugger type, which should always be \"node\" */\n  type: 'node';\n  /** The internal `devtools://..` URL for the debugger to connect to */\n  devtoolsFrontendUrl: string;\n  /** The websocket URL for the debugger to connect to */\n  webSocketDebuggerUrl: string;\n  /**\n   * Human-readable device name\n   * @since react-native@0.73\n   */\n  deviceName: string;\n  /**\n   * React Native specific information, like the unique device ID and native capabilities\n   * @since react-native@0.74\n   */\n  reactNative?: {\n    /** The unique device ID */\n    logicalDeviceId: string;\n    /** All supported native capabilities */\n    capabilities: {\n      /**\n       * Indicates wether this page supports native page reloads - this is the flag we'll be using\n       * when filtering the list of available apps for CLI extensions that support reloading\n       */\n      nativePageReloads: boolean;\n    };\n  };\n};\n\n/**\n * User-defined command schema - each command maps to its specific additional arguments.\n * The base source argument will be automatically added.\n *\n * @example\n * ```typescript\n * type MyCommands = {\n *   list: { filter?: string; limit?: number };\n *   deploy: { environment: string; force?: boolean };\n *   test: {}; // No additional args needed\n * };\n * ```\n */\nexport type ExpoCliExtensionCommandSchema = Record<string, Record<string, any>>;\n\n/**\n * Transforms a command schema to include the base source arguments\n */\nexport type ExpoCliExtensionArgs<T extends ExpoCliExtensionCommandSchema> = {\n  [K in keyof T]: T[K];\n};\n\n/**\n * Union type that creates properly correlated command-args pairs.\n * This ensures that when you have a specific command, the args are typed correctly.\n */\nexport type ExpoCliExtensionCommands<T extends ExpoCliExtensionCommandSchema> = {\n  [K in keyof T]: {\n    command: K;\n    args: ExpoCliExtensionArgs<T>[K];\n  };\n}[keyof T];\n\n/**\n * TypeScript types for the Expo CLI extension parameters. This interface defines the structure of the parameters\n * that can be passed to an extension, which includes the command to execute, arguments for the command,\n * and a list of connected Expo applications.\n *\n * The type uses a union approach to ensure that `command` and `args` are properly correlated.\n */\nexport type ExpoCliExtensionParameters<T extends ExpoCliExtensionCommandSchema> = {\n  [K in keyof T]: {\n    command: K;\n    args: ExpoCliExtensionArgs<T>[K];\n    metroServerOrigin: string;\n  };\n}[keyof T];\n\n/**\n * Executor function type that ensures type safety between command and args.\n * The args will automatically include the source property.\n *\n * Uses a discriminated union callback pattern to enable TypeScript narrowing:\n * when you check `command === 'someCommand'`, the `args` type will be narrowed accordingly.\n */\nexport type ExpoCliExtensionExecutor<T extends ExpoCliExtensionCommandSchema> = (\n  params: ExpoCliExtensionParameters<T>,\n  console: {\n    log: (message: string, ...args: any[]) => void;\n    info: (message: string, ...args: any[]) => void;\n    warn: (message: string, ...args: any[]) => void;\n    error: (message: string, ...args: any[]) => void;\n    uri: (uri: string, altText?: string) => void;\n  }\n) => Promise<void>;\n"]}