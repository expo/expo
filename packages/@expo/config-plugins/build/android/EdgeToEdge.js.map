{"version":3,"file":"EdgeToEdge.js","names":["_Styles","data","require","_index","_androidPlugins","OPT_OUT_EDGE_TO_EDGE_ATTRIBUTE","TAG","withEdgeToEdge","config","pluginIndex","edgeToEdgePluginIndex","enableEdgeToEdge","undefined","WarningAggregator","addWarningAndroid","edgeToEdgeConfigPlugin","loadEdgeToEdgeConfigPlugin","withConfigureEdgeToEdgeEnforcement","disableEdgeToEdgeEnforcement","hasEnabledEdgeToEdge","warning","constructWarning","android","parentTheme","enforceNavigationBarContrast","exports","withAndroidStyles","modResults","assignStylesValue","add","parent","getAppThemeGroup","targetApi","name","value","noArgumentPluginIndex","plugins","findIndex","plugin","includes","argumentPluginIndex","Math","max","default"],"sources":["../../src/android/EdgeToEdge.ts"],"sourcesContent":["import { ExpoConfig } from '@expo/config-types';\n\nimport { ConfigPlugin } from '../Plugin.types';\nimport { assignStylesValue, getAppThemeGroup } from './Styles';\nimport { WarningAggregator } from '../index';\nimport { withAndroidStyles } from '../plugins/android-plugins';\n\nconst OPT_OUT_EDGE_TO_EDGE_ATTRIBUTE = 'android:windowOptOutEdgeToEdgeEnforcement';\nconst TAG = 'EDGE_TO_EDGE_PLUGIN';\ntype EdgeToEdgePlugin = ConfigPlugin<{\n  android: {\n    parentTheme?: string;\n    enforceNavigationBarContrast?: boolean;\n  };\n}>;\n\nexport const withEdgeToEdge: ConfigPlugin = (config) => {\n  // Check if someone has manually configured the config plugin\n  const pluginIndex = edgeToEdgePluginIndex(config);\n\n  if (config.enableEdgeToEdge === undefined && pluginIndex === null) {\n    WarningAggregator.addWarningAndroid(\n      TAG,\n      'No configuration found for `enableEdgeToEdge` field in the project app config, falling back to false. In Android 16+ (targetSdkVersion 36) it will no longer be possible to disable edge-to-edge. Learn more:',\n      'https://expo.fyi/edge-to-edge-rollout'\n    );\n  } else if (config.enableEdgeToEdge === false && pluginIndex === null) {\n    WarningAggregator.addWarningAndroid(\n      TAG,\n      '`enableEdgeToEdge` field is explicitly set to false in the project app config. In Android 16+ (targetSdkVersion 36) it will no longer be possible to disable edge-to-edge. Learn more:',\n      'https://expo.fyi/edge-to-edge-rollout'\n    );\n  }\n  const edgeToEdgeConfigPlugin = loadEdgeToEdgeConfigPlugin();\n\n  if (edgeToEdgeConfigPlugin === null) {\n    WarningAggregator.addWarningAndroid(\n      TAG,\n      'Failed to load the react-native-edge-to-edge config plugin, edge to edge functionality will be disabled. ' +\n        'To enable edge-to-edge make sure that `react-native-edge-to-edge` is installed in your project.'\n    );\n\n    // Disable edge-to-edge enforcement if the plugin is not installed\n    return withConfigureEdgeToEdgeEnforcement(config, {\n      disableEdgeToEdgeEnforcement: false,\n    });\n  }\n\n  // Enable/disable edge-to-edge enforcement\n  config = withConfigureEdgeToEdgeEnforcement(config, {\n    disableEdgeToEdgeEnforcement: hasEnabledEdgeToEdge(config),\n  });\n\n  if (pluginIndex !== null) {\n    const warning = constructWarning(pluginIndex, config);\n    if (warning) {\n      WarningAggregator.addWarningAndroid('EDGE_TO_EDGE_CONFLICT', warning);\n    }\n    return config;\n  }\n\n  if (config.enableEdgeToEdge !== true) {\n    return config;\n  }\n\n  // Run `react-native-edge-to-edge` config plugin configuration if edge-to-edge is enabled and the user hasn't added their own\n  // plugin configuration in `app.json` / `app.config.json`.\n  return edgeToEdgeConfigPlugin(config, {\n    android: {\n      parentTheme: 'Default',\n      enforceNavigationBarContrast: false,\n    },\n  });\n};\n\nexport const withConfigureEdgeToEdgeEnforcement: ConfigPlugin<{\n  disableEdgeToEdgeEnforcement: boolean;\n}> = (config, { disableEdgeToEdgeEnforcement }) => {\n  return withAndroidStyles(config, (config) => {\n    config.modResults = assignStylesValue(config.modResults, {\n      add: !disableEdgeToEdgeEnforcement,\n      parent: getAppThemeGroup(),\n      targetApi: '35',\n      name: OPT_OUT_EDGE_TO_EDGE_ATTRIBUTE,\n      value: 'true',\n    });\n    return config;\n  });\n};\n\nfunction edgeToEdgePluginIndex(config: ExpoConfig): number | null {\n  const noArgumentPluginIndex =\n    config.plugins?.findIndex(\n      (plugin) => typeof plugin === 'string' && plugin.includes('react-native-edge-to-edge')\n    ) ?? -1;\n\n  const argumentPluginIndex =\n    config.plugins?.findIndex(\n      (plugin) => typeof plugin[0] === 'string' && plugin[0].includes('react-native-edge-to-edge')\n    ) ?? -1;\n\n  const pluginIndex = Math.max(noArgumentPluginIndex, argumentPluginIndex);\n\n  if (pluginIndex === -1) {\n    return null;\n  }\n  return pluginIndex;\n}\n\nexport function hasEnabledEdgeToEdge(config: ExpoConfig) {\n  return config.enableEdgeToEdge === true || edgeToEdgePluginIndex(config) != null;\n}\n\nfunction constructWarning(pluginIndex: number | null, config: ExpoConfig): string | null {\n  if (pluginIndex === null) {\n    return null;\n  }\n\n  if (hasEnabledEdgeToEdge(config) && config.enableEdgeToEdge === false) {\n    return (\n      `You have configured the \\`react-native-edge-to-edge\\` plugin in your config file, while also setting the \\`enableEdgeToEdge\\` ` +\n      `field to \\`false\\`. The value of \\`enableEdgeToEdge\\` field will be ignored`\n    );\n  }\n  return null;\n}\n\nfunction loadEdgeToEdgeConfigPlugin(): EdgeToEdgePlugin | null {\n  try {\n    // @ts-ignore <-- edge-to-edge plugin doesn't export a type definition\n    const { default: plugin } = require('react-native-edge-to-edge/app.plugin.js');\n    return plugin as EdgeToEdgePlugin;\n  } catch {\n    return null;\n  }\n}\n"],"mappings":"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","ignoreList":[]}