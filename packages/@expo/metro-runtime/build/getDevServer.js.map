{"version":3,"file":"getDevServer.js","sourceRoot":"","sources":["../src/getDevServer.ts"],"names":[],"mappings":";;;;;AAAA,4CAAoB;AAEpB,MAAM,YAAY,GAAG,GAAG,EAAE;IACxB,kBAAkB;IAClB,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;QACjC,OAAO;YACL,sBAAsB,EAAE,IAAI;YAC5B,aAAa,EAAE,EAAE;YACjB,GAAG,EAAE,EAAE;SACR,CAAC;KACH;IAED,OAAO;QACL,4DAA4D;QAC5D,sBAAsB,EAAE,IAAI;QAE5B,0DAA0D;QAC1D,IAAI,aAAa;YACf,IAAI,QAAQ,EAAE,aAAa,IAAI,KAAK,IAAI,QAAQ,CAAC,aAAa,EAAE;gBAC9D,OAAO,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC;aACnC;YAED,MAAM,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YACvC,MAAM,KAAK,GAAG,YAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAE5B,OAAO,CACL,QAAQ,CAAC,MAAM,GAAG,QAAQ,CAAC,QAAQ,GAAG,GAAG,GAAG,YAAE,CAAC,SAAS,CAAC,EAAE,GAAG,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CACxF,CAAC;QACJ,CAAC;QACD,GAAG,EAAE,QAAQ,CAAC,MAAM,GAAG,QAAQ,CAAC,QAAQ;KACzC,CAAC;AACJ,CAAC,CAAC;AAEF,kBAAe,YAAY,CAAC","sourcesContent":["import qs from 'qs';\n\nconst getDevServer = () => {\n  // Disable for SSR\n  if (typeof window === 'undefined') {\n    return {\n      bundleLoadedFromServer: true,\n      fullBundleUrl: '',\n      url: '',\n    };\n  }\n\n  return {\n    // The bundle is always loaded from a server in the browser.\n    bundleLoadedFromServer: true,\n\n    /** URL but ensures that platform query param is added. */\n    get fullBundleUrl() {\n      if (document?.currentScript && 'src' in document.currentScript) {\n        return document.currentScript.src;\n      }\n\n      const url = window.location.toString();\n      const query = qs.parse(url);\n\n      return (\n        location.origin + location.pathname + '?' + qs.stringify({ ...query, platform: 'web' })\n      );\n    },\n    url: location.origin + location.pathname,\n  };\n};\n\nexport default getDevServer;\n"]}