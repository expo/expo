{"version":3,"file":"UseUpdates.types.js","sourceRoot":"","sources":["../src/UseUpdates.types.ts"],"names":[],"mappings":"AAuIA;;GAEG;AACH,MAAM,CAAN,IAAY,mBA8BX;AA9BD,WAAY,mBAAmB;IAC7B;;;;OAIG;IACH,2DAAoC,CAAA;IACpC;;;;;OAKG;IACH,gEAAyC,CAAA;IACzC;;OAEG;IACH,sCAAe,CAAA;IACf;;OAEG;IACH,uDAAgC,CAAA;IAChC;;OAEG;IACH,6DAAsC,CAAA;IACtC;;OAEG;IACH,2EAAoD,CAAA;AACtD,CAAC,EA9BW,mBAAmB,KAAnB,mBAAmB,QA8B9B","sourcesContent":["import Constants from 'expo-constants';\nimport type { UpdatesLogEntry } from 'expo-updates';\n\nexport type ClassicManifest = NonNullable<typeof Constants.manifest>;\n\n/**\n * The [modern manifest type](https://docs.expo.dev/versions/latest/sdk/constants/#manifest)\n */\nexport type Manifest = ClassicManifest | NonNullable<typeof Constants.manifest2>;\n\n/**\n * Structure encapsulating information on the currently running app\n * (either the embedded bundle or a downloaded update).\n */\nexport type CurrentlyRunningInfo = {\n  /**\n   * The UUID that uniquely identifies the currently running update if `expo-updates` is enabled. The\n   * UUID is represented in its canonical string form (`xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`) and\n   * will always use lowercase letters. In development mode, or any other environment in which\n   * `expo-updates` is disabled, this value is `null`.\n   */\n  updateId: string | null;\n  /**\n   * The channel name of the current build, if configured for use with EAS Update. `null` otherwise.\n   */\n  channel: string | null;\n  /**\n   * If `expo-updates` is enabled, this is a `Date` object representing the creation time of the update\n   * that's currently running (whether it was embedded or downloaded at runtime).\n   *\n   * In development mode, or any other environment in which `expo-updates` is disabled, this value is\n   * `null`.\n   */\n  createdAt: Date | null;\n  /**\n   * This will be true if the currently running update is the one embedded in the build,\n   * and not one downloaded from the updates server.\n   */\n  isEmbeddedLaunch: boolean;\n  /**\n   * `expo-updates` does its very best to always launch monotonically newer versions of your app so\n   * you don't need to worry about backwards compatibility when you put out an update. In very rare\n   * cases, it's possible that `expo-updates` may need to fall back to the update that's embedded in\n   * the app binary, even after newer updates have been downloaded and run (an \"emergency launch\").\n   * This boolean will be `true` if the app is launching under this fallback mechanism and `false`\n   * otherwise. If you are concerned about backwards compatibility of future updates to your app, you\n   * can use this constant to provide special behavior for this rare case.\n   */\n  isEmergencyLaunch: boolean;\n  /**\n   * If `expo-updates` is enabled, this is the\n   * [manifest](https://docs.expo.dev/versions/latest/sdk/updates/#updatesmanifest) object for the update that's currently\n   * running.\n   *\n   * In development mode, or any other environment in which `expo-updates` is disabled, this object is\n   * empty.\n   */\n  manifest: Partial<Manifest> | null;\n  /**\n   * The runtime version of the current build.\n   */\n  runtimeVersion: string | null;\n};\n\n/**\n * Structure representing an available update that has been returned by a call to [`checkForUpdate()`](#checkforupdate)\n * or an [`UpdateEvent`](#updateevent) emitted by native code.\n */\nexport type AvailableUpdateInfo = {\n  /**\n   * A string that uniquely identifies the update. For the manifests used in the current Expo Updates protocol (including\n   * EAS Update), this represents the update's UUID in its canonical string form (`xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`)\n   * and will always use lowercase letters.\n   */\n  updateId: string | null;\n  /**\n   * A `Date` object representing the creation time of the update.\n   */\n  createdAt: Date | null;\n  /**\n   * The [manifest](https://docs.expo.dev/versions/latest/sdk/constants/#manifest) for the update.\n   */\n  manifest: Manifest;\n};\n\n/**\n * The structures and methods returned by `useUpdates()`.\n */\nexport type UseUpdatesReturnType = {\n  /**\n   * Information on the currently running app\n   */\n  currentlyRunning: CurrentlyRunningInfo;\n  /**\n   * If a new available update has been found, either by using checkForUpdate(),\n   * or by the `UpdateEvent` listener in `useUpdates()`,\n   * this will contain the information for that update.\n   */\n  availableUpdate?: AvailableUpdateInfo;\n  /**\n   * True if a new available update has been found, false otherwise.\n   */\n  isUpdateAvailable: boolean;\n  /**\n   * True if a new available update is available and has been downloaded.\n   */\n  isUpdatePending: boolean;\n  /**\n   * If an error is returned by any of the APIs to check for, download, or launch updates,\n   * the error description will appear here.\n   */\n  error?: Error;\n  /**\n   * A `Date` object representing the last time this client checked for an available update,\n   * or `undefined` if no check has yet occurred since the app started. Does not persist across\n   * app reloads or restarts.\n   */\n  lastCheckForUpdateTimeSinceRestart?: Date;\n  /**\n   * If present, contains items of type [UpdatesLogEntry](https://docs.expo.dev/versions/latest/sdk/updates/#updateslogentry)\n   * returned by the `getLogEntries()` method.\n   */\n  logEntries?: UpdatesLogEntry[];\n};\n\n// Internal type for the state managed by useUpdates()\nexport type UseUpdatesStateType = {\n  availableUpdate?: AvailableUpdateInfo;\n  error?: Error;\n  isUpdateAvailable: boolean;\n  isUpdatePending: boolean;\n  lastCheckForUpdateTimeSinceRestart?: Date;\n  logEntries?: UpdatesLogEntry[];\n};\n\n/**\n * The types of update-related events.\n */\nexport enum UseUpdatesEventType {\n  /**\n   * A new update is available for the app. This event can be fired either from\n   * the native code that automatically checks for an update on startup (when automatic updates\n   * are enabled), or from the completion of checkForUpdate().\n   */\n  UPDATE_AVAILABLE = 'updateAvailable',\n  /**\n   * No new update is available for the app, and the most up-to-date update is already running.\n   * This event can be fired either from\n   * the native code that automatically checks for an update on startup (when automatic updates\n   * are enabled), or from the completion of checkForUpdate().\n   */\n  NO_UPDATE_AVAILABLE = 'noUpdateAvailable',\n  /**\n   * An error occurred.\n   */\n  ERROR = 'error',\n  /**\n   * A call to `downloadUpdate()` has started.\n   */\n  DOWNLOAD_START = 'downloadStart',\n  /**\n   * A call to `downloadUpdate()` has completed successfully.\n   */\n  DOWNLOAD_COMPLETE = 'downloadComplete',\n  /**\n   * A call to `readLogEntries()` has completed successfully.\n   */\n  READ_LOG_ENTRIES_COMPLETE = 'readLogEntriesComplete',\n}\n\n/**\n * An object that is passed into each event listener when an auto-update check occurs.\n */\nexport type UseUpdatesEvent = {\n  /**\n   * Type of the event.\n   */\n  type: UseUpdatesEventType;\n  /**\n   * If `type` is `UseUpdatesEvent.UPDATE_AVAILABLE` or `UseUpdatesEvent.DOWNLOAD_COMPLETE`,\n   * the manifest of the new update, and `undefined` otherwise.\n   */\n  manifest?: Manifest;\n  /**\n   * If `type` is `UseUpdatesEventType.ERROR`, the error, and `undefined` otherwise.\n   */\n  error?: Error;\n  /**\n   * If `type` is `UseUpdatesEventType.READ_LOG_ENTRIES_COMPLETE`, the log entries returned, and `undefined` otherwise.\n   */\n  logEntries?: UpdatesLogEntry[];\n};\n"]}