import { parseErrorStack } from '../log-box/LogBoxSymbolication';
import { TerminalReporter } from '../TerminalReporter';
import { TerminalReportableEvent } from '../TerminalReporter.types';

function createReporter() {
  const reporter = new TerminalReporter({
    log: jest.fn(),
    persistStatus: jest.fn(),
    status: jest.fn(),
  });
  return reporter;
}

it(`invokes utility transform cache reset function`, () => {
  const reporter = createReporter();
  reporter.transformCacheReset = jest.fn();
  reporter._log({
    type: 'transform_cache_reset',
  });
  expect(reporter.transformCacheReset).toHaveBeenCalled();
});
it(`invokes utility graph loading function`, () => {
  const reporter = createReporter();
  reporter.dependencyGraphLoading = jest.fn();
  reporter._log({
    type: 'dep_graph_loading',
    hasReducedPerformance: true,
  });
  expect(reporter.dependencyGraphLoading).toHaveBeenCalledWith(true);
});
it(`invokes utility filter function`, () => {
  const reporter = createReporter();

  reporter.shouldFilterClientLog = jest.fn();
  const event: TerminalReportableEvent = {
    type: 'client_log',
    level: 'trace',
    data: [],
  };
  reporter._log(event);
  expect(reporter.shouldFilterClientLog).toHaveBeenCalledWith(event);
  expect(reporter.terminal.log).toBeCalled();
});
it(`skips logging if the filter function returns true`, () => {
  const reporter = createReporter();

  reporter.shouldFilterClientLog = jest.fn(() => true);
  const event: TerminalReportableEvent = {
    type: 'client_log',
    level: 'trace',
    data: [],
  };
  reporter._log(event);
  expect(reporter.shouldFilterClientLog).toHaveBeenCalledWith(event);
  expect(reporter.terminal.log).not.toBeCalled();
});

function parseErrorStringToObject(errorString: string) {
  // Find the first line of the possible stack trace
  const stackStartIndex = errorString.indexOf('\n    at ');
  if (stackStartIndex === -1) {
    // No stack trace found, return the original error string
    return {
      message: errorString,
      stack: [],
    };
  }
  const message = errorString.slice(0, stackStartIndex).trim();
  const stack = errorString.slice(stackStartIndex + 1);

  const parsedStack = parseErrorStack(stack);

  return {
    message,
    stack: parsedStack,
  };
}

it(`parses Metro error back into an error object`, () => {
  const fixture = {
    type: 'client_log',
    level: 'error',
    data: [
      'Warning: Text strings must be rendered within a <Text> component.\n    at RCTView (<anonymous>)\n    at View (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:62489:43)\n    at Page (<anonymous>)\n    at Suspense (<anonymous>)\n    at Route (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:122585:24)\n    at Route(index) (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:122979:24)\n    at StaticContainer (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:112928:17)\n    at EnsureSingleNavigator (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:107751:24)\n    at SceneView (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:112792:22)\n    at RNSScreenContentWrapper (<anonymous>)\n    at ScreenContentWrapper (<anonymous>)\n    at DebugContainer (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:121770:36)\n    at RNSScreen (<anonymous>)\n    at Animated(Anonymous) (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:72111:47)\n    at Suspender (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:120673:22)\n    at Suspense (<anonymous>)\n    at Freeze (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:120696:23)\n    at DelayedFreeze (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:120636:22)\n    at InnerScreen (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:120407:41)\n    at Screen (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:120597:50)\n    at ScreenStackItem (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:121619:24)\n    at SceneView (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:115968:21)\n    at RNSScreenStack (<anonymous>)\n    at anonymous (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:121545:20)\n    at ScreenStack (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:121478:30)\n    at RCTView (<anonymous>)\n    at View (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:62489:43)\n    at SafeAreaProviderCompat (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:119810:24)\n    at NativeStackView (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:116282:22)\n    at PreventRemoveProvider (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:111236:25)\n    at NavigationContent (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:112453:22)\n    at anonymous (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:112468:27)\n    at NativeStackNavigator (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:115860:18)\n    at anonymous (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:122500:38)\n    at _c2 (<anonymous>)\n    at Layout (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:135262:39)\n    at Suspense (<anonymous>)\n    at Route (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:122585:24)\n    at Route() (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:122979:24)\n    at StaticContainer (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:112928:17)\n    at EnsureSingleNavigator (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:107751:24)\n    at SceneView (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:112792:22)\n    at PreventRemoveProvider (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:111236:25)\n    at NavigationContent (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:112453:22)\n    at anonymous (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:112468:27)\n    at Content (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:132723:26)\n    at RNCSafeAreaProvider (<anonymous>)\n    at SafeAreaProvider (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:118261:24)\n    at wrapper (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:132582:27)\n    at ThemeProvider (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:108440:21)\n    at EnsureSingleNavigator (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:107751:24)\n    at BaseNavigationContainer (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:105985:28)\n    at NavigationContainerInner (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:132833:30)\n    at ContextNavigator (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:132626:24)\n    at ExpoRoot (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:132573:28)\n    at App (<anonymous>)\n    at ErrorToastContainer (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:139021:24)\n    at ErrorOverlay (<anonymous>)\n    at withDevTools(ErrorOverlay) (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:95955:27)\n    at RCTView (<anonymous>)\n    at View (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:62489:43)\n    at RCTView (<anonymous>)\n    at View (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:62489:43)\n    at AppContainer (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:62357:25)\n    at main(RootComponent) (http://localhost:8081/packages/expo-router/entry.bundle//&platform=ios&dev=true&lazy=true&minify=false&inlineSourceMap=false&modulesOnly=false&runModule=true&excludeSource=true&sourcePaths=url-server&app=dev.expo.routere2e&transform.routerRoot=__e2e__%2Fstatic-rendering%2Fapp&transform.engine=hermes&transform.bytecode=1&unstable_transformProfile=hermes-stable:85226:28)',
    ],
    mode: 'NOBRIDGE',
  };

  const parsed = parseErrorStringToObject(fixture.data[0]);
  expect(parsed).toEqual();
});
