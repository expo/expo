{"version":3,"names":["Object","defineProperty","exports","value","default","queueMicrotask","resolvedPromise","callback","arguments","length","TypeError","Promise","resolve","then","catch","error","setTimeout"],"sources":["queueMicrotask.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nlet resolvedPromise;\n\n/**\n * Polyfill for the microtask queueing API defined by WHATWG HTML spec.\n * https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-queuemicrotask\n *\n * The method must queue a microtask to invoke @param {function} callback, and\n * if the callback throws an exception, report the exception.\n */\nexport default function queueMicrotask(callback: Function) {\n  if (arguments.length < 1) {\n    throw new TypeError(\n      'queueMicrotask must be called with at least one argument (a function to call)',\n    );\n  }\n  if (typeof callback !== 'function') {\n    throw new TypeError('The argument to queueMicrotask must be a function.');\n  }\n\n  // Try to reuse a lazily allocated resolved promise from closure.\n  (resolvedPromise || (resolvedPromise = Promise.resolve()))\n    .then(callback)\n    .catch(error =>\n      // Report the exception until the next tick.\n      setTimeout(() => {\n        throw error;\n      }, 0),\n    );\n}\n"],"mappings":"AAUA,YAAY;;AAACA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,OAAA,GAAAC,cAAA;AAEb,IAAIC,eAAe;AASJ,SAASD,cAAcA,CAACE,QAAkB,EAAE;EACzD,IAAIC,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;IACxB,MAAM,IAAIC,SAAS,CACjB,+EAA+E,CAChF;EACH;EACA,IAAI,OAAOH,QAAQ,KAAK,UAAU,EAAE;IAClC,MAAM,IAAIG,SAAS,CAAC,oDAAoD,CAAC;EAC3E;EAGA,CAACJ,eAAe,KAAKA,eAAe,GAAGK,OAAO,CAACC,OAAO,EAAE,CAAC,EACtDC,IAAI,CAACN,QAAQ,CAAC,CACdO,KAAK,CAAC,UAAAC,KAAK;IAAA,OAEVC,UAAU,CAAC,YAAM;MACf,MAAMD,KAAK;IACb,CAAC,EAAE,CAAC,CAAC;EAAA,EACN;AACL"}