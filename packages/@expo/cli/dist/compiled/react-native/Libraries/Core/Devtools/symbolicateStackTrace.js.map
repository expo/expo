{"version":3,"names":["_interopRequireDefault","require","_asyncToGenerator2","getDevServer","symbolicateStackTrace","_x","_symbolicateStackTrace","apply","arguments","default","stack","_global$fetch","devServer","bundleLoadedFromServer","Error","fetch","global","response","url","method","body","JSON","stringify","json","module","exports"],"sources":["symbolicateStackTrace.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow strict\n */\n\n'use strict';\n\nimport type {StackFrame} from '../NativeExceptionsManager';\n\nconst getDevServer = require('./getDevServer');\n\nexport type CodeFrame = $ReadOnly<{\n  content: string,\n  location: ?{\n    row: number,\n    column: number,\n    ...\n  },\n  fileName: string,\n}>;\n\nexport type SymbolicatedStackTrace = $ReadOnly<{\n  stack: Array<StackFrame>,\n  codeFrame: ?CodeFrame,\n}>;\n\nasync function symbolicateStackTrace(\n  stack: Array<StackFrame>,\n): Promise<SymbolicatedStackTrace> {\n  const devServer = getDevServer();\n  if (!devServer.bundleLoadedFromServer) {\n    throw new Error('Bundle was not loaded from Metro.');\n  }\n\n  // Lazy-load `fetch` until the first symbolication call to avoid circular requires.\n  const fetch = global.fetch ?? require('../../Network/fetch');\n  const response = await fetch(devServer.url + 'symbolicate', {\n    method: 'POST',\n    body: JSON.stringify({stack}),\n  });\n  return await response.json();\n}\n\nmodule.exports = symbolicateStackTrace;\n"],"mappings":"AAUA,YAAY;;AAAC,IAAAA,sBAAA,GAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AAIb,IAAME,YAAY,GAAGF,OAAO,kBAAkB;AAAC,SAiBhCG,qBAAqBA,CAAAC,EAAA;EAAA,OAAAC,sBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,uBAAA;EAAAA,sBAAA,OAAAJ,kBAAA,CAAAO,OAAA,EAApC,WACEC,KAAwB,EACS;IAAA,IAAAC,aAAA;IACjC,IAAMC,SAAS,GAAGT,YAAY,EAAE;IAChC,IAAI,CAACS,SAAS,CAACC,sBAAsB,EAAE;MACrC,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;IACtD;IAGA,IAAMC,KAAK,IAAAJ,aAAA,GAAGK,MAAM,CAACD,KAAK,YAAAJ,aAAA,GAAIV,OAAO,uBAAuB;IAC5D,IAAMgB,QAAQ,SAASF,KAAK,CAACH,SAAS,CAACM,GAAG,GAAG,aAAa,EAAE;MAC1DC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAACZ,KAAK,EAALA;MAAK,CAAC;IAC9B,CAAC,CAAC;IACF,aAAaO,QAAQ,CAACM,IAAI,EAAE;EAC9B,CAAC;EAAA,OAAAjB,sBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAEDgB,MAAM,CAACC,OAAO,GAAGrB,qBAAqB"}