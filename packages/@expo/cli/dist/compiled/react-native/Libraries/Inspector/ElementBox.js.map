{"version":3,"names":["_interopRequireDefault","require","_classCallCheck2","_createClass2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_jsxRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","default","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","View","flattenStyle","StyleSheet","Dimensions","BorderBox","resolveBoxStyle","React","ElementBox","_React$Component","_super","key","value","render","style","props","margin","padding","frameStyle","Object","assign","frame","contentStyle","width","height","resolveRelativeSizes","top","left","bottom","right","jsx","styles","pointerEvents","children","box","content","Component","create","position","backgroundColor","borderColor","resolvedStyle","resolveSizeInPlace","direction","dimension","indexOf","parseFloat","get","module","exports"],"sources":["ElementBox.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow strict-local\n */\n\n'use strict';\n\nconst View = require('../Components/View/View');\nconst flattenStyle = require('../StyleSheet/flattenStyle');\nconst StyleSheet = require('../StyleSheet/StyleSheet');\nconst Dimensions = require('../Utilities/Dimensions').default;\nconst BorderBox = require('./BorderBox');\nconst resolveBoxStyle = require('./resolveBoxStyle');\nconst React = require('react');\n\nclass ElementBox extends React.Component<$FlowFixMeProps> {\n  render(): React.Node {\n    // $FlowFixMe[underconstrained-implicit-instantiation]\n    const style = flattenStyle(this.props.style) || {};\n    let margin = resolveBoxStyle('margin', style);\n    let padding = resolveBoxStyle('padding', style);\n\n    const frameStyle = {...this.props.frame};\n    const contentStyle: {width: number, height: number} = {\n      width: this.props.frame.width,\n      height: this.props.frame.height,\n    };\n\n    if (margin != null) {\n      margin = resolveRelativeSizes(margin);\n\n      frameStyle.top -= margin.top;\n      frameStyle.left -= margin.left;\n      frameStyle.height += margin.top + margin.bottom;\n      frameStyle.width += margin.left + margin.right;\n\n      if (margin.top < 0) {\n        contentStyle.height += margin.top;\n      }\n      if (margin.bottom < 0) {\n        contentStyle.height += margin.bottom;\n      }\n      if (margin.left < 0) {\n        contentStyle.width += margin.left;\n      }\n      if (margin.right < 0) {\n        contentStyle.width += margin.right;\n      }\n    }\n\n    if (padding != null) {\n      padding = resolveRelativeSizes(padding);\n\n      contentStyle.width -= padding.left + padding.right;\n      contentStyle.height -= padding.top + padding.bottom;\n    }\n\n    return (\n      <View style={[styles.frame, frameStyle]} pointerEvents=\"none\">\n        <BorderBox box={margin} style={styles.margin}>\n          <BorderBox box={padding} style={styles.padding}>\n            <View style={[styles.content, contentStyle]} />\n          </BorderBox>\n        </BorderBox>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  frame: {\n    position: 'absolute',\n  },\n  content: {\n    backgroundColor: 'rgba(200, 230, 255, 0.8)', // blue\n  },\n  padding: {\n    borderColor: 'rgba(77, 255, 0, 0.3)', // green\n  },\n  margin: {\n    borderColor: 'rgba(255, 132, 0, 0.3)', // orange\n  },\n});\n\ntype Style = {\n  top: number,\n  right: number,\n  bottom: number,\n  left: number,\n  ...\n};\n\n/**\n * Resolves relative sizes (percentages and auto) in a style object.\n *\n * @param style the style to resolve\n * @return a modified copy\n */\nfunction resolveRelativeSizes(style: $ReadOnly<Style>): Style {\n  let resolvedStyle = {...style};\n  resolveSizeInPlace(resolvedStyle, 'top', 'height');\n  resolveSizeInPlace(resolvedStyle, 'right', 'width');\n  resolveSizeInPlace(resolvedStyle, 'bottom', 'height');\n  resolveSizeInPlace(resolvedStyle, 'left', 'width');\n  return resolvedStyle;\n}\n\n/**\n * Resolves the given size of a style object in place.\n *\n * @param style the style object to modify\n * @param direction the direction to resolve (e.g. 'top')\n * @param dimension the window dimension that this direction belongs to (e.g. 'height')\n */\nfunction resolveSizeInPlace(\n  style: Style,\n  direction: string,\n  dimension: string,\n) {\n  if (style[direction] !== null && typeof style[direction] === 'string') {\n    if (style[direction].indexOf('%') !== -1) {\n      // $FlowFixMe[prop-missing]\n      style[direction] =\n        (parseFloat(style[direction]) / 100.0) *\n        Dimensions.get('window')[dimension];\n    }\n    if (style[direction] === 'auto') {\n      // Ignore auto sizing in frame drawing due to complexity of correctly rendering this\n      // $FlowFixMe[prop-missing]\n      style[direction] = 0;\n    }\n  }\n}\n\nmodule.exports = ElementBox;\n"],"mappings":"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"}