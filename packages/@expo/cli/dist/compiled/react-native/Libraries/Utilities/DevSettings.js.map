{"version":3,"names":["_NativeEventEmitter","_interopRequireDefault","require","_NativeDevSettings","_Platform","DevSettings","addMenuItem","title","handler","reload","reason","onFastRefresh","__DEV__","emitter","NativeEventEmitter","Platform","OS","NativeDevSettings","subscriptions","Map","subscription","get","remove","addListener","event","set","reloadWithReason","module","exports"],"sources":["DevSettings.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport type {EventSubscription} from '../vendor/emitter/EventEmitter';\n\nimport NativeEventEmitter from '../EventEmitter/NativeEventEmitter';\nimport NativeDevSettings from '../NativeModules/specs/NativeDevSettings';\nimport Platform from '../Utilities/Platform';\n\nlet DevSettings: {\n  addMenuItem(title: string, handler: () => mixed): void,\n  reload(reason?: string): void,\n  onFastRefresh(): void,\n} = {\n  addMenuItem(title: string, handler: () => mixed): void {},\n  reload(reason?: string): void {},\n  onFastRefresh(): void {},\n};\n\ntype DevSettingsEventDefinitions = {\n  didPressMenuItem: [{title: string}],\n};\n\nif (__DEV__) {\n  const emitter = new NativeEventEmitter<DevSettingsEventDefinitions>(\n    // T88715063: NativeEventEmitter only used this parameter on iOS. Now it uses it on all platforms, so this code was modified automatically to preserve its behavior\n    // If you want to use the native module on other platforms, please remove this condition and test its behavior\n    Platform.OS !== 'ios' ? null : NativeDevSettings,\n  );\n  const subscriptions = new Map<string, EventSubscription>();\n\n  DevSettings = {\n    addMenuItem(title: string, handler: () => mixed): void {\n      // Make sure items are not added multiple times. This can\n      // happen when hot reloading the module that registers the\n      // menu items. The title is used as the id which means we\n      // don't support multiple items with the same name.\n      let subscription = subscriptions.get(title);\n      if (subscription != null) {\n        subscription.remove();\n      } else {\n        NativeDevSettings.addMenuItem(title);\n      }\n\n      subscription = emitter.addListener('didPressMenuItem', event => {\n        if (event.title === title) {\n          handler();\n        }\n      });\n      subscriptions.set(title, subscription);\n    },\n    reload(reason?: string): void {\n      if (NativeDevSettings.reloadWithReason != null) {\n        NativeDevSettings.reloadWithReason(reason ?? 'Uncategorized from JS');\n      } else {\n        NativeDevSettings.reload();\n      }\n    },\n    onFastRefresh(): void {\n      NativeDevSettings.onFastRefresh?.();\n    },\n  };\n}\n\nmodule.exports = DevSettings;\n"],"mappings":";AAYA,IAAAA,mBAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AAEA,IAAIG,WAIH,GAAG;EACFC,WAAW,WAAAA,YAACC,KAAa,EAAEC,OAAoB,EAAQ,CAAC,CAAC;EACzDC,MAAM,WAAAA,OAACC,MAAe,EAAQ,CAAC,CAAC;EAChCC,aAAa,WAAAA,cAAA,EAAS,CAAC;AACzB,CAAC;AAMD,IAAIC,OAAO,EAAE;EACX,IAAMC,OAAO,GAAG,IAAIC,2BAAkB,CAGpCC,iBAAQ,CAACC,EAAE,KAAK,KAAK,GAAG,IAAI,GAAGC,0BAAiB,CACjD;EACD,IAAMC,aAAa,GAAG,IAAIC,GAAG,EAA6B;EAE1Dd,WAAW,GAAG;IACZC,WAAW,WAAAA,YAACC,KAAa,EAAEC,OAAoB,EAAQ;MAKrD,IAAIY,YAAY,GAAGF,aAAa,CAACG,GAAG,CAACd,KAAK,CAAC;MAC3C,IAAIa,YAAY,IAAI,IAAI,EAAE;QACxBA,YAAY,CAACE,MAAM,EAAE;MACvB,CAAC,MAAM;QACLL,0BAAiB,CAACX,WAAW,CAACC,KAAK,CAAC;MACtC;MAEAa,YAAY,GAAGP,OAAO,CAACU,WAAW,CAAC,kBAAkB,EAAE,UAAAC,KAAK,EAAI;QAC9D,IAAIA,KAAK,CAACjB,KAAK,KAAKA,KAAK,EAAE;UACzBC,OAAO,EAAE;QACX;MACF,CAAC,CAAC;MACFU,aAAa,CAACO,GAAG,CAAClB,KAAK,EAAEa,YAAY,CAAC;IACxC,CAAC;IACDX,MAAM,WAAAA,OAACC,MAAe,EAAQ;MAC5B,IAAIO,0BAAiB,CAACS,gBAAgB,IAAI,IAAI,EAAE;QAC9CT,0BAAiB,CAACS,gBAAgB,CAAChB,MAAM,WAANA,MAAM,GAAI,uBAAuB,CAAC;MACvE,CAAC,MAAM;QACLO,0BAAiB,CAACR,MAAM,EAAE;MAC5B;IACF,CAAC;IACDE,aAAa,WAAAA,cAAA,EAAS;MACpBM,0BAAiB,CAACN,aAAa,oBAA/BM,0BAAiB,CAACN,aAAa,EAAI;IACrC;EACF,CAAC;AACH;AAEAgB,MAAM,CAACC,OAAO,GAAGvB,WAAW"}