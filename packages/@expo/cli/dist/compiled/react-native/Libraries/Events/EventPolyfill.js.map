{"version":3,"names":["EventPolyfill","type","eventInitDict","_classCallCheck2","default","bubbles","cancelable","composed","scoped","isTrusted","timeStamp","Date","now","defaultPrevented","NONE","AT_TARGET","BUBBLING_PHASE","CAPTURING_PHASE","eventPhase","currentTarget","target","srcElement","_createClass2","key","value","composedPath","Error","preventDefault","_syntheticEvent","initEvent","stopImmediatePropagation","stopPropagation","setSyntheticEvent","global","Event","_default","exports"],"sources":["EventPolyfill.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow strict-local\n */\n\n// https://dom.spec.whatwg.org/#dictdef-eventinit\ntype Event$Init = {\n  bubbles?: boolean,\n  cancelable?: boolean,\n  composed?: boolean,\n  /** Non-standard. See `composed` instead. */\n  scoped?: boolean,\n  ...\n};\n\n/**\n * This is a copy of the Event interface defined in Flow:\n * https://github.com/facebook/flow/blob/741104e69c43057ebd32804dd6bcc1b5e97548ea/lib/dom.js\n * which is itself a faithful interface of the W3 spec:\n * https://dom.spec.whatwg.org/#interface-event\n *\n * Since Flow assumes that Event is provided and is on the global object,\n * we must provide an implementation of Event for CustomEvent (and future\n * alignment of React Native's event system with the W3 spec).\n */\ninterface IEvent {\n  constructor(type: string, eventInitDict?: Event$Init): void;\n  /**\n   * Returns the type of event, e.g. \"click\", \"hashchange\", or \"submit\".\n   */\n  +type: string;\n  /**\n   * Returns the object to which event is dispatched (its target).\n   */\n  +target: EventTarget; // TODO: nullable\n  /** @deprecated */\n  +srcElement: Element; // TODO: nullable\n  /**\n   * Returns the object whose event listener's callback is currently being invoked.\n   */\n  +currentTarget: EventTarget; // TODO: nullable\n  /**\n   * Returns the invocation target objects of event's path (objects on which\n   * listeners will be invoked), except for any nodes in shadow trees of which\n   * the shadow root's mode is \"closed\" that are not reachable from event's\n   * currentTarget.\n   */\n  composedPath(): Array<EventTarget>;\n\n  +NONE: number;\n  +AT_TARGET: number;\n  +BUBBLING_PHASE: number;\n  +CAPTURING_PHASE: number;\n  /**\n   * Returns the event's phase, which is one of NONE, CAPTURING_PHASE, AT_TARGET,\n   * and BUBBLING_PHASE.\n   */\n  +eventPhase: number;\n\n  /**\n   * When dispatched in a tree, invoking this method prevents event from reaching\n   * any objects other than the current object.\n   */\n  stopPropagation(): void;\n  /**\n   * Invoking this method prevents event from reaching any registered event\n   * listeners after the current one finishes running and, when dispatched in a\n   * tree, also prevents event from reaching any other objects.\n   */\n  stopImmediatePropagation(): void;\n\n  /**\n   * Returns true or false depending on how event was initialized. True if\n   * event goes through its target's ancestors in reverse tree order, and\n   * false otherwise.\n   */\n  +bubbles: boolean;\n  /**\n   * Returns true or false depending on how event was initialized. Its\n   * return value does not always carry meaning, but true can indicate\n   * that part of the operation during which event was dispatched, can\n   * be canceled by invoking the preventDefault() method.\n   */\n  +cancelable: boolean;\n  // returnValue: boolean; // legacy, and some subclasses still define it as a string!\n  /**\n   * If invoked when the cancelable attribute value is true, and while\n   * executing a listener for the event with passive set to false, signals to\n   * the operation that caused event to be dispatched that it needs to be\n   * canceled.\n   */\n  preventDefault(): void;\n  /**\n   * Returns true if preventDefault() was invoked successfully to indicate\n   * cancelation, and false otherwise.\n   */\n  +defaultPrevented: boolean;\n  /**\n   * Returns true or false depending on how event was initialized. True if\n   * event invokes listeners past a ShadowRoot node that is the root of its\n   * target, and false otherwise.\n   */\n  +composed: boolean;\n\n  /**\n   * Returns true if event was dispatched by the user agent, and false otherwise.\n   */\n  +isTrusted: boolean;\n  /**\n   * Returns the event's timestamp as the number of milliseconds measured relative\n   * to the time origin.\n   */\n  +timeStamp: number;\n\n  /** Non-standard. See Event.prototype.composedPath */\n  +deepPath?: () => EventTarget[];\n  /** Non-standard. See Event.prototype.composed */\n  +scoped: boolean;\n\n  /**\n   * @deprecated\n   */\n  initEvent(type: string, bubbles: boolean, cancelable: boolean): void;\n}\n\nclass EventPolyfill implements IEvent {\n  type: string;\n  bubbles: boolean;\n  cancelable: boolean;\n  composed: boolean;\n  // Non-standard. See `composed` instead.\n  scoped: boolean;\n  isTrusted: boolean;\n  defaultPrevented: boolean;\n  timeStamp: number;\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\n  NONE: number;\n  AT_TARGET: number;\n  BUBBLING_PHASE: number;\n  CAPTURING_PHASE: number;\n\n  eventPhase: number;\n\n  currentTarget: EventTarget; // TODO: nullable\n  target: EventTarget; // TODO: nullable\n  /** @deprecated */\n  srcElement: Element; // TODO: nullable\n\n  // React Native-specific: proxy data to a SyntheticEvent when\n  // certain methods are called.\n  // SyntheticEvent will also have a reference to this instance -\n  // it is circular - and both classes use this reference to keep\n  // data with the other in sync.\n  _syntheticEvent: mixed;\n\n  constructor(type: string, eventInitDict?: Event$Init) {\n    this.type = type;\n    this.bubbles = !!(eventInitDict?.bubbles || false);\n    this.cancelable = !!(eventInitDict?.cancelable || false);\n    this.composed = !!(eventInitDict?.composed || false);\n    this.scoped = !!(eventInitDict?.scoped || false);\n\n    // TODO: somehow guarantee that only \"private\" instantiations of Event\n    // can set this to true\n    this.isTrusted = false;\n\n    // TODO: in the future we'll want to make sure this has the same\n    // time-basis as events originating from native\n    this.timeStamp = Date.now();\n\n    this.defaultPrevented = false;\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\n    this.NONE = 0;\n    this.AT_TARGET = 1;\n    this.BUBBLING_PHASE = 2;\n    this.CAPTURING_PHASE = 3;\n    this.eventPhase = this.NONE;\n\n    // $FlowFixMe\n    this.currentTarget = null;\n    // $FlowFixMe\n    this.target = null;\n    // $FlowFixMe\n    this.srcElement = null;\n  }\n\n  composedPath(): Array<EventTarget> {\n    throw new Error('TODO: not yet implemented');\n  }\n\n  preventDefault(): void {\n    this.defaultPrevented = true;\n\n    if (this._syntheticEvent != null) {\n      // $FlowFixMe\n      this._syntheticEvent.preventDefault();\n    }\n  }\n\n  initEvent(type: string, bubbles: boolean, cancelable: boolean): void {\n    throw new Error(\n      'TODO: not yet implemented. This method is also deprecated.',\n    );\n  }\n\n  stopImmediatePropagation(): void {\n    throw new Error('TODO: not yet implemented');\n  }\n\n  stopPropagation(): void {\n    if (this._syntheticEvent != null) {\n      // $FlowFixMe\n      this._syntheticEvent.stopPropagation();\n    }\n  }\n\n  setSyntheticEvent(value: mixed): void {\n    this._syntheticEvent = value;\n  }\n}\n\n// Assertion magic for polyfill follows.\ndeclare var checkEvent: Event; // eslint-disable-line no-unused-vars\n\n/*::\n// This can be a strict mode error at runtime so put it in a Flow comment.\n(checkEvent: IEvent);\n*/\n\nglobal.Event = EventPolyfill;\n\nexport default EventPolyfill;\n"],"mappings":";;;;;;;IAkIMA,aAAa;EA+BjB,SAAAA,cAAYC,IAAY,EAAEC,aAA0B,EAAE;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAJ,aAAA;IACpD,IAAI,CAACC,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACI,OAAO,GAAG,CAAC,EAAEH,aAAa,YAAbA,aAAa,CAAEG,OAAO,IAAI,KAAK,CAAC;IAClD,IAAI,CAACC,UAAU,GAAG,CAAC,EAAEJ,aAAa,YAAbA,aAAa,CAAEI,UAAU,IAAI,KAAK,CAAC;IACxD,IAAI,CAACC,QAAQ,GAAG,CAAC,EAAEL,aAAa,YAAbA,aAAa,CAAEK,QAAQ,IAAI,KAAK,CAAC;IACpD,IAAI,CAACC,MAAM,GAAG,CAAC,EAAEN,aAAa,YAAbA,aAAa,CAAEM,MAAM,IAAI,KAAK,CAAC;IAIhD,IAAI,CAACC,SAAS,GAAG,KAAK;IAItB,IAAI,CAACC,SAAS,GAAGC,IAAI,CAACC,GAAG,EAAE;IAE3B,IAAI,CAACC,gBAAgB,GAAG,KAAK;IAG7B,IAAI,CAACC,IAAI,GAAG,CAAC;IACb,IAAI,CAACC,SAAS,GAAG,CAAC;IAClB,IAAI,CAACC,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,UAAU,GAAG,IAAI,CAACJ,IAAI;IAG3B,IAAI,CAACK,aAAa,GAAG,IAAI;IAEzB,IAAI,CAACC,MAAM,GAAG,IAAI;IAElB,IAAI,CAACC,UAAU,GAAG,IAAI;EACxB;EAAC,IAAAC,aAAA,CAAAlB,OAAA,EAAAJ,aAAA;IAAAuB,GAAA;IAAAC,KAAA,EAED,SAAAC,aAAA,EAAmC;MACjC,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;IAC9C;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAG,eAAA,EAAuB;MACrB,IAAI,CAACd,gBAAgB,GAAG,IAAI;MAE5B,IAAI,IAAI,CAACe,eAAe,IAAI,IAAI,EAAE;QAEhC,IAAI,CAACA,eAAe,CAACD,cAAc,EAAE;MACvC;IACF;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAK,UAAU5B,IAAY,EAAEI,OAAgB,EAAEC,UAAmB,EAAQ;MACnE,MAAM,IAAIoB,KAAK,CACb,4DAA4D,CAC7D;IACH;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAM,yBAAA,EAAiC;MAC/B,MAAM,IAAIJ,KAAK,CAAC,2BAA2B,CAAC;IAC9C;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAO,gBAAA,EAAwB;MACtB,IAAI,IAAI,CAACH,eAAe,IAAI,IAAI,EAAE;QAEhC,IAAI,CAACA,eAAe,CAACG,eAAe,EAAE;MACxC;IACF;EAAC;IAAAR,GAAA;IAAAC,KAAA,EAED,SAAAQ,kBAAkBR,KAAY,EAAQ;MACpC,IAAI,CAACI,eAAe,GAAGJ,KAAK;IAC9B;EAAC;EAAA,OAAAxB,aAAA;AAAA;AAWHiC,MAAM,CAACC,KAAK,GAAGlC,aAAa;AAAC,IAAAmC,QAAA,GAEdnC,aAAa;AAAAoC,OAAA,CAAAhC,OAAA,GAAA+B,QAAA"}