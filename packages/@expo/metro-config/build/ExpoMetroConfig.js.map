{"version":3,"file":"ExpoMetroConfig.js","names":["EXPO_DEBUG","boolish","EXPO_USE_EXOTIC","INTERNAL_CALLSITES_REGEX","RegExp","join","isUrl","value","URL","getProjectBabelConfigFile","projectRoot","resolveFrom","silent","getAssetPlugins","assetPlugins","hashAssetFilesPath","push","hasWarnedAboutExotic","getDefaultConfig","options","isExotic","mode","console","log","chalk","gray","bold","MetroConfig","importMetroConfigFromProject","reactNativePath","path","dirname","babelPresetFbjsPath","process","env","EXPO_METRO_CACHE_KEY_VERSION","String","require","version","sourceExtsConfig","isTS","isReact","isModern","sourceExts","getBareExtensions","babelConfigPath","isCustomBabelConfigDefined","resolverMainFields","watchFolders","getWatchFolders","nodeModulesPaths","getModulesPaths","reporter","metroDefaultValues","getDefaultValues","mergeConfig","resolver","platforms","assetExts","concat","filter","assetExt","includes","serializer","getModulesRunBeforeMainModule","resolve","getPolyfills","server","port","Number","RCT_METRO_PORT","symbolicator","customizeFrame","frame","file","lineNumber","column","collapse","Boolean","test","methodName","match","transformer","unstable_allowRequireContext","allowOptionalDependencies","babelTransformerPath","assetRegistryPath","loadAsync","metroOptions","defaultConfig","loadConfig","cwd"],"sources":["../src/ExpoMetroConfig.ts"],"sourcesContent":["// Copyright 2021-present 650 Industries (Expo). All rights reserved.\n\nimport { getBareExtensions } from '@expo/config/paths';\nimport chalk from 'chalk';\nimport { boolish } from 'getenv';\nimport { Reporter } from 'metro';\nimport type MetroConfig from 'metro-config';\nimport path from 'path';\nimport resolveFrom from 'resolve-from';\nimport { URL } from 'url';\n\nimport { getModulesPaths } from './getModulesPaths';\nimport { getWatchFolders } from './getWatchFolders';\nimport { importMetroConfigFromProject } from './importMetroFromProject';\n\nexport const EXPO_DEBUG = boolish('EXPO_DEBUG', false);\nconst EXPO_USE_EXOTIC = boolish('EXPO_USE_EXOTIC', false);\n\n// Import only the types here, the values will be imported from the project, at runtime.\nexport const INTERNAL_CALLSITES_REGEX = new RegExp(\n  [\n    '/Libraries/Renderer/implementations/.+\\\\.js$',\n    '/Libraries/BatchedBridge/MessageQueue\\\\.js$',\n    '/Libraries/YellowBox/.+\\\\.js$',\n    '/Libraries/LogBox/.+\\\\.js$',\n    '/Libraries/Core/Timers/.+\\\\.js$',\n    'node_modules/react-devtools-core/.+\\\\.js$',\n    'node_modules/react-refresh/.+\\\\.js$',\n    'node_modules/scheduler/.+\\\\.js$',\n    // Metro replaces `require()` with a different method,\n    // we want to omit this method from the stack trace.\n    // This is akin to most React tooling.\n    '/metro/.*/polyfills/require.js$',\n    // Hide frames related to a fast refresh.\n    '/metro/.*/lib/bundle-modules/.+\\\\.js$',\n    'node_modules/react-native/Libraries/Utilities/HMRClient.js$',\n    'node_modules/eventemitter3/index.js',\n    'node_modules/event-target-shim/dist/.+\\\\.js$',\n    // Ignore the log forwarder used in the expo package.\n    '/expo/build/logs/RemoteConsole.js$',\n    // Improve errors thrown by invariant (ex: `Invariant Violation: \"main\" has not been registered`).\n    'node_modules/invariant/.+\\\\.js$',\n    // Remove babel runtime additions\n    'node_modules/regenerator-runtime/.+\\\\.js$',\n    // Remove react native setImmediate ponyfill\n    'node_modules/promise/setimmediate/.+\\\\.js$',\n    // Babel helpers that implement language features\n    'node_modules/@babel/runtime/.+\\\\.js$',\n    // Hide Hermes internal bytecode\n    '/InternalBytecode/InternalBytecode\\\\.js$',\n    // Block native code invocations\n    `\\\\[native code\\\\]`,\n    // Hide react-dom (web)\n    'node_modules/react-dom/.+\\\\.js$',\n  ].join('|')\n);\n\nfunction isUrl(value: string): boolean {\n  try {\n    // eslint-disable-next-line no-new\n    new URL(value);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport interface DefaultConfigOptions {\n  mode?: 'exotic';\n}\n\nfunction getProjectBabelConfigFile(projectRoot: string): string | undefined {\n  return (\n    resolveFrom.silent(projectRoot, './babel.config.js') ||\n    resolveFrom.silent(projectRoot, './.babelrc') ||\n    resolveFrom.silent(projectRoot, './.babelrc.js')\n  );\n}\n\nfunction getAssetPlugins(projectRoot: string): string[] {\n  const assetPlugins: string[] = [];\n\n  let hashAssetFilesPath;\n  try {\n    hashAssetFilesPath = resolveFrom(projectRoot, 'expo-asset/tools/hashAssetFiles');\n  } catch {\n    // TODO: we should warn/throw an error if the user has expo-updates installed but does not\n    // have hashAssetFiles available, or if the user is in managed workflow and does not have\n    // hashAssetFiles available. but in a bare app w/o expo-updates, just using dev-client,\n    // it is not needed\n  }\n\n  if (hashAssetFilesPath) {\n    assetPlugins.push(hashAssetFilesPath);\n  }\n\n  return assetPlugins;\n}\n\nlet hasWarnedAboutExotic = false;\n\nexport function getDefaultConfig(\n  projectRoot: string,\n  options: DefaultConfigOptions = {}\n): MetroConfig.InputConfigT {\n  const isExotic = options.mode === 'exotic' || EXPO_USE_EXOTIC;\n\n  if (isExotic && !hasWarnedAboutExotic) {\n    hasWarnedAboutExotic = true;\n    console.log(\n      chalk.gray(\n        `\\u203A Unstable feature ${chalk.bold`EXPO_USE_EXOTIC`} is enabled. Bundling may not work as expected, and is subject to breaking changes.`\n      )\n    );\n  }\n  const MetroConfig = importMetroConfigFromProject(projectRoot);\n\n  const reactNativePath = path.dirname(resolveFrom(projectRoot, 'react-native/package.json'));\n\n  try {\n    // Set the `EXPO_METRO_CACHE_KEY_VERSION` variable for use in the custom babel transformer.\n    // This hack is used because there doesn't appear to be anyway to resolve\n    // `babel-preset-fbjs` relative to the project root later (in `metro-expo-babel-transformer`).\n    const babelPresetFbjsPath = resolveFrom(projectRoot, 'babel-preset-fbjs/package.json');\n    process.env.EXPO_METRO_CACHE_KEY_VERSION = String(require(babelPresetFbjsPath).version);\n  } catch {\n    // noop -- falls back to a hardcoded value.\n  }\n\n  const sourceExtsConfig = { isTS: true, isReact: true, isModern: false };\n  const sourceExts = getBareExtensions([], sourceExtsConfig);\n\n  if (isExotic) {\n    // Add support for cjs (without platform extensions).\n    sourceExts.push('cjs');\n  }\n\n  const babelConfigPath = getProjectBabelConfigFile(projectRoot);\n  const isCustomBabelConfigDefined = !!babelConfigPath;\n\n  const resolverMainFields: string[] = [];\n\n  // Disable `react-native` in exotic mode, since library authors\n  // use it to ship raw application code to the project.\n  if (!isExotic) {\n    resolverMainFields.push('react-native');\n  }\n  resolverMainFields.push('browser', 'main');\n\n  const watchFolders = getWatchFolders(projectRoot);\n  // TODO: nodeModulesPaths does not work with the new Node.js package.json exports API, this causes packages like uuid to fail. Disabling for now.\n  const nodeModulesPaths = getModulesPaths(projectRoot);\n  if (EXPO_DEBUG) {\n    console.log();\n    console.log(`Expo Metro config:`);\n    try {\n      console.log(`- Version: ${require('../package.json').version}`);\n    } catch {}\n    console.log(`- Extensions: ${sourceExts.join(', ')}`);\n    console.log(`- React Native: ${reactNativePath}`);\n    console.log(`- Babel config: ${babelConfigPath || 'babel-preset-expo (default)'}`);\n    console.log(`- Resolver Fields: ${resolverMainFields.join(', ')}`);\n    console.log(`- Watch Folders: ${watchFolders.join(', ')}`);\n    console.log(`- Node Module Paths: ${nodeModulesPaths.join(', ')}`);\n    console.log(`- Exotic: ${isExotic}`);\n    console.log();\n  }\n  const {\n    // Remove the default reporter which metro always resolves to be the react-native-community/cli reporter.\n    // This prints a giant React logo which is less accessible to users on smaller terminals.\n    reporter,\n    ...metroDefaultValues\n  } = MetroConfig.getDefaultConfig.getDefaultValues(projectRoot);\n\n  // Merge in the default config from Metro here, even though loadConfig uses it as defaults.\n  // This is a convenience for getDefaultConfig use in metro.config.js, e.g. to modify assetExts.\n  return MetroConfig.mergeConfig(metroDefaultValues, {\n    watchFolders,\n    resolver: {\n      resolverMainFields,\n      platforms: ['ios', 'android', 'native', 'testing'],\n      assetExts: metroDefaultValues.resolver.assetExts\n        .concat(\n          // Add default support for `expo-image` file types.\n          ['heic', 'avif']\n        )\n        .filter((assetExt) => !sourceExts.includes(assetExt)),\n      sourceExts,\n      nodeModulesPaths,\n    },\n    serializer: {\n      getModulesRunBeforeMainModule: () => [\n        require.resolve(path.join(reactNativePath, 'Libraries/Core/InitializeCore')),\n        // TODO: Bacon: load Expo side-effects\n      ],\n      getPolyfills: () => require(path.join(reactNativePath, 'rn-get-polyfills'))(),\n    },\n    server: {\n      port: Number(process.env.RCT_METRO_PORT) || 8081,\n    },\n    symbolicator: {\n      customizeFrame: (frame) => {\n        if (frame.file && isUrl(frame.file)) {\n          return {\n            ...frame,\n            // HACK: This prevents Metro from attempting to read the invalid file URL it sent us.\n            lineNumber: null,\n            column: null,\n            // This prevents the invalid frame from being shown by default.\n            collapse: true,\n          };\n        }\n        let collapse = Boolean(frame.file && INTERNAL_CALLSITES_REGEX.test(frame.file));\n\n        if (!collapse) {\n          // This represents the first frame of the stacktrace.\n          // Often this looks like: `__r(0);`.\n          // The URL will also be unactionable in the app and therefore not very useful to the developer.\n          if (\n            frame.column === 3 &&\n            frame.methodName === 'global code' &&\n            frame.file?.match(/^https?:\\/\\//g)\n          ) {\n            collapse = true;\n          }\n        }\n\n        return { ...(frame || {}), collapse };\n      },\n    },\n    transformer: {\n      // `require.context` support\n      unstable_allowRequireContext: true,\n      allowOptionalDependencies: true,\n      babelTransformerPath: isExotic\n        ? require.resolve('./transformer/metro-expo-exotic-babel-transformer')\n        : isCustomBabelConfigDefined\n        ? // If the user defined a babel config file in their project,\n          // then use the default transformer.\n          // Try to use the project copy before falling back on the global version\n          resolveFrom.silent(projectRoot, 'metro-react-native-babel-transformer')\n        : // Otherwise, use a custom transformer that uses `babel-preset-expo` by default for projects.\n          require.resolve('./transformer/metro-expo-babel-transformer'),\n      assetRegistryPath: 'react-native/Libraries/Image/AssetRegistry',\n      assetPlugins: getAssetPlugins(projectRoot),\n    },\n  });\n}\n\nexport interface LoadOptions {\n  config?: string;\n  maxWorkers?: number;\n  port?: number;\n  reporter?: Reporter;\n  resetCache?: boolean;\n}\n\nexport async function loadAsync(\n  projectRoot: string,\n  { reporter, ...metroOptions }: LoadOptions = {}\n): Promise<MetroConfig.ConfigT> {\n  let defaultConfig = getDefaultConfig(projectRoot);\n  if (reporter) {\n    defaultConfig = { ...defaultConfig, reporter };\n  }\n  const MetroConfig = importMetroConfigFromProject(projectRoot);\n  return await MetroConfig.loadConfig(\n    { cwd: projectRoot, projectRoot, ...metroOptions },\n    defaultConfig\n  );\n}\n"],"mappings":"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"}