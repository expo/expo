{"version":3,"file":"generateFunctionMap.js","sourceRoot":"","sources":["../../src/transformer/generateFunctionMap.ts"],"names":[],"mappings":";;;AAEA,sEAA4E;AAE5E,SAAgB,mBAAmB,CACjC,WAAmB,EACnB,GAAkD,EAClD,OAAsD;IAEtD,qGAAqG;IACrG,sGAAsG;IACtG,2GAA2G;IAC3G,yGAAyG;IACzG,EAAE;IACF,sEAAsE;IACtE,0DAA0D;IAC1D,EAAE;IACF,UAAU;IACV,2BAA2B;IAC3B,gDAAgD;IAChD,+CAA+C;IAC/C,EAAE;IACF,SAAS;IACT,wBAAwB;IACxB,gDAAgD;IAChD,8BAA8B;IAC9B,EAAE;IACF,IAAI,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE;QACnC,OAAO,IAAA,wDAA+B,EAAC,WAAW,CAAC,CAAC,mBAAmB,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;KACvF;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AA3BD,kDA2BC","sourcesContent":["import type { generateFunctionMap as generateFunctionMapType } from 'metro-source-map';\n\nimport { importMetroSourceMapFromProject } from '../importMetroFromProject';\n\nexport function generateFunctionMap(\n  projectRoot: string,\n  ast: Parameters<typeof generateFunctionMapType>[0],\n  context: Parameters<typeof generateFunctionMapType>[1]\n): ReturnType<typeof generateFunctionMapType> | null {\n  //  `x_facebook_sources` is a source map feature that we disable by default since it isn't documented\n  // and doesn't appear to add much value to the DX, it also increases bundle time, and source map size.\n  // The feature supposedly provides improved function names for anonymous functions, but we will opt towards\n  // linting to prevent users from adding anonymous functions for important features like React components.\n  //\n  // Here is an example stack trace for a component that throws an error\n  // in the root component (which is an anonymous function):\n  //\n  // Before:\n  // - <anonymous> App.js:5:9\n  // - renderApplication renderApplication.js:54:5\n  // - runnables.appKey.run AppRegistry.js:117:26\n  //\n  // After:\n  // - _default App.js:5:9\n  // - renderApplication renderApplication.js:54:5\n  // - run AppRegistry.js:117:26\n  //\n  if (process.env.EXPO_USE_FB_SOURCES) {\n    return importMetroSourceMapFromProject(projectRoot).generateFunctionMap(ast, context);\n  }\n  return null;\n}\n"]}