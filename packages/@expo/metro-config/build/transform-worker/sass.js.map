{"version":3,"file":"sass.js","names":["_resolveFrom","data","_interopRequireDefault","require","obj","__esModule","default","sassInstance","getSassInstance","projectRoot","sassPath","resolveFrom","silent","Error","matchSass","filename","endsWith","compileSass","src","options","sass","result","compileString","css","map","sourceMap"],"sources":["../../src/transform-worker/sass.ts"],"sourcesContent":["import resolveFrom from 'resolve-from';\n\nlet sassInstance: typeof import('sass') | null = null;\n\nfunction getSassInstance(projectRoot: string) {\n  if (!sassInstance) {\n    const sassPath = resolveFrom.silent(projectRoot, 'sass');\n\n    if (!sassPath) {\n      throw new Error(\n        `Cannot parse Sass files without the module 'sass' installed. Run 'yarn add sass' and try again.`\n      );\n    }\n\n    sassInstance = require(sassPath) as typeof import('sass');\n  }\n\n  return sassInstance;\n}\n\nexport function matchSass(filename: string): import('sass').Syntax | null {\n  if (filename.endsWith('.sass')) {\n    return 'indented';\n  } else if (filename.endsWith('.scss')) {\n    return 'scss';\n  }\n  return null;\n}\n\nexport function compileSass(\n  projectRoot: string,\n  { filename, src }: { filename: string; src: string },\n  // TODO: Expose to users somehow...\n  options?: Partial<import('sass').StringOptions<'sync'>>\n) {\n  const sass = getSassInstance(projectRoot);\n  const result = sass.compileString(src, options);\n  return {\n    src: result.css,\n    // TODO: Should we use this? Leaning towards no since the CSS will be parsed again by the CSS loader.\n    map: result.sourceMap,\n  };\n}\n"],"mappings":";;;;;;;AAAA,SAAAA,aAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,YAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAAuC,SAAAC,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEvC,IAAIG,YAA0C,GAAG,IAAI;AAErD,SAASC,eAAeA,CAACC,WAAmB,EAAE;EAC5C,IAAI,CAACF,YAAY,EAAE;IACjB,MAAMG,QAAQ,GAAGC,sBAAW,CAACC,MAAM,CAACH,WAAW,EAAE,MAAM,CAAC;IAExD,IAAI,CAACC,QAAQ,EAAE;MACb,MAAM,IAAIG,KAAK,CACZ,iGAAgG,CAClG;IACH;IAEAN,YAAY,GAAGJ,OAAO,CAACO,QAAQ,CAA0B;EAC3D;EAEA,OAAOH,YAAY;AACrB;AAEO,SAASO,SAASA,CAACC,QAAgB,EAAgC;EACxE,IAAIA,QAAQ,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;IAC9B,OAAO,UAAU;EACnB,CAAC,MAAM,IAAID,QAAQ,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;IACrC,OAAO,MAAM;EACf;EACA,OAAO,IAAI;AACb;AAEO,SAASC,WAAWA,CACzBR,WAAmB,EACnB;EAAEM,QAAQ;EAAEG;AAAuC,CAAC;AACpD;AACAC,OAAuD,EACvD;EACA,MAAMC,IAAI,GAAGZ,eAAe,CAACC,WAAW,CAAC;EACzC,MAAMY,MAAM,GAAGD,IAAI,CAACE,aAAa,CAACJ,GAAG,EAAEC,OAAO,CAAC;EAC/C,OAAO;IACLD,GAAG,EAAEG,MAAM,CAACE,GAAG;IACf;IACAC,GAAG,EAAEH,MAAM,CAACI;EACd,CAAC;AACH"}