{"version":3,"file":"loadBabelConfig.js","names":["_nodeFs","data","_interopRequireDefault","require","_nodePath","obj","__esModule","default","loadBabelConfig","babelRC","_getBabelRC","projectRoot","possibleBabelRCPaths","foundBabelRCPath","find","configFileName","fs","existsSync","path","resolve","extends","presets","exports"],"sources":["../src/loadBabelConfig.ts"],"sourcesContent":["/**\n * Copyright (c) 650 Industries (Expo). All rights reserved.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport fs from 'node:fs';\nimport path from 'node:path';\n\nimport { TransformOptions } from './babel-core';\n\n/**\n * Returns a memoized function that checks for the existence of a\n * project-level .babelrc file. If it doesn't exist, it reads the\n * default React Native babelrc file and uses that.\n */\nexport const loadBabelConfig = (function () {\n  let babelRC: Pick<TransformOptions, 'extends' | 'presets'> | null = null;\n\n  return function _getBabelRC({ projectRoot }: { projectRoot: string }) {\n    if (babelRC !== null) {\n      return babelRC;\n    }\n\n    babelRC = {};\n\n    if (projectRoot) {\n      // Check for various babel config files in the project root\n      // TODO(EvanBacon): We might want to disable babelrc lookup when the user specifies `enableBabelRCLookup: false`.\n      const possibleBabelRCPaths = ['.babelrc', '.babelrc.js', 'babel.config.js'];\n\n      const foundBabelRCPath = possibleBabelRCPaths.find((configFileName) =>\n        fs.existsSync(path.resolve(projectRoot, configFileName))\n      );\n\n      // Extend the config if a babel config file is found\n      if (foundBabelRCPath) {\n        babelRC.extends = path.resolve(projectRoot, foundBabelRCPath);\n      }\n    }\n\n    // Use the default preset for react-native if no babel config file is found\n    if (!babelRC.extends) {\n      babelRC.presets = [require('babel-preset-expo')];\n    }\n\n    return babelRC;\n  };\n})();\n"],"mappings":";;;;;;AAOA,SAAAA,QAAA;EAAA,MAAAC,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAH,OAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAG,UAAA;EAAA,MAAAH,IAAA,GAAAC,sBAAA,CAAAC,OAAA;EAAAC,SAAA,YAAAA,CAAA;IAAA,OAAAH,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAA6B,SAAAC,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAR7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAMA;AACA;AACA;AACA;AACA;AACO,MAAMG,eAAe,GAAI,YAAY;EAC1C,IAAIC,OAA6D,GAAG,IAAI;EAExE,OAAO,SAASC,WAAWA,CAAC;IAAEC;EAAqC,CAAC,EAAE;IACpE,IAAIF,OAAO,KAAK,IAAI,EAAE;MACpB,OAAOA,OAAO;IAChB;IAEAA,OAAO,GAAG,CAAC,CAAC;IAEZ,IAAIE,WAAW,EAAE;MACf;MACA;MACA,MAAMC,oBAAoB,GAAG,CAAC,UAAU,EAAE,aAAa,EAAE,iBAAiB,CAAC;MAE3E,MAAMC,gBAAgB,GAAGD,oBAAoB,CAACE,IAAI,CAAEC,cAAc,IAChEC,iBAAE,CAACC,UAAU,CAACC,mBAAI,CAACC,OAAO,CAACR,WAAW,EAAEI,cAAc,CAAC,CACzD,CAAC;;MAED;MACA,IAAIF,gBAAgB,EAAE;QACpBJ,OAAO,CAACW,OAAO,GAAGF,mBAAI,CAACC,OAAO,CAACR,WAAW,EAAEE,gBAAgB,CAAC;MAC/D;IACF;;IAEA;IACA,IAAI,CAACJ,OAAO,CAACW,OAAO,EAAE;MACpBX,OAAO,CAACY,OAAO,GAAG,CAAClB,OAAO,CAAC,mBAAmB,CAAC,CAAC;IAClD;IAEA,OAAOM,OAAO;EAChB,CAAC;AACH,CAAC,CAAE,CAAC;AAACa,OAAA,CAAAd,eAAA,GAAAA,eAAA"}