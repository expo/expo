{"version":3,"file":"importMetroFromProject.js","names":["MetroImportError","Error","constructor","projectRoot","moduleId","resolveFromProject","resolvedPath","resolveFrom","silent","importFromProject","require","importMetroConfigFromProject","metroSourceMap","importMetroSourceMapFromProject"],"sources":["../src/importMetroFromProject.ts"],"sourcesContent":["import type MetroConfig from 'metro-config';\nimport type MetroSourceMap from 'metro-source-map';\nimport resolveFrom from 'resolve-from';\n\nclass MetroImportError extends Error {\n  constructor(projectRoot: string, moduleId: string) {\n    super(\n      `Missing package \"${moduleId}\" in the project at: ${projectRoot}\\n` +\n        'This usually means `react-native` is not installed. ' +\n        'Please verify that dependencies in package.json include \"react-native\" ' +\n        'and run `yarn` or `npm install`.'\n    );\n  }\n}\n\nfunction resolveFromProject(projectRoot: string, moduleId: string) {\n  const resolvedPath = resolveFrom.silent(projectRoot, moduleId);\n  if (!resolvedPath) {\n    throw new MetroImportError(projectRoot, moduleId);\n  }\n  return resolvedPath;\n}\n\nfunction importFromProject<T = any>(projectRoot: string, moduleId: string): T {\n  return require(resolveFromProject(projectRoot, moduleId));\n}\n\nexport function importMetroConfigFromProject(projectRoot: string): typeof MetroConfig {\n  return importFromProject(projectRoot, 'metro-config');\n}\n\nlet metroSourceMap: typeof MetroSourceMap | undefined;\n\nexport function importMetroSourceMapFromProject(projectRoot: string): typeof MetroSourceMap {\n  if (metroSourceMap) return metroSourceMap;\n  metroSourceMap = importFromProject<typeof MetroSourceMap>(projectRoot, 'metro-source-map');\n  return metroSourceMap;\n}\n"],"mappings":";;;;;;;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAuC;AAEvC,MAAMA,gBAAgB,SAASC,KAAK,CAAC;EACnCC,WAAW,CAACC,WAAmB,EAAEC,QAAgB,EAAE;IACjD,KAAK,CACF,oBAAmBA,QAAS,wBAAuBD,WAAY,IAAG,GACjE,sDAAsD,GACtD,yEAAyE,GACzE,kCAAkC,CACrC;EACH;AACF;AAEA,SAASE,kBAAkB,CAACF,WAAmB,EAAEC,QAAgB,EAAE;EACjE,MAAME,YAAY,GAAGC,sBAAW,CAACC,MAAM,CAACL,WAAW,EAAEC,QAAQ,CAAC;EAC9D,IAAI,CAACE,YAAY,EAAE;IACjB,MAAM,IAAIN,gBAAgB,CAACG,WAAW,EAAEC,QAAQ,CAAC;EACnD;EACA,OAAOE,YAAY;AACrB;AAEA,SAASG,iBAAiB,CAAUN,WAAmB,EAAEC,QAAgB,EAAK;EAC5E,OAAOM,OAAO,CAACL,kBAAkB,CAACF,WAAW,EAAEC,QAAQ,CAAC,CAAC;AAC3D;AAEO,SAASO,4BAA4B,CAACR,WAAmB,EAAsB;EACpF,OAAOM,iBAAiB,CAACN,WAAW,EAAE,cAAc,CAAC;AACvD;AAEA,IAAIS,cAAiD;AAE9C,SAASC,+BAA+B,CAACV,WAAmB,EAAyB;EAC1F,IAAIS,cAAc,EAAE,OAAOA,cAAc;EACzCA,cAAc,GAAGH,iBAAiB,CAAwBN,WAAW,EAAE,kBAAkB,CAAC;EAC1F,OAAOS,cAAc;AACvB"}