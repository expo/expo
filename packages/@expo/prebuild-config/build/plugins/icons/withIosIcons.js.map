{"version":3,"file":"withIosIcons.js","names":["_configPlugins","data","require","_imageUtils","_fs","_interopRequireDefault","_path","_AssetContents","e","__esModule","default","getProjectName","IOSConfig","XcodeUtils","IMAGE_CACHE_NAME","IMAGESET_PATH","withIosIcons","config","withDangerousMod","setIconsAsync","modRequest","projectRoot","withXcodeProject","icon","getIcons","projectName","path","extname","iconName","basename","setIconName","modResults","addIconFileToProject","exports","iosSpecificIcons","ios","light","dark","tinted","WarningAggregator","addWarningIOS","iosNamedProjectRoot","getIosNamedProjectPath","addLiquidGlassIcon","fs","promises","mkdir","join","recursive","imagesJson","baseIconPath","baseIcon","generateUniversalIconAsync","cacheKey","platform","push","darkIcon","appearance","tintedIcon","writeContentsJsonAsync","images","getAppleIconName","size","scale","name","filename","source","generateImageAsync","cacheType","src","width","height","removeTransparency","resizeMode","backgroundColor","undefined","createSquareAsync","assetPath","writeFile","idiom","appearances","value","iconPath","sourceIconPath","targetIconPath","existsSync","copyIconDirectory","project","configurations","pbxXCBuildConfigurationSection","Object","values","buildSettings","ASSETCATALOG_COMPILER_APPICON_NAME","addResourceFileToGroup","filepath","groupName","isBuildFile","verbose","dest","entries","readdir","withFileTypes","entry","srcPath","destPath","isDirectory","copyFile"],"sources":["../../../src/plugins/icons/withIosIcons.ts"],"sourcesContent":["import {\n  ConfigPlugin,\n  IOSConfig,\n  WarningAggregator,\n  withDangerousMod,\n  withXcodeProject,\n} from '@expo/config-plugins';\nimport { ExpoConfig, IOSIcons } from '@expo/config-types';\nimport { createSquareAsync, generateImageAsync } from '@expo/image-utils';\nimport fs from 'fs';\nimport path from 'path';\n\nimport { ContentsJson, ContentsJsonImage, writeContentsJsonAsync } from './AssetContents';\n\nconst { getProjectName } = IOSConfig.XcodeUtils;\n\nconst IMAGE_CACHE_NAME = 'icons';\nconst IMAGESET_PATH = 'Images.xcassets/AppIcon.appiconset';\n\nexport const withIosIcons: ConfigPlugin = (config) => {\n  config = withDangerousMod(config, [\n    'ios',\n    async (config) => {\n      await setIconsAsync(config, config.modRequest.projectRoot);\n      return config;\n    },\n  ]);\n\n  config = withXcodeProject(config, (config) => {\n    const icon = getIcons(config);\n    const projectName = config.modRequest.projectName;\n\n    if (icon && typeof icon === 'string' && path.extname(icon) === '.icon' && projectName) {\n      const iconName = path.basename(icon, '.icon');\n      setIconName(config.modResults, iconName);\n      addIconFileToProject(config.modResults, projectName, iconName);\n    }\n    return config;\n  });\n\n  return config;\n};\n\nexport function getIcons(config: Pick<ExpoConfig, 'icon' | 'ios'>): IOSIcons | string | null {\n  const iosSpecificIcons = config.ios?.icon;\n\n  if (iosSpecificIcons) {\n    // For backwards compatibility, the icon can be a string\n    if (typeof iosSpecificIcons === 'string') {\n      return iosSpecificIcons || config.icon || null;\n    }\n\n    // in iOS 18 introduced the ability to specify dark and tinted icons, which users can specify as an object\n    if (!iosSpecificIcons.light && !iosSpecificIcons.dark && !iosSpecificIcons.tinted) {\n      return config.icon || null;\n    }\n\n    return iosSpecificIcons;\n  }\n\n  if (config.icon) {\n    return config.icon;\n  }\n\n  return null;\n}\n\nexport async function setIconsAsync(config: ExpoConfig, projectRoot: string) {\n  const icon = getIcons(config);\n\n  if (\n    !icon ||\n    (typeof icon === 'string' && !icon) ||\n    (typeof icon === 'object' && !icon?.light && !icon?.dark && !icon?.tinted)\n  ) {\n    WarningAggregator.addWarningIOS('icon', 'No icon is defined in the Expo config.');\n  }\n\n  // Something like projectRoot/ios/MyApp/\n  const iosNamedProjectRoot = getIosNamedProjectPath(projectRoot);\n\n  if (typeof icon === 'string' && path.extname(icon) === '.icon') {\n    return await addLiquidGlassIcon(icon, projectRoot, iosNamedProjectRoot);\n  }\n\n  // Ensure the Images.xcassets/AppIcon.appiconset path exists\n  await fs.promises.mkdir(path.join(iosNamedProjectRoot, IMAGESET_PATH), { recursive: true });\n\n  const imagesJson: ContentsJson['images'] = [];\n\n  const baseIconPath = typeof icon === 'object' ? icon?.light || icon?.dark || icon?.tinted : icon;\n\n  // Store the image JSON data for assigning via the Contents.json\n  const baseIcon = await generateUniversalIconAsync(projectRoot, {\n    icon: baseIconPath,\n    cacheKey: 'universal-icon',\n    iosNamedProjectRoot,\n    platform: 'ios',\n  });\n\n  imagesJson.push(baseIcon);\n\n  if (typeof icon === 'object') {\n    if (icon?.dark) {\n      const darkIcon = await generateUniversalIconAsync(projectRoot, {\n        icon: icon.dark,\n        cacheKey: 'universal-icon-dark',\n        iosNamedProjectRoot,\n        platform: 'ios',\n        appearance: 'dark',\n      });\n\n      imagesJson.push(darkIcon);\n    }\n\n    if (icon?.tinted) {\n      const tintedIcon = await generateUniversalIconAsync(projectRoot, {\n        icon: icon.tinted,\n        cacheKey: 'universal-icon-tinted',\n        iosNamedProjectRoot,\n        platform: 'ios',\n        appearance: 'tinted',\n      });\n\n      imagesJson.push(tintedIcon);\n    }\n  }\n\n  // Finally, write the Contents.json\n  await writeContentsJsonAsync(path.join(iosNamedProjectRoot, IMAGESET_PATH), {\n    images: imagesJson,\n  });\n}\n\n/**\n * Return the project's named iOS path: ios/MyProject/\n *\n * @param projectRoot Expo project root path.\n */\nfunction getIosNamedProjectPath(projectRoot: string): string {\n  const projectName = getProjectName(projectRoot);\n  return path.join(projectRoot, 'ios', projectName);\n}\n\nfunction getAppleIconName(size: number, scale: number, appearance?: 'dark' | 'tinted'): string {\n  let name = 'App-Icon';\n\n  if (appearance) {\n    name = `${name}-${appearance}`;\n  }\n\n  name = `${name}-${size}x${size}@${scale}x.png`;\n\n  return name;\n}\n\nexport async function generateUniversalIconAsync(\n  projectRoot: string,\n  {\n    icon,\n    cacheKey,\n    iosNamedProjectRoot,\n    platform,\n    appearance,\n  }: {\n    platform: 'watchos' | 'ios';\n    icon?: string | null;\n    appearance?: 'dark' | 'tinted';\n    iosNamedProjectRoot: string;\n    cacheKey: string;\n  }\n): Promise<ContentsJsonImage> {\n  const size = 1024;\n  const filename = getAppleIconName(size, 1, appearance);\n\n  let source: Buffer;\n\n  if (icon) {\n    // Using this method will cache the images in `.expo` based on the properties used to generate them.\n    // this method also supports remote URLs and using the global sharp instance.\n    source = (\n      await generateImageAsync(\n        { projectRoot, cacheType: IMAGE_CACHE_NAME + cacheKey },\n        {\n          src: icon,\n          name: filename,\n          width: size,\n          height: size,\n          // Transparency needs to be preserved in dark variant, but can safely be removed in \"light\" and \"tinted\" variants.\n          removeTransparency: appearance !== 'dark',\n          // The icon should be square, but if it's not then it will be cropped.\n          resizeMode: 'cover',\n          // Force the background color to solid white to prevent any transparency. (for \"any\" and \"tinted\" variants)\n          // TODO: Maybe use a more adaptive option based on the icon color?\n          backgroundColor: appearance !== 'dark' ? '#ffffff' : undefined,\n        }\n      )\n    ).source;\n  } else {\n    // Create a white square image if no icon exists to mitigate the chance of a submission failure to the app store.\n    source = await createSquareAsync({ size });\n  }\n  // Write image buffer to the file system.\n  const assetPath = path.join(iosNamedProjectRoot, IMAGESET_PATH, filename);\n  await fs.promises.writeFile(assetPath, source);\n\n  return {\n    filename,\n    idiom: 'universal',\n    platform,\n    size: `${size}x${size}`,\n    ...(appearance ? { appearances: [{ appearance: 'luminosity', value: appearance }] } : {}),\n  };\n}\n\nasync function addLiquidGlassIcon(\n  iconPath: string,\n  projectRoot: string,\n  iosNamedProjectRoot: string\n): Promise<void> {\n  const iconName = path.basename(iconPath, '.icon');\n  const sourceIconPath = path.join(projectRoot, iconPath);\n  const targetIconPath = path.join(iosNamedProjectRoot, `${iconName}.icon`);\n\n  if (!fs.existsSync(sourceIconPath)) {\n    WarningAggregator.addWarningIOS(\n      'icon',\n      `Liquid glass icon file not found at path: ${iconPath}`\n    );\n    return;\n  }\n\n  await copyIconDirectory(sourceIconPath, targetIconPath);\n}\n\n/**\n * Adds the .icons name to the project\n */\nfunction setIconName(project: any, iconName: string): void {\n  const configurations = project.pbxXCBuildConfigurationSection();\n\n  for (const config of Object.values(configurations)) {\n    if ((config as any)?.buildSettings) {\n      (config as any).buildSettings.ASSETCATALOG_COMPILER_APPICON_NAME = iconName;\n    }\n  }\n}\n\n/**\n * Adds the .icon file to the project\n */\nfunction addIconFileToProject(project: any, projectName: string, iconName: string): void {\n  const iconPath = `${iconName}.icon`;\n\n  IOSConfig.XcodeUtils.addResourceFileToGroup({\n    filepath: `${projectName}/${iconPath}`,\n    groupName: projectName,\n    project,\n    isBuildFile: true,\n    verbose: true,\n  });\n}\n\nasync function copyIconDirectory(src: string, dest: string): Promise<void> {\n  await fs.promises.mkdir(dest, { recursive: true });\n  const entries = await fs.promises.readdir(src, { withFileTypes: true });\n\n  for (const entry of entries) {\n    const { name } = entry;\n    const srcPath = path.join(src, name);\n    const destPath = path.join(dest, name);\n\n    if (entry.isDirectory()) {\n      await copyIconDirectory(srcPath, destPath);\n    } else {\n      await fs.promises.copyFile(srcPath, destPath);\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}