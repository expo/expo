{"version":3,"file":"withAndroidSplashStyles.js","names":["styleResourceGroup","name","parent","SPLASH_COLOR_NAME","withAndroidSplashStyles","config","withAndroidColors","backgroundColor","getSplashBackgroundColor","modResults","setSplashColorsForTheme","withAndroidColorsNight","getSplashDarkBackgroundColor","withAndroidStyles","removeOldSplashStyleGroup","setSplashStylesForTheme","styles","group","resources","style","filter","$","head","matches","getAndroidSplashConfig","getAndroidDarkSplashConfig","AndroidConfig","Styles","assignStylesValue","add","value","colors","Colors","assignColorValue"],"sources":["../../../../src/plugins/unversioned/expo-splash-screen/withAndroidSplashStyles.ts"],"sourcesContent":["import {\n  AndroidConfig,\n  ConfigPlugin,\n  withAndroidColors,\n  withAndroidColorsNight,\n  withAndroidStyles,\n} from '@expo/config-plugins';\nimport { Colors } from '@expo/config-plugins/build/android';\nimport { ExpoConfig } from '@expo/config-types';\n\nimport { getAndroidDarkSplashConfig, getAndroidSplashConfig } from './getAndroidSplashConfig';\n\nconst styleResourceGroup = {\n  name: 'Theme.App.SplashScreen',\n  parent: 'AppTheme',\n};\n\nconst SPLASH_COLOR_NAME = 'splashscreen_background';\n\nexport const withAndroidSplashStyles: ConfigPlugin = (config) => {\n  config = withAndroidColors(config, (config) => {\n    const backgroundColor = getSplashBackgroundColor(config);\n    config.modResults = setSplashColorsForTheme(config.modResults, backgroundColor);\n    return config;\n  });\n  config = withAndroidColorsNight(config, (config) => {\n    const backgroundColor = getSplashDarkBackgroundColor(config);\n    config.modResults = setSplashColorsForTheme(config.modResults, backgroundColor);\n    return config;\n  });\n  config = withAndroidStyles(config, (config) => {\n    config.modResults = removeOldSplashStyleGroup(config.modResults);\n    config.modResults = setSplashStylesForTheme(config.modResults);\n    return config;\n  });\n  return config;\n};\n\n// Remove the old style group which didn't extend the base theme properly.\nexport function removeOldSplashStyleGroup(styles: AndroidConfig.Resources.ResourceXML) {\n  const group = {\n    name: 'Theme.App.SplashScreen',\n    parent: 'Theme.AppCompat.Light.NoActionBar',\n  };\n\n  styles.resources.style = styles.resources.style?.filter?.(({ $: head }) => {\n    let matches = head.name === group.name;\n    if (group.parent != null && matches) {\n      matches = head.parent === group.parent;\n    }\n    return !matches;\n  });\n\n  return styles;\n}\n\nexport function getSplashBackgroundColor(config: ExpoConfig): string | null {\n  return getAndroidSplashConfig(config)?.backgroundColor ?? null;\n}\n\nexport function getSplashDarkBackgroundColor(config: ExpoConfig): string | null {\n  return getAndroidDarkSplashConfig(config)?.backgroundColor ?? null;\n}\n\nexport function setSplashStylesForTheme(styles: AndroidConfig.Resources.ResourceXML) {\n  // Add splash screen image\n  return AndroidConfig.Styles.assignStylesValue(styles, {\n    add: true,\n    value: '@drawable/splashscreen',\n    name: 'android:windowBackground',\n    parent: styleResourceGroup,\n  });\n}\n\nexport function setSplashColorsForTheme(\n  colors: AndroidConfig.Resources.ResourceXML,\n  backgroundColor: string | null\n): AndroidConfig.Resources.ResourceXML {\n  return Colors.assignColorValue(colors, { value: backgroundColor, name: SPLASH_COLOR_NAME });\n}\n"],"mappings":"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"}