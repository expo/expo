{"version":3,"file":"withAndroidNavigationBar.js","names":["NAVIGATION_BAR_COLOR","withNavigationBar","config","immersiveMode","getNavigationBarImmersiveMode","WarningAggregator","addWarningAndroid","withNavigationBarColors","withNavigationBarStyles","withAndroidColors","modResults","setNavigationBarColors","withAndroidStyles","setNavigationBarStyles","colors","hexString","getNavigationBarColor","AndroidConfig","Colors","setColorItem","Resources","buildResourceItem","name","value","styles","Styles","assignStylesValue","add","getNavigationBarStyle","parent","getAppThemeLightNoActionBarGroup","androidNavigationBar","visible","backgroundColor","barStyle"],"sources":["../../../../src/plugins/unversioned/expo-navigation-bar/withAndroidNavigationBar.ts"],"sourcesContent":["import {\n  AndroidConfig,\n  ConfigPlugin,\n  WarningAggregator,\n  withAndroidColors,\n  withAndroidStyles,\n} from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\n\nconst NAVIGATION_BAR_COLOR = 'navigationBarColor';\n\nexport const withNavigationBar: ConfigPlugin = (config) => {\n  const immersiveMode = getNavigationBarImmersiveMode(config);\n  if (immersiveMode) {\n    // Immersive mode needs to be set programmatically\n    WarningAggregator.addWarningAndroid(\n      'androidNavigationBar.visible',\n      'Property is deprecated in Android 11 (API 30) and will be removed from Expo SDK.',\n      'https://expo.fyi/android-navigation-bar-visible-deprecated'\n    );\n  }\n\n  config = withNavigationBarColors(config);\n  config = withNavigationBarStyles(config);\n  return config;\n};\n\nconst withNavigationBarColors: ConfigPlugin = (config) => {\n  return withAndroidColors(config, (config) => {\n    config.modResults = setNavigationBarColors(config, config.modResults);\n    return config;\n  });\n};\n\nconst withNavigationBarStyles: ConfigPlugin = (config) => {\n  return withAndroidStyles(config, (config) => {\n    config.modResults = setNavigationBarStyles(config, config.modResults);\n    return config;\n  });\n};\n\nexport function setNavigationBarColors(\n  config: Pick<ExpoConfig, 'androidNavigationBar'>,\n  colors: AndroidConfig.Resources.ResourceXML\n): AndroidConfig.Resources.ResourceXML {\n  const hexString = getNavigationBarColor(config);\n  if (hexString) {\n    colors = AndroidConfig.Colors.setColorItem(\n      AndroidConfig.Resources.buildResourceItem({\n        name: NAVIGATION_BAR_COLOR,\n        value: hexString,\n      }),\n      colors\n    );\n  }\n  return colors;\n}\n\nexport function setNavigationBarStyles(\n  config: Pick<ExpoConfig, 'androidNavigationBar'>,\n  styles: AndroidConfig.Resources.ResourceXML\n): AndroidConfig.Resources.ResourceXML {\n  styles = AndroidConfig.Styles.assignStylesValue(styles, {\n    add: getNavigationBarStyle(config) === 'dark-content',\n    parent: AndroidConfig.Styles.getAppThemeLightNoActionBarGroup(),\n    name: 'android:windowLightNavigationBar',\n    value: 'true',\n  });\n  styles = AndroidConfig.Styles.assignStylesValue(styles, {\n    add: !!getNavigationBarColor(config),\n    parent: AndroidConfig.Styles.getAppThemeLightNoActionBarGroup(),\n    name: `android:${NAVIGATION_BAR_COLOR}`,\n    value: `@color/${NAVIGATION_BAR_COLOR}`,\n  });\n\n  return styles;\n}\n\nexport function getNavigationBarImmersiveMode(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.visible || null;\n}\n\nexport function getNavigationBarColor(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.backgroundColor || null;\n}\n\nexport function getNavigationBarStyle(config: Pick<ExpoConfig, 'androidNavigationBar'>) {\n  return config.androidNavigationBar?.barStyle || 'light-content';\n}\n"],"mappings":";;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AASA,MAAMA,oBAAoB,GAAG,oBAAoB;AAE1C,MAAMC,iBAA+B,GAAIC,MAAM,IAAK;EACzD,MAAMC,aAAa,GAAGC,6BAA6B,CAACF,MAAM,CAAC;EAC3D,IAAIC,aAAa,EAAE;IACjB;IACAE,kCAAiB,CAACC,iBAAiB,CACjC,8BAA8B,EAC9B,kFAAkF,EAClF,4DAA4D,CAC7D;EACH;EAEAJ,MAAM,GAAGK,uBAAuB,CAACL,MAAM,CAAC;EACxCA,MAAM,GAAGM,uBAAuB,CAACN,MAAM,CAAC;EACxC,OAAOA,MAAM;AACf,CAAC;AAAC;AAEF,MAAMK,uBAAqC,GAAIL,MAAM,IAAK;EACxD,OAAO,IAAAO,kCAAiB,EAACP,MAAM,EAAGA,MAAM,IAAK;IAC3CA,MAAM,CAACQ,UAAU,GAAGC,sBAAsB,CAACT,MAAM,EAAEA,MAAM,CAACQ,UAAU,CAAC;IACrE,OAAOR,MAAM;EACf,CAAC,CAAC;AACJ,CAAC;AAED,MAAMM,uBAAqC,GAAIN,MAAM,IAAK;EACxD,OAAO,IAAAU,kCAAiB,EAACV,MAAM,EAAGA,MAAM,IAAK;IAC3CA,MAAM,CAACQ,UAAU,GAAGG,sBAAsB,CAACX,MAAM,EAAEA,MAAM,CAACQ,UAAU,CAAC;IACrE,OAAOR,MAAM;EACf,CAAC,CAAC;AACJ,CAAC;AAEM,SAASS,sBAAsB,CACpCT,MAAgD,EAChDY,MAA2C,EACN;EACrC,MAAMC,SAAS,GAAGC,qBAAqB,CAACd,MAAM,CAAC;EAC/C,IAAIa,SAAS,EAAE;IACbD,MAAM,GAAGG,8BAAa,CAACC,MAAM,CAACC,YAAY,CACxCF,8BAAa,CAACG,SAAS,CAACC,iBAAiB,CAAC;MACxCC,IAAI,EAAEtB,oBAAoB;MAC1BuB,KAAK,EAAER;IACT,CAAC,CAAC,EACFD,MAAM,CACP;EACH;EACA,OAAOA,MAAM;AACf;AAEO,SAASD,sBAAsB,CACpCX,MAAgD,EAChDsB,MAA2C,EACN;EACrCA,MAAM,GAAGP,8BAAa,CAACQ,MAAM,CAACC,iBAAiB,CAACF,MAAM,EAAE;IACtDG,GAAG,EAAEC,qBAAqB,CAAC1B,MAAM,CAAC,KAAK,cAAc;IACrD2B,MAAM,EAAEZ,8BAAa,CAACQ,MAAM,CAACK,gCAAgC,EAAE;IAC/DR,IAAI,EAAE,kCAAkC;IACxCC,KAAK,EAAE;EACT,CAAC,CAAC;EACFC,MAAM,GAAGP,8BAAa,CAACQ,MAAM,CAACC,iBAAiB,CAACF,MAAM,EAAE;IACtDG,GAAG,EAAE,CAAC,CAACX,qBAAqB,CAACd,MAAM,CAAC;IACpC2B,MAAM,EAAEZ,8BAAa,CAACQ,MAAM,CAACK,gCAAgC,EAAE;IAC/DR,IAAI,EAAG,WAAUtB,oBAAqB,EAAC;IACvCuB,KAAK,EAAG,UAASvB,oBAAqB;EACxC,CAAC,CAAC;EAEF,OAAOwB,MAAM;AACf;AAEO,SAASpB,6BAA6B,CAACF,MAAgD,EAAE;EAAA;EAC9F,OAAO,0BAAAA,MAAM,CAAC6B,oBAAoB,0DAA3B,sBAA6BC,OAAO,KAAI,IAAI;AACrD;AAEO,SAAShB,qBAAqB,CAACd,MAAgD,EAAE;EAAA;EACtF,OAAO,2BAAAA,MAAM,CAAC6B,oBAAoB,2DAA3B,uBAA6BE,eAAe,KAAI,IAAI;AAC7D;AAEO,SAASL,qBAAqB,CAAC1B,MAAgD,EAAE;EAAA;EACtF,OAAO,2BAAAA,MAAM,CAAC6B,oBAAoB,2DAA3B,uBAA6BG,QAAQ,KAAI,eAAe;AACjE"}