{"version":3,"file":"withIosBranch.js","names":["withIosBranch","config","withInfoPlist","modResults","setBranchApiKey","getBranchApiKey","ios","branch","apiKey","infoPlist","branch_key","live"],"sources":["../../../../src/plugins/unversioned/expo-branch/withIosBranch.ts"],"sourcesContent":["import { ConfigPlugin, InfoPlist, withInfoPlist } from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\n\nexport const withIosBranch: ConfigPlugin = (config) => {\n  return withInfoPlist(config, (config) => {\n    config.modResults = setBranchApiKey(config, config.modResults);\n    return config;\n  });\n};\n\nexport function getBranchApiKey(config: Pick<ExpoConfig, 'ios'>) {\n  return config.ios?.config?.branch?.apiKey ?? null;\n}\n\nexport function setBranchApiKey(config: Pick<ExpoConfig, 'ios'>, infoPlist: InfoPlist): InfoPlist {\n  const apiKey = getBranchApiKey(config);\n\n  if (apiKey === null) {\n    return infoPlist;\n  }\n\n  return {\n    ...infoPlist,\n    branch_key: {\n      live: apiKey,\n    },\n  };\n}\n"],"mappings":";;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGO,MAAMA,aAA2B,GAAIC,MAAM,IAAK;EACrD,OAAO,IAAAC,8BAAa,EAACD,MAAM,EAAGA,MAAM,IAAK;IACvCA,MAAM,CAACE,UAAU,GAAGC,eAAe,CAACH,MAAM,EAAEA,MAAM,CAACE,UAAU,CAAC;IAC9D,OAAOF,MAAM;EACf,CAAC,CAAC;AACJ,CAAC;AAAC;AAEK,SAASI,eAAe,CAACJ,MAA+B,EAAE;EAAA;EAC/D,+CAAOA,MAAM,CAACK,GAAG,sEAAV,YAAYL,MAAM,iFAAlB,mBAAoBM,MAAM,2DAA1B,uBAA4BC,MAAM,yEAAI,IAAI;AACnD;AAEO,SAASJ,eAAe,CAACH,MAA+B,EAAEQ,SAAoB,EAAa;EAChG,MAAMD,MAAM,GAAGH,eAAe,CAACJ,MAAM,CAAC;EAEtC,IAAIO,MAAM,KAAK,IAAI,EAAE;IACnB,OAAOC,SAAS;EAClB;EAEA,OAAO;IACL,GAAGA,SAAS;IACZC,UAAU,EAAE;MACVC,IAAI,EAAEH;IACR;EACF,CAAC;AACH"}