{"version":3,"file":"LogReporter.js","names":["_serializeError","data","require","LogReporter","constructor","logger","reportEvent","update","event","error","Error","serializeError","info","tag","JSON","stringify","exports","default"],"sources":["../src/LogReporter.ts"],"sourcesContent":["import Log from '@expo/bunyan';\nimport { serializeError } from 'serialize-error';\n\nexport default class LogReporter {\n  constructor(public logger: Log, public reportEvent: (event: any) => void = () => {}) {\n    this.logger = logger;\n    this.reportEvent = reportEvent;\n  }\n\n  update(event: any) {\n    if (event.error instanceof Error) {\n      event.error = serializeError(event.error);\n    }\n    // TODO(ville): replace xdl.PackagerLogsStream with a reporter to avoid serializing to JSON.\n    this.logger.info({ tag: 'metro' }, JSON.stringify(event));\n    this.reportEvent(event);\n  }\n}\n"],"mappings":";;;;;;AACA,SAAAA,gBAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,eAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEe,MAAME,WAAW,CAAC;EAC/BC,WAAWA,CAAQC,MAAW,EAASC,WAAiC,GAAGA,CAAA,KAAM,CAAC,CAAC,EAAE;IAAA,KAAlED,MAAW,GAAXA,MAAW;IAAA,KAASC,WAAiC,GAAjCA,WAAiC;IACtE,IAAI,CAACD,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,WAAW,GAAGA,WAAW;EAChC;EAEAC,MAAMA,CAACC,KAAU,EAAE;IACjB,IAAIA,KAAK,CAACC,KAAK,YAAYC,KAAK,EAAE;MAChCF,KAAK,CAACC,KAAK,GAAG,IAAAE,gCAAc,EAACH,KAAK,CAACC,KAAK,CAAC;IAC3C;IACA;IACA,IAAI,CAACJ,MAAM,CAACO,IAAI,CAAC;MAAEC,GAAG,EAAE;IAAQ,CAAC,EAAEC,IAAI,CAACC,SAAS,CAACP,KAAK,CAAC,CAAC;IACzD,IAAI,CAACF,WAAW,CAACE,KAAK,CAAC;EACzB;AACF;AAACQ,OAAA,CAAAC,OAAA,GAAAd,WAAA"}