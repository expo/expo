#!/usr/bin/env node

import path from 'node:path';
import { commandRunner, getArgs } from '../utils/commandUtils.js';
import { fileURLToPath } from 'node:url';

const dirname = path.dirname(fileURLToPath(import.meta.url));

const EXTRA_MODULE_BUILD_TARGETS = ['plugin', 'cli', 'utils', 'scripts'];

let args = getArgs();

// If the command is used like `yarn lint plugin` then set the target to `plugin/src`
if (EXTRA_MODULE_BUILD_TARGETS.includes(args[0])) {
  // Push the rest of the arguments minus the `plugin` arg
  const target = args[0];
  args = [...args.slice(1), `${target}/src`];
} else {
  args = [...args, 'src'];
}

await commandRunner(path.join(dirname, 'expo-module-eslint'), args);
