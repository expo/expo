{"version":3,"file":"Sitemap.js","sourceRoot":"","sources":["../../src/views/Sitemap.tsx"],"names":[],"mappings":"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","sourcesContent":["import { NativeStackNavigationOptions } from '@react-navigation/native-stack';\nimport React from 'react';\nimport {\n  Image,\n  StyleSheet,\n  Text,\n  View,\n  ScrollView,\n  Platform,\n  StatusBar,\n  useWindowDimensions,\n} from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { Pressable } from './Pressable';\nimport { RouteNode } from '../Route';\nimport { useExpoRouter } from '../global-state/router-store';\nimport { router } from '../imperative-api';\nimport { Link } from '../link/Link';\nimport { matchDeepDynamicRouteName } from '../matchers';\n\nconst INDENT = 24;\n\nexport function getNavOptions(): NativeStackNavigationOptions {\n  return {\n    title: 'sitemap',\n    headerShown: false,\n    presentation: 'modal',\n    animation: 'default',\n    headerLargeTitle: false,\n    headerTitleStyle: {\n      color: 'white',\n    },\n    headerTintColor: 'white',\n    headerLargeTitleStyle: {\n      color: 'white',\n    },\n    headerStyle: {\n      backgroundColor: 'black',\n      // @ts-expect-error: mistyped\n      borderBottomColor: '#323232',\n    },\n  };\n}\n\nexport function Sitemap() {\n  const { top, bottom } = useSafeAreaInsets();\n  const { width } = useWindowDimensions();\n  return (\n    <View style={styles.container}>\n      <StatusBar barStyle=\"light-content\" />\n      <View\n        style={[\n          styles.main,\n          {\n            minWidth: Math.min(960, width * 0.9),\n          },\n        ]}>\n        <ScrollView\n          contentContainerStyle={[\n            styles.scroll,\n            {\n              paddingTop: top + 12,\n              paddingBottom: bottom + 12,\n            },\n          ]}\n          style={{ flex: 1 }}>\n          <FileSystemView />\n        </ScrollView>\n      </View>\n    </View>\n  );\n}\n\nfunction FileSystemView() {\n  const routes = useExpoRouter().getSortedRoutes();\n\n  return (\n    <>\n      {routes.map((child) => (\n        <View key={child.contextKey} style={styles.itemContainer}>\n          <FileItem route={child} />\n        </View>\n      ))}\n    </>\n  );\n}\n\nfunction FileItem({\n  route,\n  level = 0,\n  parents = [],\n  isInitial = false,\n}: {\n  route: RouteNode;\n  level?: number;\n  parents?: string[];\n  isInitial?: boolean;\n}) {\n  const disabled = route.children.length > 0;\n\n  const segments = React.useMemo(\n    () => [...parents, ...route.route.split('/')],\n    [parents, route.route]\n  );\n\n  const href = React.useMemo(() => {\n    return (\n      '/' +\n      segments\n        .map((v) => {\n          // add an extra layer of entropy to the url for deep dynamic routes\n          if (matchDeepDynamicRouteName(v)) {\n            return v + '/' + Date.now();\n          }\n          // index must be erased but groups can be preserved.\n          return v === 'index' ? '' : v;\n        })\n        .filter(Boolean)\n        .join('/')\n    );\n  }, [segments, route.route]);\n\n  const filename = React.useMemo(() => {\n    const segments = route.contextKey.split('/');\n    // join last two segments for layout routes\n    if (route.contextKey.match(/_layout\\.[jt]sx?$/)) {\n      return segments[segments.length - 2] + '/' + segments[segments.length - 1];\n    }\n\n    const segmentCount = route.route.split('/').length;\n\n    // Join the segment count in reverse order\n    // This presents files without layout routes as children with all relevant segments.\n    return segments.slice(-segmentCount).join('/');\n  }, [route]);\n\n  const info = isInitial ? 'Initial' : route.generated ? 'Virtual' : '';\n\n  return (\n    <>\n      {!route.internal && (\n        <Link\n          accessibilityLabel={route.contextKey}\n          href={href}\n          onPress={() => {\n            if (Platform.OS !== 'web' && router.canGoBack()) {\n              // Ensure the modal pops\n              router.back();\n            }\n          }}\n          style={{ flex: 1, display: 'flex' }}\n          disabled={disabled}\n          asChild\n          // Ensure we replace the history so you can't go back to this page.\n          replace>\n          <Pressable style={{ flex: 1 }}>\n            {({ pressed, hovered }) => (\n              <View\n                style={[\n                  styles.itemPressable,\n                  {\n                    paddingLeft: INDENT + level * INDENT,\n                    backgroundColor: hovered ? 'rgba(255,255,255,0.1)' : 'transparent',\n                  },\n                  pressed && { backgroundColor: '#323232' },\n                  disabled && { opacity: 0.4 },\n                ]}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  {route.children.length ? <PkgIcon /> : <FileIcon />}\n                  <Text style={styles.filename}>{filename}</Text>\n                </View>\n\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  {!!info && (\n                    <Text style={[styles.virtual, !disabled && { marginRight: 8 }]}>{info}</Text>\n                  )}\n                  {!disabled && <ForwardIcon />}\n                </View>\n              </View>\n            )}\n          </Pressable>\n        </Link>\n      )}\n      {route.children.map((child) => (\n        <FileItem\n          key={child.contextKey}\n          route={child}\n          isInitial={route.initialRouteName === child.route}\n          parents={segments}\n          level={level + (route.generated ? 0 : 1)}\n        />\n      ))}\n    </>\n  );\n}\n\nfunction FileIcon() {\n  return <Image style={styles.image} source={require('expo-router/assets/file.png')} />;\n}\n\nfunction PkgIcon() {\n  return <Image style={styles.image} source={require('expo-router/assets/pkg.png')} />;\n}\n\nfunction ForwardIcon() {\n  return <Image style={styles.image} source={require('expo-router/assets/forward.png')} />;\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'black',\n    flex: 1,\n    alignItems: 'stretch',\n  },\n  main: {\n    marginHorizontal: 'auto',\n    flex: 1,\n\n    alignItems: 'stretch',\n  },\n  scroll: {\n    paddingHorizontal: 12,\n    // flex: 1,\n    // paddingTop: top + 12,\n    alignItems: 'stretch',\n  },\n  itemContainer: {\n    borderWidth: 1,\n    borderColor: '#323232',\n    borderRadius: 19,\n    marginBottom: 12,\n    overflow: 'hidden',\n  },\n  itemPressable: {\n    paddingHorizontal: INDENT,\n    paddingVertical: 16,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    transitionDuration: '100ms',\n  },\n  filename: { color: 'white', fontSize: 20, marginLeft: 12 },\n  virtual: { textAlign: 'right', color: 'white' },\n  image: { width: 24, height: 24, resizeMode: 'contain' },\n});\n"]}