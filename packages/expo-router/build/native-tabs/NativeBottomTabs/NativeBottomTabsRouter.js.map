{"version":3,"file":"NativeBottomTabsRouter.js","sourceRoot":"","sources":["../../../src/native-tabs/NativeBottomTabs/NativeBottomTabsRouter.tsx"],"names":[],"mappings":";;AAUA,wDAiDC;AA3DD,qDAQkC;AAElC,SAAgB,sBAAsB,CAAC,OAAyB;IAC9D,MAAM,SAAS,GAAG,IAAA,kBAAS,EAAC,EAAE,GAAG,OAAO,EAAE,CAAC,CAAC;IAE5C,MAAM,eAAe,GAGjB;QACF,GAAG,SAAS;QACZ,qEAAqE;QACrE,iBAAiB,EAAE,CAAC,KAAK,EAAE,MAA8C,EAAE,OAAO,EAAE,EAAE;YACpF,QAAQ,MAAM,CAAC,IAAI,EAAE,CAAC;gBACpB,KAAK,UAAU,CAAC,CAAC,CAAC;oBAChB,MAAM,sBAAsB,GAAG,SAAS,CAAC,iBAAiB,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;oBACnF,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;oBAEpF,IAAI,KAAK,KAAK,CAAC,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC;wBAC5C,OAAO,sBAAsB,CAAC;oBAChC,CAAC;oBAED,MAAM,QAAQ,GAAG;wBACf,GAAG,sBAAsB;wBACzB,MAAM,EAAE,sBAAsB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;4BAClD,IAAI,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gCACvC,OAAO,KAAK,CAAC;4BACf,CAAC;4BACD,MAAM,OAAO,GAAG,MAAM,CAAC,OAEtB,CAAC;4BACF,OAAO;gCACL,GAAG,KAAK;gCACR,MAAM,EAAE,KAAK,CAAC,MAAM;oCAClB,CAAC,CAAC;wCACE,GAAG,KAAK,CAAC,MAAM;wCACf,gCAAgC,EAAE,OAAO,CAAC,UAAU;qCACrD;oCACH,CAAC,CAAC;wCACE,gCAAgC,EAAE,OAAO,CAAC,UAAU;qCACrD;6BACN,CAAC;wBACJ,CAAC,CAAC;qBACH,CAAC;oBACF,OAAO,QAAQ,CAAC;gBAClB,CAAC;YACH,CAAC;YACD,OAAO,SAAS,CAAC,iBAAiB,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;QAC7D,CAAC;KACF,CAAC;IAEF,OAAO,eAAe,CAAC;AACzB,CAAC","sourcesContent":["import {\n  CommonNavigationAction,\n  ParamListBase,\n  Router,\n  TabActionType,\n  TabNavigationState,\n  TabRouter,\n  type TabRouterOptions,\n} from '@react-navigation/native';\n\nexport function NativeBottomTabsRouter(options: TabRouterOptions) {\n  const tabRouter = TabRouter({ ...options });\n\n  const nativeTabRouter: Router<\n    TabNavigationState<ParamListBase>,\n    TabActionType | CommonNavigationAction\n  > = {\n    ...tabRouter,\n    // @ts-expect-error TODO: For some reason this is not typed correctly\n    getStateForAction: (state, action: TabActionType | CommonNavigationAction, options) => {\n      switch (action.type) {\n        case 'NAVIGATE': {\n          const newStateFromNavigation = tabRouter.getStateForAction(state, action, options);\n          const index = state.routes.findIndex((route) => route.name === action.payload.name);\n\n          if (index === -1 || !newStateFromNavigation) {\n            return newStateFromNavigation;\n          }\n\n          const newState = {\n            ...newStateFromNavigation,\n            routes: newStateFromNavigation.routes.map((route) => {\n              if (route.name !== action.payload.name) {\n                return route;\n              }\n              const payload = action.payload as typeof action.payload & {\n                previewKey?: string;\n              };\n              return {\n                ...route,\n                params: route.params\n                  ? {\n                      ...route.params,\n                      __internal__expoRouterPreviewKey: payload.previewKey,\n                    }\n                  : {\n                      __internal__expoRouterPreviewKey: payload.previewKey,\n                    },\n              };\n            }),\n          };\n          return newState;\n        }\n      }\n      return tabRouter.getStateForAction(state, action, options);\n    },\n  };\n\n  return nativeTabRouter;\n}\n"]}