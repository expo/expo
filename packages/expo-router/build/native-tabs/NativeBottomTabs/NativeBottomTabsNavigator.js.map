{"version":3,"file":"NativeBottomTabsNavigator.js","sourceRoot":"","sources":["../../../src/native-tabs/NativeBottomTabs/NativeBottomTabsNavigator.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\n\nimport {\n  createNavigatorFactory,\n  NavigationState,\n  ParamListBase,\n  TabNavigationState,\n  TabRouterOptions,\n  useNavigationBuilder,\n  type EventMapBase,\n} from '@react-navigation/native';\nimport React, { use } from 'react';\n\nimport { NativeBottomTabsRouter } from './NativeBottomTabsRouter';\nimport { NativeTabsScrollEdgeAppearance } from './NativeTabsScrollEdgeAppearance';\nimport { NativeTabsView } from './NativeTabsView';\nimport { withLayoutContext } from '../..';\nimport type { NativeTabOptions, NativeTabsProps, NativeTabsViewProps } from './types';\nimport { isChildOfType, shouldTabBeVisible } from './utils';\nimport { getPathFromState } from '../../link/linking';\n\n// In Jetpack Compose, the default back behavior is to go back to the initial route.\nconst defaultBackBehavior = 'initialRoute';\nexport const NativeTabsContext = React.createContext<boolean>(false);\n\nexport function NativeTabsNavigator({\n  children,\n  backBehavior = defaultBackBehavior,\n  ...rest\n}: Omit<NativeTabsViewProps, 'focusedIndex' | 'builder'>) {\n  if (use(NativeTabsContext)) {\n    throw new Error(\n      'Nesting Native Tabs inside each other is not supported natively. Use JS tabs for nesting instead.'\n    );\n  }\n  const builder = useNavigationBuilder<\n    TabNavigationState<ParamListBase>,\n    TabRouterOptions,\n    Record<string, (...args: any) => void>,\n    NativeTabOptions,\n    Record<string, any>\n  >(NativeBottomTabsRouter, {\n    children,\n    backBehavior,\n  });\n\n  const { state, descriptors } = builder;\n  const { routes } = state;\n  let focusedIndex = state.index;\n  const isAnyRouteFocused =\n    routes[focusedIndex].key &&\n    descriptors[routes[focusedIndex].key] &&\n    shouldTabBeVisible(descriptors[routes[focusedIndex].key].options);\n\n  if (!isAnyRouteFocused) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error(\n        `The focused tab in NativeTabsView cannot be displayed. Make sure path is correct and the route is not hidden. Path: \"${getPathFromState(state)}\"`\n      );\n    }\n    // Set focusedIndex to the first visible tab\n    focusedIndex = routes.findIndex((route) => shouldTabBeVisible(descriptors[route.key].options));\n  }\n\n  return (\n    <NativeTabsContext value>\n      <NativeTabsView builder={builder} {...rest} focusedIndex={focusedIndex} />\n    </NativeTabsContext>\n  );\n}\n\nconst createNativeTabNavigator = createNavigatorFactory(NativeTabsNavigator);\n\nconst NativeTabsNavigatorWithContext = withLayoutContext<\n  NativeTabOptions,\n  typeof NativeTabsNavigator,\n  NavigationState,\n  EventMapBase\n>(createNativeTabNavigator().Navigator, undefined, true);\n\nexport function NativeTabsNavigatorWrapper({ children, ...rest }: NativeTabsProps) {\n  const filteredChildren = React.Children.toArray(children).filter(\n    (x) => !isChildOfType(x, NativeTabsScrollEdgeAppearance)\n  );\n  const scrollEdgeAppearance = React.Children.toArray(children).find((x) =>\n    isChildOfType(x, NativeTabsScrollEdgeAppearance)\n  );\n  return (\n    <NativeTabsNavigatorWithContext\n      {...rest}\n      children={filteredChildren}\n      scrollEdgeAppearanceProps={scrollEdgeAppearance?.props}\n    />\n  );\n}\n"]}