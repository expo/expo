{"version":3,"file":"useZoomTransitionPrimitives.ios.js","sourceRoot":"","sources":["../../src/link/useZoomTransitionPrimitives.ios.tsx"],"names":[],"mappings":";AAAA,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeb,kEAuDC;AApED,kDAA2C;AAC3C,+CAAuC;AAEvC,0DAAgG;AAChG,mEAAkE;AAClE,uEAA6D;AAC7D,6CAA4D;AAG5D,MAAM,cAAc,GAAG,CAAC,KAAoC,EAAE,EAAE;IAC9D,OAAO,KAAK,CAAC,QAAQ,CAAC;AACxB,CAAC,CAAC;AAEF,SAAgB,2BAA2B,CAAC,EAC1C,mBAAmB,EACnB,gCAAgC,EAChC,IAAI,GACM;IACV,MAAM,SAAS,GAAG,IAAA,kCAAY,GAAE,CAAC;IACjC,MAAM,gBAAgB,GAAG,IAAA,eAAO,EAC9B,GAAG,EAAE,CACH,mBAAmB,KAAK,MAAM;QAC9B,CAAC,SAAS;QACV,OAAO,CAAC,GAAG,CAAC,OAAO,KAAK,KAAK;QAC7B,IAAA,+CAAuB,GAAE;QACvB,CAAC,CAAC,IAAA,mBAAM,GAAE;QACV,CAAC,CAAC,SAAS,EACf,EAAE,CACH,CAAC;IACF,MAAM,qBAAqB,GAAG,IAAA,eAAO,EAAC,GAAG,EAAE;QACzC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtB,OAAO,cAAc,CAAC;QACxB,CAAC;QACD,OAAO,CAAC,KAAoC,EAAE,EAAE,CAAC,CAC/C,CAAC,iCAAwB,CACvB,UAAU,CAAC,CAAC,gBAAgB,CAAC,CAC7B,SAAS,CAAC,CAAC,gCAAgC,CAAC,CAC5C;QAAA,CAAC,KAAK,CAAC,QAAQ,CACjB;MAAA,EAAE,iCAAwB,CAAC,CAC5B,CAAC;IACJ,CAAC,EAAE;QACD,gBAAgB;QAChB,gCAAgC,EAAE,CAAC;QACnC,gCAAgC,EAAE,CAAC;QACnC,gCAAgC,EAAE,KAAK;QACvC,gCAAgC,EAAE,MAAM;KACzC,CAAC,CAAC;IACH,MAAM,YAAY,GAAG,IAAA,eAAO,EAAC,GAAG,EAAE;QAChC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtB,OAAO,IAAI,CAAC;QACd,CAAC;QACD,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,CAAC;YAC7B,OAAO;gBACL,QAAQ,EAAE,IAAI;gBACd,MAAM,EAAE;oBACN,CAAC,4EAAyD,CAAC,EAAE,gBAAgB;iBAC9E;aACF,CAAC;QACJ,CAAC;QACD,OAAO;YACL,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,MAAM,EAAE;gBACN,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,EAAE,CAAC;gBACtB,CAAC,4EAAyD,CAAC,EAAE,gBAAgB;aAC9E;SACF,CAAC;IACJ,CAAC,EAAE,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAC7B,OAAO,EAAE,qBAAqB,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;AACvD,CAAC","sourcesContent":["'use client';\n\nimport { nanoid } from 'nanoid/non-secure';\nimport React, { useMemo } from 'react';\n\nimport { INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME } from '../navigationParams';\nimport { isZoomTransitionEnabled } from './ZoomTransitionEnabler';\nimport { useIsPreview } from './preview/PreviewRouteContext';\nimport { LinkZoomTransitionSource } from './preview/native';\nimport { LinkProps } from './useLinkHooks';\n\nconst NOOP_COMPONENT = (props: { children: React.ReactNode }) => {\n  return props.children;\n};\n\nexport function useZoomTransitionPrimitives({\n  unstable_transition,\n  unstable_transitionAlignmentRect,\n  href,\n}: LinkProps) {\n  const isPreview = useIsPreview();\n  const zoomTransitionId = useMemo(\n    () =>\n      unstable_transition === 'zoom' &&\n      !isPreview &&\n      process.env.EXPO_OS === 'ios' &&\n      isZoomTransitionEnabled()\n        ? nanoid()\n        : undefined,\n    []\n  );\n  const ZoomTransitionWrapper = useMemo(() => {\n    if (!zoomTransitionId) {\n      return NOOP_COMPONENT;\n    }\n    return (props: { children: React.ReactNode }) => (\n      <LinkZoomTransitionSource\n        identifier={zoomTransitionId}\n        alignment={unstable_transitionAlignmentRect}>\n        {props.children}\n      </LinkZoomTransitionSource>\n    );\n  }, [\n    zoomTransitionId,\n    unstable_transitionAlignmentRect?.x,\n    unstable_transitionAlignmentRect?.y,\n    unstable_transitionAlignmentRect?.width,\n    unstable_transitionAlignmentRect?.height,\n  ]);\n  const computedHref = useMemo(() => {\n    if (!zoomTransitionId) {\n      return href;\n    }\n    if (typeof href === 'string') {\n      return {\n        pathname: href,\n        params: {\n          [INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME]: zoomTransitionId,\n        },\n      };\n    }\n    return {\n      pathname: href.pathname,\n      params: {\n        ...(href.params ?? {}),\n        [INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME]: zoomTransitionId,\n      },\n    };\n  }, [href, zoomTransitionId]);\n  return { ZoomTransitionWrapper, href: computedHref };\n}\n"]}