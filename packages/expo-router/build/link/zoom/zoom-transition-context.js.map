{"version":3,"file":"zoom-transition-context.js","sourceRoot":"","sources":["../../../src/link/zoom/zoom-transition-context.tsx"],"names":[],"mappings":";AAAA,YAAY,CAAC;;;AA6Bb,kFA+BC;AA1DD,iCAA8D;AAE9D,2EAAsE;AACtE,6DAIgC;AAChC,wEAA8D;AAYjD,QAAA,2BAA2B,GACtC,IAAA,qBAAa,EAAuC,SAAS,CAAC,CAAC;AAEpD,QAAA,2BAA2B,GAAG,IAAA,qBAAa,EAAgC;IACtF,UAAU,EAAE,IAAI;CACjB,CAAC,CAAC;AAEH,SAAgB,mCAAmC,CAAC,EAClD,KAAK,EACL,QAAQ,GAC8B;IACtC,MAAM,SAAS,GAAG,IAAA,kCAAY,GAAE,CAAC;IACjC,IACE,IAAA,mDAAuB,GAAE;QACzB,CAAC,SAAS;QACV,KAAK;QACL,OAAO,KAAK,KAAK,QAAQ;QACzB,QAAQ,IAAI,KAAK;QACjB,OAAO,KAAK,CAAC,MAAM,KAAK,QAAQ;QAChC,KAAK,IAAI,KAAK;QACd,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,EAC7B,CAAC;QACD,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC;QAClC,MAAM,cAAc,GAAG,IAAA,8CAA2B,EAAC,MAAM,CAAC,CAAC;QAC3D,MAAM,gBAAgB,GACpB,cAAc,CAAC,4EAAyD,CAAC,CAAC;QAC5E,MAAM,sBAAsB,GAC1B,cAAc,CAAC,4EAAyD,CAAC,CAAC;QAC5E,MAAM,iBAAiB,GAAG,CAAC,CAAC,gBAAgB,IAAI,sBAAsB,KAAK,KAAK,CAAC,GAAG,CAAC;QACrF,IAAI,iBAAiB,IAAI,OAAO,gBAAgB,KAAK,QAAQ,EAAE,CAAC;YAC9D,OAAO,CACL,CAAC,mCAA2B,CAAC,KAAK,CAAC,CAAC,EAAE,UAAU,EAAE,gBAAgB,EAAE,CAAC,CACnE;UAAA,CAAC,QAAQ,CACX;QAAA,EAAE,mCAA2B,CAAC,CAC/B,CAAC;QACJ,CAAC;IACH,CAAC;IACD,OAAO,QAAQ,CAAC;AAClB,CAAC","sourcesContent":["'use client';\n\nimport { createContext, type PropsWithChildren } from 'react';\n\nimport { isZoomTransitionEnabled } from './ZoomTransitionEnabler.ios';\nimport {\n  getInternalExpoRouterParams,\n  INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SCREEN_ID_PARAM_NAME,\n  INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME,\n} from '../../navigationParams';\nimport { useIsPreview } from '../preview/PreviewRouteContext';\n\nexport type ZoomTransitionSourceContextValueType =\n  | {\n      canAddSource: boolean;\n      identifier: string;\n      addSource: () => void;\n      removeSource: () => void;\n      reason: string | undefined;\n    }\n  | undefined;\n\nexport const ZoomTransitionSourceContext =\n  createContext<ZoomTransitionSourceContextValueType>(undefined);\n\nexport const ZoomTransitionTargetContext = createContext<{ identifier: string | null }>({\n  identifier: null,\n});\n\nexport function ZoomTransitionTargetContextProvider({\n  route,\n  children,\n}: PropsWithChildren<{ route: unknown }>) {\n  const isPreview = useIsPreview();\n  if (\n    isZoomTransitionEnabled() &&\n    !isPreview &&\n    route &&\n    typeof route === 'object' &&\n    'params' in route &&\n    typeof route.params === 'object' &&\n    'key' in route &&\n    typeof route.key === 'string'\n  ) {\n    const params = route.params ?? {};\n    const internalParams = getInternalExpoRouterParams(params);\n    const zoomTransitionId =\n      internalParams[INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME];\n    const zoomTransitionScreenId =\n      internalParams[INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SCREEN_ID_PARAM_NAME];\n    const hasZoomTransition = !!zoomTransitionId && zoomTransitionScreenId === route.key;\n    if (hasZoomTransition && typeof zoomTransitionId === 'string') {\n      return (\n        <ZoomTransitionTargetContext value={{ identifier: zoomTransitionId }}>\n          {children}\n        </ZoomTransitionTargetContext>\n      );\n    }\n  }\n  return children;\n}\n"]}