{"version":3,"file":"useZoomTransitionPrimitives.ios.js","sourceRoot":"","sources":["../../../src/link/zoom/useZoomTransitionPrimitives.ios.tsx"],"names":[],"mappings":";AAAA,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeb,kEA2CC;AAxDD,kDAA2C;AAC3C,+CAAuC;AAEvC,mEAAkE;AAClE,6DAAmG;AACnG,wEAA8D;AAE9D,uEAAwE;AAExE,MAAM,cAAc,GAAG,CAAC,KAAoC,EAAE,EAAE;IAC9D,OAAO,KAAK,CAAC,QAAQ,CAAC;AACxB,CAAC,CAAC;AAEF,SAAgB,2BAA2B,CAAC,EAAE,mBAAmB,EAAE,IAAI,EAAa;IAClF,MAAM,SAAS,GAAG,IAAA,kCAAY,GAAE,CAAC;IACjC,MAAM,gBAAgB,GAAG,IAAA,eAAO,EAC9B,GAAG,EAAE,CACH,mBAAmB,KAAK,MAAM;QAC9B,CAAC,SAAS;QACV,OAAO,CAAC,GAAG,CAAC,OAAO,KAAK,KAAK;QAC7B,IAAA,+CAAuB,GAAE;QACvB,CAAC,CAAC,IAAA,mBAAM,GAAE;QACV,CAAC,CAAC,SAAS,EACf,EAAE,CACH,CAAC;IACF,MAAM,qBAAqB,GAAG,IAAA,eAAO,EAAC,GAAG,EAAE;QACzC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtB,OAAO,cAAc,CAAC;QACxB,CAAC;QACD,OAAO,CAAC,KAAoC,EAAE,EAAE,CAAC,CAC/C,CAAC,qDAA2B,CAAC,KAAK,CAAC,CAAC,EAAE,UAAU,EAAE,gBAAgB,EAAE,CAAC,CACnE;QAAA,CAAC,KAAK,CAAC,QAAQ,CACjB;MAAA,EAAE,qDAA2B,CAAC,CAC/B,CAAC;IACJ,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC;IACvB,MAAM,YAAY,GAAG,IAAA,eAAO,EAAC,GAAG,EAAE;QAChC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtB,OAAO,IAAI,CAAC;QACd,CAAC;QACD,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,CAAC;YAC7B,OAAO;gBACL,QAAQ,EAAE,IAAI;gBACd,MAAM,EAAE;oBACN,CAAC,4EAAyD,CAAC,EAAE,gBAAgB;iBAC9E;aACF,CAAC;QACJ,CAAC;QACD,OAAO;YACL,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,MAAM,EAAE;gBACN,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,EAAE,CAAC;gBACtB,CAAC,4EAAyD,CAAC,EAAE,gBAAgB;aAC9E;SACF,CAAC;IACJ,CAAC,EAAE,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAC7B,OAAO,EAAE,qBAAqB,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;AACvD,CAAC","sourcesContent":["'use client';\n\nimport { nanoid } from 'nanoid/non-secure';\nimport React, { useMemo } from 'react';\n\nimport { isZoomTransitionEnabled } from './ZoomTransitionEnabler';\nimport { INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME } from '../../navigationParams';\nimport { useIsPreview } from '../preview/PreviewRouteContext';\nimport { LinkProps } from '../useLinkHooks';\nimport { ZoomTransitionSourceContext } from './zoom-transition-context';\n\nconst NOOP_COMPONENT = (props: { children: React.ReactNode }) => {\n  return props.children;\n};\n\nexport function useZoomTransitionPrimitives({ unstable_transition, href }: LinkProps) {\n  const isPreview = useIsPreview();\n  const zoomTransitionId = useMemo(\n    () =>\n      unstable_transition === 'zoom' &&\n      !isPreview &&\n      process.env.EXPO_OS === 'ios' &&\n      isZoomTransitionEnabled()\n        ? nanoid()\n        : undefined,\n    []\n  );\n  const ZoomTransitionWrapper = useMemo(() => {\n    if (!zoomTransitionId) {\n      return NOOP_COMPONENT;\n    }\n    return (props: { children: React.ReactNode }) => (\n      <ZoomTransitionSourceContext value={{ identifier: zoomTransitionId }}>\n        {props.children}\n      </ZoomTransitionSourceContext>\n    );\n  }, [zoomTransitionId]);\n  const computedHref = useMemo(() => {\n    if (!zoomTransitionId) {\n      return href;\n    }\n    if (typeof href === 'string') {\n      return {\n        pathname: href,\n        params: {\n          [INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME]: zoomTransitionId,\n        },\n      };\n    }\n    return {\n      pathname: href.pathname,\n      params: {\n        ...(href.params ?? {}),\n        [INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME]: zoomTransitionId,\n      },\n    };\n  }, [href, zoomTransitionId]);\n  return { ZoomTransitionWrapper, href: computedHref };\n}\n"]}