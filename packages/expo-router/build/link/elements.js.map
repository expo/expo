{"version":3,"file":"elements.js","sourceRoot":"","sources":["../../src/link/elements.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\n\nimport type { ImageRef } from 'expo-image';\nimport React, { isValidElement, use, useId, type PropsWithChildren, type ReactNode } from 'react';\nimport type { ViewStyle } from 'react-native';\nimport type { SFSymbol } from 'sf-symbols-typescript';\n\nimport { InternalLinkPreviewContext } from './InternalLinkPreviewContext';\nimport { NativeMenuContext } from './NativeMenuContext';\nimport { Icon, Label } from '../primitives';\nimport { HrefPreview } from './preview/HrefPreview';\nimport { useIsPreview } from './preview/PreviewRouteContext';\nimport { NativeLinkPreviewAction, NativeLinkPreviewContent } from './preview/native';\nimport { Slot } from '../ui/Slot';\nimport { LinkAppleZoom } from './zoom/link-apple-zoom';\nimport { getFirstChildOfType } from '../utils/children';\n\nexport interface LinkMenuActionProps {\n  /**\n   * The title of the menu item.\n   */\n  children?: ReactNode;\n  /**\n   * If `true`, the menu item will be displayed as destructive.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenuelement/attributes/destructive) for more information.\n   */\n  destructive?: boolean;\n  /**\n   * If `true`, the menu item will be disabled and not selectable.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenuelement/attributes/disabled) for more information.\n   */\n  disabled?: boolean;\n  /**\n   * An elaborated title that explains the purpose of the action.\n   */\n  discoverabilityLabel?: string;\n  /**\n   * Whether the menu element should be hidden.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenuelement/attributes/hidden) for more information.\n   *\n   * @default false\n   */\n  hidden?: boolean;\n  // TODO: support ImageSourcePropType icons in addition to SFSymbols\n  /**\n   * SF Symbol displayed alongside the menu item.\n   */\n  icon?: SFSymbol;\n  /**\n   * Custom image loaded using `useImage()` hook from `expo-image`.\n   * Takes priority over `icon` (SF Symbol) when both are provided.\n   *\n   * @example\n   * ```tsx\n   * import { useImage } from 'expo-image';\n   * import { Link } from 'expo-router';\n   *\n   * const customIcon = useImage('https://simpleicons.org/icons/expo.svg', {\n   *   maxWidth: 24,\n   *   maxHeight: 24,\n   * });\n   *\n   * <Link.Menu title=\"Menu\">\n   *   <Link.MenuAction image={customIcon} title=\"Action\" onPress={() => {}} />\n   * </Link.Menu>\n   * ```\n   */\n  image?: ImageRef | null;\n  /**\n   * If `true`, the menu item will be displayed as selected.\n   */\n  isOn?: boolean;\n  onPress?: () => void;\n  /**\n   * An optional subtitle for the menu item.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenuelement/subtitle) for more information.\n   */\n  subtitle?: string;\n  /**\n   * The title of the menu item.\n   * @deprecated Use `children` prop instead.\n   */\n  title?: string;\n  /**\n   * If `true`, the menu will be kept presented after the action is selected.\n   *\n   * This is marked as unstable, because when action is selected it will recreate the menu,\n   * which will close all opened submenus and reset the scroll position.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenuelement/attributes/keepsmenupresented) for more information.\n   */\n  unstable_keepPresented?: boolean;\n}\n\n/**\n * This component renders a context menu action for a link.\n * It should only be used as a child of `Link.Menu` or `LinkMenu`.\n *\n * > **Note**: You can use the alias `Link.MenuAction` for this component.\n *\n * @platform ios\n */\nexport function LinkMenuAction(props: LinkMenuActionProps) {\n  const identifier = useId();\n  if (useIsPreview() || process.env.EXPO_OS !== 'ios' || !use(NativeMenuContext)) {\n    return null;\n  }\n  const { unstable_keepPresented, onPress, children, title, ...rest } = props;\n  const areChildrenString = typeof children === 'string';\n  const label = areChildrenString\n    ? (children as string)\n    : getFirstChildOfType(children, Label)?.props.children;\n  const iconComponent =\n    !props.icon && !areChildrenString ? getFirstChildOfType(children, Icon) : undefined;\n  const icon =\n    props.icon ??\n    (iconComponent?.props && 'sf' in iconComponent.props ? iconComponent.props.sf : undefined);\n  const sf = typeof icon === 'string' ? icon : undefined;\n  return (\n    <NativeLinkPreviewAction\n      {...rest}\n      identifier={identifier}\n      icon={sf}\n      title={label ?? title ?? ''}\n      keepPresented={unstable_keepPresented}\n      onSelected={() => onPress?.()}\n    />\n  );\n}\n\nexport interface LinkMenuProps {\n  /**\n   * The title of the menu item\n   */\n  title?: string;\n  /**\n   * An optional subtitle for the submenu. Does not appear on `inline` menus.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenuelement/subtitle) for more information.\n   */\n  subtitle?: string;\n  /**\n   * Optional SF Symbol displayed alongside the menu item.\n   */\n  icon?: SFSymbol;\n  /**\n   * Custom image loaded using `useImage()` hook from `expo-image`.\n   * Takes priority over `icon` (SF Symbol) when both are provided.\n   *\n   * @example\n   * ```tsx\n   * import { useImage } from 'expo-image';\n   * import { Link } from 'expo-router';\n   *\n   * const customIcon = useImage('https://simpleicons.org/icons/expo.svg', {\n   *   maxWidth: 24,\n   *   maxHeight: 24,\n   * });\n   *\n   * <Link.Menu image={customIcon} title=\"Menu\">\n   *   <Link.MenuAction title=\"Action\" onPress={() => {}} />\n   * </Link.Menu>\n   * ```\n   */\n  image?: ImageRef | null;\n  /**\n   * If `true`, the menu will be displayed as a palette.\n   * This means that the menu will be displayed as one row.\n   * The `elementSize` property is ignored when palette is used, all items will be `elementSize=\"small\"`. Use `elementSize=\"medium\"` instead of `palette` to display actions with titles horizontally.\n   *\n   * > **Note**: Palette menus are only supported in submenus.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenu/options-swift.struct/displayaspalette) for more information.\n   */\n  palette?: boolean;\n  /**\n   * @deprecated Use `palette` prop instead.\n   */\n  displayAsPalette?: boolean;\n  /**\n   * If `true`, the menu will be displayed inline.\n   * This means that the menu will not be collapsed\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenu/options-swift.struct/displayinline) for more information.\n   */\n  inline?: boolean;\n  /**\n   * @deprecated Use `inline` prop instead.\n   */\n  displayInline?: boolean;\n  /**\n   * If `true`, the menu item will be displayed as destructive.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenu/options-swift.struct/destructive) for more information.\n   */\n  destructive?: boolean;\n  /**\n   * The preferred size of the menu elements.\n   * `elementSize` property is ignored when `palette` is used.\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uimenu/preferredelementsize) for more information.\n   *\n   * @platform iOS 16.0+\n   */\n  elementSize?: 'small' | 'medium' | 'large' | 'auto';\n  children?: React.ReactNode;\n}\n\n/**\n * Groups context menu actions for a link.\n *\n * If multiple `Link.Menu` components are used within a single `Link`, only the first will be rendered.\n * Only `Link.MenuAction` and `LinkMenuAction` components are allowed as children.\n *\n * @example\n * ```tsx\n * <Link.Menu>\n *   <Link.MenuAction title=\"Action 1\" onPress={() => {}} />\n *   <Link.MenuAction title=\"Action 2\" onPress={() => {}} />\n * </Link.Menu>\n * ```\n *\n * > **Note**: You can use the alias `Link.Menu` for this component.\n *\n * @platform ios\n */\nexport const LinkMenu: React.FC<LinkMenuProps> = (props) => {\n  const identifier = useId();\n  if (useIsPreview() || process.env.EXPO_OS !== 'ios' || !use(NativeMenuContext)) {\n    return null;\n  }\n  const children = React.Children.toArray(props.children).filter(\n    (child) => isValidElement(child) && (child.type === LinkMenuAction || child.type === LinkMenu)\n  );\n  const displayAsPalette = props.palette ?? props.displayAsPalette;\n  const displayInline = props.inline ?? props.displayInline;\n  return (\n    <NativeLinkPreviewAction\n      {...props}\n      displayAsPalette={displayAsPalette}\n      displayInline={displayInline}\n      preferredElementSize={props.elementSize}\n      title={props.title ?? ''}\n      onSelected={() => {}}\n      children={children}\n      identifier={identifier}\n    />\n  );\n};\n\nexport type LinkPreviewStyle = Omit<ViewStyle, 'position' | 'width' | 'height'> & {\n  /**\n   * Sets the preferred width of the preview.\n   * If not set, full width of the screen will be used.\n   *\n   * This is only **preferred** width, the actual width may be different\n   */\n  width?: number;\n\n  /**\n   * Sets the preferred height of the preview.\n   * If not set, full height of the screen will be used.\n   *\n   * This is only **preferred** height, the actual height may be different\n   */\n  height?: number;\n};\n\nexport interface LinkPreviewProps {\n  children?: React.ReactNode;\n  /**\n   * Custom styles for the preview container.\n   *\n   * Note that some styles may not work, as they are limited or reset by the native view\n   */\n  style?: LinkPreviewStyle;\n}\n\n/**\n * A component used to render and customize the link preview.\n *\n * If `Link.Preview` is used without any props, it will render a preview of the `href` passed to the `Link`.\n *\n * If multiple `Link.Preview` components are used within a single `Link`, only the first one will be rendered.\n *\n * To customize the preview, you can pass custom content as children.\n *\n * @example\n * ```tsx\n * <Link href=\"/about\">\n *   <Link.Preview>\n *     <Text>Custom Preview Content</Text>\n *   </Link.Preview>\n * </Link>\n * ```\n *\n * @example\n * ```tsx\n * <Link href=\"/about\">\n *   <Link.Preview />\n * </Link>\n * ```\n *\n * > **Note**: You can use the alias `Link.Preview` for this component.\n *\n * @platform ios\n */\nexport function LinkPreview(props: LinkPreviewProps) {\n  const { children, style } = props;\n  const internalPreviewContext = use(InternalLinkPreviewContext);\n  if (useIsPreview() || process.env.EXPO_OS !== 'ios' || !internalPreviewContext) {\n    return null;\n  }\n  const { isVisible, href } = internalPreviewContext;\n  const { width, height, ...restOfStyle } = style ?? {};\n  const contentSize = {\n    width: width ?? 0,\n    height: height ?? 0,\n  };\n  let content: React.ReactNode;\n  if (children) {\n    content = isVisible ? children : null;\n  } else {\n    content = isVisible ? <HrefPreview href={href} /> : null;\n  }\n\n  return (\n    <NativeLinkPreviewContent style={restOfStyle} preferredContentSize={contentSize}>\n      {content}\n    </NativeLinkPreviewContent>\n  );\n}\n\nexport interface LinkTriggerProps extends PropsWithChildren {\n  /**\n   * A shorthand for enabling the Apple Zoom Transition on this link trigger.\n   *\n   * When set to `true`, the trigger will be wrapped with `Link.AppleZoom`.\n   * If another `Link.AppleZoom` is already used inside `Link.Trigger`, an error\n   * will be thrown.\n   *\n   * @platform ios 18+\n   */\n  withAppleZoom?: boolean;\n}\n\n/**\n * Serves as the trigger for a link.\n * The content inside this component will be rendered as part of the base link.\n *\n * If multiple `Link.Trigger` components are used within a single `Link`, only the first will be rendered.\n *\n * @example\n * ```tsx\n * <Link href=\"/about\">\n *   <Link.Trigger>\n *     Trigger\n *   </Link.Trigger>\n * </Link>\n * ```\n *\n * > **Note**: You can use the alias `Link.Trigger` for this component.\n *\n * @platform ios\n */\nexport function LinkTrigger({ withAppleZoom, ...props }: LinkTriggerProps) {\n  if (React.Children.count(props.children) > 1 || !isValidElement(props.children)) {\n    // If onPress is passed, this means that Link passed props to this component.\n    // We can assume that asChild is used, so we throw an error, because link will not work in this case.\n    if (props && typeof props === 'object' && 'onPress' in props) {\n      throw new Error(\n        'When using Link.Trigger in an asChild Link, you must pass a single child element that will emit onPress event.'\n      );\n    }\n    return props.children;\n  }\n  const content = <Slot {...props} />;\n  if (withAppleZoom) {\n    return <LinkAppleZoom>{content}</LinkAppleZoom>;\n  }\n  return content;\n}\n"]}