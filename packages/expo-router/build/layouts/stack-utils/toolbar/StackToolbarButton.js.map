{"version":3,"file":"StackToolbarButton.js","sourceRoot":"","sources":["../../../../src/layouts/stack-utils/toolbar/StackToolbarButton.tsx"],"names":[],"mappings":";AAAA,YAAY,CAAC;;;AAuMb,oGAaC;AAlND,2CAAqD;AAIrD,qFAAuE;AACvE,uCAAgD;AAChD,sCAImB;AAwHnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAqCG;AACI,MAAM,kBAAkB,GAAsC,CAAC,KAAK,EAAE,EAAE;IAC7E,MAAM,SAAS,GAAG,IAAA,6BAAmB,GAAE,CAAC;IACxC,MAAM,WAAW,GAAG,IAAA,0DAAiD,EAAC,KAAK,CAAC,CAAC;IAE7E,kCAAkC;IAClC,MAAM,aAAa,GACjB,WAAW,CAAC,IAAI,EAAE,IAAI,KAAK,UAAU;QACnC,CAAC,CAAE,MAAM,WAAW,CAAC,IAAI,CAAC,IAAI,EAAY;QAC1C,CAAC,CAAC,WAAW,CAAC,IAAI,EAAE,MAAM,CAAC;IAE/B,MAAM,WAAW,GAAG,IAAA,qBAAQ,EAAC,IAAA,+BAAsB,EAAC,aAAa,CAAC,EAAE;QAClE,QAAQ,EAAE,EAAE;QACZ,SAAS,EAAE,EAAE;KACd,CAAC,CAAC;IAEH,IAAI,SAAS,KAAK,QAAQ,EAAE,CAAC;QAC3B,OAAO,CACL,CAAC,oDAAmB,CAClB,IAAI,WAAW,CAAC,CAChB,IAAI,CAAC,CAAC,SAAS,CAAC,CAChB,KAAK,CAAC,CAAC,WAAW,IAAI,KAAK,CAAC,KAAK,CAAC,CAClC,kBAAkB,CAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAC5C,CACH,CAAC;IACJ,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AA3BW,QAAA,kBAAkB,sBA2B7B;AAEF,SAAgB,4CAA4C,CAC1D,KAA8B;IAE9B,IAAI,KAAK,CAAC,MAAM,EAAE,CAAC;QACjB,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,OAAO;QACL,GAAG,IAAA,0DAAiD,EAAC,KAAK,CAAC;QAC3D,IAAI,EAAE,QAAQ;QACd,OAAO,EAAE,KAAK,CAAC,OAAO,IAAI,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC;QACpC,QAAQ,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ;KAC3B,CAAC;AACJ,CAAC","sourcesContent":["'use client';\nimport type { NativeStackHeaderItemButton } from '@react-navigation/native-stack';\nimport { useImage, type ImageRef } from 'expo-image';\nimport type { ReactNode } from 'react';\nimport type { StyleProp, TextStyle } from 'react-native';\n\nimport { NativeToolbarButton } from './bottom-toolbar-native-elements';\nimport { useToolbarPlacement } from './context';\nimport {\n  convertStackHeaderSharedPropsToRNSharedHeaderItem,\n  getImageSourceFromIcon,\n  type StackHeaderItemSharedProps,\n} from '../shared';\n\nexport interface StackToolbarButtonProps {\n  accessibilityLabel?: string;\n  accessibilityHint?: string;\n  /**\n   * There are two ways to specify the content of the button:\n   *\n   * @example\n   * ```tsx\n   * import { Stack } from 'expo-router';\n   *\n   * export default function Page() {\n   *   return (\n   *     <>\n   *       <Stack.Toolbar placement=\"left\">\n   *         <Stack.Toolbar.Button icon=\"star.fill\">As text passed as children</Stack.Toolbar.Button>\n   *       </Stack.Toolbar>\n   *       <ScreenContent />\n   *     </>\n   *   );\n   * }\n   * ```\n   *\n   * @example\n   * ```tsx\n   * import { Stack } from 'expo-router';\n   *\n   * export default function Page() {\n   *   return (\n   *     <>\n   *       <Stack.Toolbar placement=\"left\">\n   *         <Stack.Toolbar.Button>\n   *           <Stack.Toolbar.Icon sf=\"star.fill\" />\n   *           <Stack.Toolbar.Label>As components</Stack.Toolbar.Label>\n   *           <Stack.Toolbar.Badge>3</Stack.Toolbar.Badge>\n   *         </Stack.Toolbar.Button>\n   *       </Stack.Toolbar>\n   *       <ScreenContent />\n   *     </>\n   *   );\n   * }\n   * ```\n   *\n   * > **Note**: When icon is used, the label will not be shown and will be used for accessibility purposes only. Badge is only supported in left/right placements, not in bottom (iOS toolbar limitation).\n   */\n  children?: ReactNode;\n  disabled?: boolean;\n  /**\n   * Whether the button should be hidden.\n   *\n   * @default false\n   */\n  hidden?: boolean;\n  /**\n   * Whether to hide the shared background.\n   *\n   * @platform iOS 26+\n   */\n  hidesSharedBackground?: boolean;\n  /**\n   * Icon to display in the button.\n   *\n   * Can be a string representing an SFSymbol (prefixed with 'sf:'), url or an image source.\n   */\n  icon?: StackHeaderItemSharedProps['icon'];\n  /**\n   * Image to display in the button.\n   *\n   * > **Note**: If both `icon` and `image` are provided, `image` takes precedence.\n   *\n   * > **Note**: This prop is only supported in `Stack.Toolbar` with `placement=\"bottom\"`.\n   */\n  image?: ImageRef;\n  /**\n   * Controls how image-based icons are rendered on iOS.\n   *\n   * - `'template'`: iOS applies tint color to the icon\n   * - `'original'`: Preserves original icon colors (useful for multi-color icons)\n   *\n   * **Default behavior:**\n   * - If `tintColor` is specified, defaults to `'template'`\n   * - If no `tintColor`, defaults to `'original'`\n   *\n   * This prop only affects image-based icons (not SF Symbols).\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uiimage/renderingmode-swift.enum) for more information.\n   *\n   * @platform ios\n   */\n  iconRenderingMode?: 'template' | 'original';\n  onPress?: () => void;\n  /**\n   * Whether to separate the background of this item from other header items.\n   *\n   * @default false\n   */\n  separateBackground?: boolean;\n  /**\n   * Whether the button is in a selected state\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uibarbuttonitem/isselected) for more information\n   */\n  selected?: boolean;\n  /**\n   * Style for the label of the header item.\n   */\n  style?: StyleProp<TextStyle>;\n  /**\n   * The tint color to apply to the button item\n   *\n   * @see [Apple documentation](https://developer.apple.com/documentation/uikit/uibarbuttonitem/tintcolor) for more information.\n   */\n  tintColor?: StackHeaderItemSharedProps['tintColor'];\n  /**\n   * @default 'plain'\n   */\n  variant?: StackHeaderItemSharedProps['variant'];\n}\n\n/**\n * A button used inside `Stack.Toolbar`.\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Layout() {\n *   return (\n *     <Stack>\n *       <Stack.Screen name=\"index\">\n *         <Stack.Toolbar placement=\"left\">\n *           <Stack.Toolbar.Button icon=\"arrow.left.circle\" onPress={() => alert('Left pressed')} />\n *         </Stack.Toolbar>\n *       </Stack.Screen>\n *     </Stack>\n *   );\n * }\n * ```\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Page() {\n *   return (\n *     <>\n *       <Stack.Toolbar placement=\"left\">\n *         <Stack.Toolbar.Button icon=\"arrow.left.circle\" onPress={() => alert('Left pressed')} />\n *       </Stack.Toolbar>\n *       <ScreenContent />\n *     </>\n *   );\n * }\n * ```\n *\n * @platform ios\n */\nexport const StackToolbarButton: React.FC<StackToolbarButtonProps> = (props) => {\n  const placement = useToolbarPlacement();\n  const sharedProps = convertStackHeaderSharedPropsToRNSharedHeaderItem(props);\n\n  // Add 'sf:' prefix for SF Symbols\n  const processedIcon =\n    sharedProps.icon?.type === 'sfSymbol'\n      ? (`sf:${sharedProps.icon.name}` as const)\n      : sharedProps.icon?.source;\n\n  const loadedImage = useImage(getImageSourceFromIcon(processedIcon), {\n    maxWidth: 24,\n    maxHeight: 24,\n  });\n\n  if (placement === 'bottom') {\n    return (\n      <NativeToolbarButton\n        {...sharedProps}\n        icon={undefined}\n        image={loadedImage ?? props.image}\n        imageRenderingMode={props.iconRenderingMode}\n      />\n    );\n  }\n\n  return null;\n};\n\nexport function convertStackToolbarButtonPropsToRNHeaderItem(\n  props: StackToolbarButtonProps\n): NativeStackHeaderItemButton | undefined {\n  if (props.hidden) {\n    return undefined;\n  }\n\n  return {\n    ...convertStackHeaderSharedPropsToRNSharedHeaderItem(props),\n    type: 'button',\n    onPress: props.onPress ?? (() => {}),\n    selected: !!props.selected,\n  };\n}\n"]}