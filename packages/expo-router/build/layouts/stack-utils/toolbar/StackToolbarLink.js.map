{"version":3,"file":"StackToolbarLink.js","sourceRoot":"","sources":["../../../../src/layouts/stack-utils/toolbar/StackToolbarLink.tsx"],"names":[],"mappings":";AAAA,YAAY,CAAC;;;AAEb,iCAA0D;AAG1D,qFAAqE;AACrE,uCAAgD;AAEhD,sDAAwE;AACxE,4DAA8F;AAC9F,sCAGmB;AAsGnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAsCG;AACI,MAAM,gBAAgB,GAAoC,CAAC,KAAK,EAAE,EAAE;IACzE,MAAM,SAAS,GAAG,IAAA,6BAAmB,GAAE,CAAC;IAExC,MAAM,iBAAiB,GAAG,IAAA,eAAO,EAC/B,GAAG,EAAE,CAAC,IAAA,wCAA6B,EAAC,KAAK,CAAC,QAAQ,EAAE,kBAAkB,CAAC,EACvE,CAAC,KAAK,CAAC,QAAQ,CAAC,CACjB,CAAC;IAEF,IAAI,SAAS,KAAK,QAAQ,EAAE,CAAC;QAC3B,MAAM,WAAW,GAAG,gBAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QACrD,MAAM,qBAAqB,GACzB,WAAW,CAAC,MAAM,GAAG,CAAC;YACtB,OAAO,KAAK,CAAC,QAAQ,KAAK,QAAQ;YAClC,iBAAiB,CAAC,MAAM,KAAK,WAAW,CAAC,MAAM,CAAC;QAElD,IAAI,qBAAqB,EAAE,CAAC;YAC1B,qFAAqF;YACrF,OAAO,CACL,CAAC,kDAAiB,CAChB,iBAAiB,CAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAC3C,kBAAkB,CAAC,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAC7C,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CACjB,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CACrB,QAAQ,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CACzB,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CACrB,qBAAqB,CAAC,CAAC,KAAK,CAAC,qBAAqB,CAAC,CACnD,kBAAkB,CAAC,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAC7C,SAAS,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAC3B,OAAO,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CACvB;UAAA,CAAC,KAAK,CAAC,QAAQ,CACjB;QAAA,EAAE,kDAAiB,CAAC,CACrB,CAAC;QACJ,CAAC;QAED,uEAAuE;QACvE,MAAM,WAAW,GAAG,IAAA,0DAAiD,EAAC,KAAK,CAAC,CAAC;QAC7E,MAAM,IAAI,GAAG,WAAW,EAAE,IAAI,EAAE,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC;QACxF,OAAO,CACL,CAAC,kDAAiB,CAChB,IAAI,WAAW,CAAC,CAChB,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CACjB,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,CAAC,IAAI,CAAC,CACX,KAAK,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CACnB,kBAAkB,CAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAC5C,CACH,CAAC;IACJ,CAAC;IAED,iFAAiF;IACjF,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAnDW,QAAA,gBAAgB,oBAmD3B;AAEF,MAAM,kBAAkB,GAAG,CAAC,qCAAiB,EAAE,oCAAgB,EAAE,qCAAiB,CAAC,CAAC","sourcesContent":["'use client';\nimport type { ImageRef } from 'expo-image';\nimport { Children, useMemo, type ReactNode } from 'react';\nimport type { StyleProp, TextStyle } from 'react-native';\n\nimport { NativeToolbarLink } from './bottom-toolbar-native-elements';\nimport { useToolbarPlacement } from './context';\nimport type { Href } from '../../../types';\nimport { filterAllowedChildrenElements } from '../../../utils/children';\nimport { StackToolbarLabel, StackToolbarIcon, StackToolbarBadge } from '../common-primitives';\nimport {\n  convertStackHeaderSharedPropsToRNSharedHeaderItem,\n  type StackHeaderItemSharedProps,\n} from '../shared';\n\nexport interface StackToolbarLinkProps {\n  /**\n   * Route to navigate to (same as Link's href).\n   */\n  href: Href;\n  /**\n   * Whether to use push, navigate, or replace.\n   *\n   * @default 'push'\n   */\n  action?: 'push' | 'navigate' | 'replace';\n  accessibilityLabel?: string;\n  accessibilityHint?: string;\n  /**\n   * Content of the link. Can be:\n   *\n   * - A string label\n   * - Composition of `Stack.Toolbar.Icon`, `Stack.Toolbar.Label`, and `Stack.Toolbar.Badge`\n   * - Arbitrary React elements (rendered as a custom view bar button item)\n   *\n   * When arbitrary children are provided, the link renders as a custom view toolbar item\n   * (like `Stack.Toolbar.View`) that navigates with a zoom transition on press.\n   *\n   * @example\n   * ```tsx\n   * // Using icon prop\n   * <Stack.Toolbar.Link href=\"/new-item\" icon=\"plus\" />\n   *\n   * // Using custom view children\n   * <Stack.Toolbar.Link href=\"/layers\">\n   *   <View style={{ flexDirection: 'row', gap: 8 }}>\n   *     <Image source={'sf:square.3.layers.3d.down.right'} />\n   *     <Text>Layers</Text>\n   *   </View>\n   * </Stack.Toolbar.Link>\n   * ```\n   */\n  children?: ReactNode;\n  disabled?: boolean;\n  /**\n   * Whether the link should be hidden.\n   *\n   * @default false\n   */\n  hidden?: boolean;\n  /**\n   * Whether to hide the shared background.\n   *\n   * @platform iOS 26+\n   */\n  hidesSharedBackground?: boolean;\n  /**\n   * Icon to display in the link.\n   *\n   * Can be a string representing an SFSymbol or an image source.\n   *\n   * > **Note**: When used in `placement=\"bottom\"`, only string SFSymbols are supported. Use the `image` prop to provide custom images.\n   */\n  icon?: StackHeaderItemSharedProps['icon'];\n  /**\n   * Image to display in the link.\n   *\n   * > **Note**: This prop is only supported in toolbar with `placement=\"bottom\"`.\n   */\n  image?: ImageRef;\n  /**\n   * Controls how image-based icons are rendered on iOS.\n   *\n   * - `'template'`: iOS applies tint color to the icon\n   * - `'original'`: Preserves original icon colors (useful for multi-color icons)\n   *\n   * **Default behavior:**\n   * - If `tintColor` is specified, defaults to `'template'`\n   * - If no `tintColor`, defaults to `'original'`\n   *\n   * This prop only affects image-based icons (not SF Symbols).\n   *\n   * @platform ios\n   */\n  iconRenderingMode?: 'template' | 'original';\n  /**\n   * Whether to separate the background of this item from other header items.\n   *\n   * @default false\n   */\n  separateBackground?: boolean;\n  /**\n   * Style for the label of the header item.\n   */\n  style?: StyleProp<TextStyle>;\n  /**\n   * The tint color to apply to the link item.\n   */\n  tintColor?: StackHeaderItemSharedProps['tintColor'];\n  /**\n   * @default 'plain'\n   */\n  variant?: StackHeaderItemSharedProps['variant'];\n}\n\n/**\n * A link used inside `Stack.Toolbar` that navigates with a zoom transition from the bar button item on iOS 26+.\n *\n * Supports two modes:\n * - **Icon/label mode**: Use `icon` prop or `Stack.Toolbar.Icon`/`Stack.Toolbar.Label` children for standard bar button items.\n * - **Custom view mode**: Pass arbitrary React elements as children to render a custom view that navigates on press.\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Page() {\n *   return (\n *     <>\n *       <Stack.Toolbar>\n *         <Stack.Toolbar.Spacer />\n *         <Stack.Toolbar.Link href=\"/new-item\" icon=\"plus\" />\n *         <Stack.Toolbar.Spacer />\n *       </Stack.Toolbar>\n *       <ScreenContent />\n *     </>\n *   );\n * }\n * ```\n *\n * @example\n * ```tsx\n * <Stack.Toolbar>\n *   <Stack.Toolbar.Link href=\"/layers\">\n *     <View style={{ flexDirection: 'row', gap: 8 }}>\n *       <Image source={'sf:square.3.layers.3d.down.right'} />\n *       <Text>Layers</Text>\n *     </View>\n *   </Stack.Toolbar.Link>\n * </Stack.Toolbar>\n * ```\n *\n * @platform ios\n */\nexport const StackToolbarLink: React.FC<StackToolbarLinkProps> = (props) => {\n  const placement = useToolbarPlacement();\n\n  const primitiveChildren = useMemo(\n    () => filterAllowedChildrenElements(props.children, PRIMITIVE_CHILDREN),\n    [props.children]\n  );\n\n  if (placement === 'bottom') {\n    const allChildren = Children.toArray(props.children);\n    const hasCustomViewChildren =\n      allChildren.length > 0 &&\n      typeof props.children !== 'string' &&\n      primitiveChildren.length !== allChildren.length;\n\n    if (hasCustomViewChildren) {\n      // Custom view mode: pass children through to render as a custom view bar button item\n      return (\n        <NativeToolbarLink\n          accessibilityHint={props.accessibilityHint}\n          accessibilityLabel={props.accessibilityLabel}\n          href={props.href}\n          action={props.action}\n          disabled={props.disabled}\n          hidden={props.hidden}\n          hidesSharedBackground={props.hidesSharedBackground}\n          separateBackground={props.separateBackground}\n          tintColor={props.tintColor}\n          variant={props.variant}>\n          {props.children}\n        </NativeToolbarLink>\n      );\n    }\n\n    // Icon/label mode: convert primitive children to bar button item props\n    const sharedProps = convertStackHeaderSharedPropsToRNSharedHeaderItem(props);\n    const icon = sharedProps?.icon?.type === 'sfSymbol' ? sharedProps.icon.name : undefined;\n    return (\n      <NativeToolbarLink\n        {...sharedProps}\n        href={props.href}\n        action={props.action}\n        icon={icon}\n        image={props.image}\n        imageRenderingMode={props.iconRenderingMode}\n      />\n    );\n  }\n\n  // Left/right placement: not supported for zoom transitions from bar button items\n  return null;\n};\n\nconst PRIMITIVE_CHILDREN = [StackToolbarLabel, StackToolbarIcon, StackToolbarBadge];\n"]}