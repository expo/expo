{"version":3,"file":"navigationParams.js","sourceRoot":"","sources":["../src/navigationParams.ts"],"names":[],"mappings":"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","sourcesContent":["export const INTERNAL_EXPO_ROUTER_NO_ANIMATION_PARAM_NAME = '__internal_expo_router_no_animation';\nexport const INTERNAL_EXPO_ROUTER_IS_PREVIEW_NAVIGATION_PARAM_NAME =\n  '__internal__expo_router_is_preview_navigation';\nexport const INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME =\n  '__internal_expo_router_zoom_transition_source_id';\nexport const INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SCREEN_ID_PARAM_NAME =\n  '__internal_expo_router_zoom_transition_screen_id';\n\nconst internalExpoRouterParamNames = [\n  INTERNAL_EXPO_ROUTER_NO_ANIMATION_PARAM_NAME,\n  INTERNAL_EXPO_ROUTER_IS_PREVIEW_NAVIGATION_PARAM_NAME,\n  INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SOURCE_ID_PARAM_NAME,\n  INTERNAL_EXPO_ROUTER_ZOOM_TRANSITION_SCREEN_ID_PARAM_NAME,\n] as const;\n\nexport type InternalExpoRouterParamName = (typeof internalExpoRouterParamNames)[number];\nexport type InternalExpoRouterParams = Partial<Record<InternalExpoRouterParamName, unknown>>;\n\nexport function appendInternalExpoRouterParams(\n  params: Record<string, unknown> | object | undefined,\n  expoParams: InternalExpoRouterParams\n) {\n  let newParams: Record<string, unknown> = {};\n  // Using nested params is a workaround for the issue with the preview key not being passed to the params\n  // https://github.com/Ubax/react-navigation/blob/main/packages/core/src/useNavigationBuilder.tsx#L573\n  // Another solution would be to propagate the preview key in the useNavigationBuilder,\n  // but that would require us to fork the @react-navigation/core package.\n  let nestedParams: Record<string, unknown> = {};\n  if (params) {\n    newParams = { ...params };\n    if ('params' in params) {\n      if (typeof params.params === 'object' && params.params) {\n        nestedParams = params.params as Record<string, unknown>;\n      }\n    }\n  }\n  nestedParams = { ...nestedParams, ...expoParams };\n  newParams = { ...newParams, ...expoParams };\n  if (Object.keys(nestedParams).length > 0) {\n    newParams.params = nestedParams;\n  }\n  if (Object.keys(newParams).length === 0 && params === undefined) {\n    return undefined;\n  }\n  return newParams;\n}\n\nexport function getInternalExpoRouterParams(\n  _params: Record<string, unknown> | object | undefined\n): InternalExpoRouterParams {\n  const expoParams: InternalExpoRouterParams = {};\n  const params: Record<string, unknown> = _params ? (_params as Record<string, unknown>) : {};\n  const nestedParams: Record<string, unknown> =\n    'params' in params && typeof params.params === 'object' && params.params\n      ? (params.params as Record<string, unknown>)\n      : {};\n\n  for (const key of internalExpoRouterParamNames) {\n    if (key in params) {\n      expoParams[key] = params[key];\n    } else if (key in nestedParams) {\n      expoParams[key] = nestedParams[key];\n    }\n  }\n\n  return expoParams;\n}\n\nexport function hasParam(params: unknown, paramName: string): boolean {\n  if (!!params && typeof params === 'object') {\n    const recordParams = params as Record<string, unknown>;\n    if (recordParams[paramName] !== undefined) {\n      return true;\n    }\n    if (recordParams.params && typeof recordParams.params === 'object') {\n      return hasParam(recordParams.params, paramName);\n    }\n  }\n  return false;\n}\n\nexport function removeParams(\n  params: Record<string, unknown> | object | undefined,\n  paramName: readonly string[]\n): Record<string, unknown> | object | undefined {\n  if (!params) {\n    return undefined;\n  }\n  const nestedParams =\n    'params' in params && typeof params.params === 'object' && params.params\n      ? (params.params as Record<string, unknown>)\n      : undefined;\n  const newNestedParams = nestedParams ? removeParams(nestedParams, paramName) : undefined;\n  const newParams = Object.fromEntries(\n    Object.entries(params).filter(([key]) => !paramName.includes(key) && key !== 'params')\n  );\n  if (Object.keys(newNestedParams ?? {}).length > 0) {\n    return { ...newParams, params: newNestedParams };\n  }\n  return newParams;\n}\n\nexport function removeInternalExpoRouterParams(\n  params: Record<string, unknown> | object\n): Record<string, unknown> | object;\nexport function removeInternalExpoRouterParams(\n  params: Record<string, unknown> | object | undefined\n): Record<string, unknown> | object | undefined;\nexport function removeInternalExpoRouterParams(\n  params: Record<string, unknown> | object | undefined\n): Record<string, unknown> | object | undefined {\n  if (!params) {\n    return undefined;\n  }\n  return removeParams(params, [...internalExpoRouterParamNames, 'params']);\n}\n"]}