{"version":3,"file":"navigationParams.js","sourceRoot":"","sources":["../src/navigationParams.ts"],"names":[],"mappings":"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","sourcesContent":["const INTERNAL_EXPO_ROUTER_NO_ANIMATION_PARAM_NAME = '__internal_expo_router_no_animation';\nconst INTERNAL_EXPO_ROUTER_IS_PREVIEW_NAVIGATION_PARAM_NAME =\n  '__internal__expo_router_is_preview_navigation';\n\nconst internalExpoRouterParamNames = [\n  INTERNAL_EXPO_ROUTER_NO_ANIMATION_PARAM_NAME,\n  INTERNAL_EXPO_ROUTER_IS_PREVIEW_NAVIGATION_PARAM_NAME,\n] as const;\n\nexport type InternalExpoRouterParamName = (typeof internalExpoRouterParamNames)[number];\nexport type InternalExpoRouterParams = Partial<Record<InternalExpoRouterParamName, unknown>>;\n\nexport function appendInternalExpoRouterParams(\n  params: Record<string, unknown> | object | undefined,\n  expoParams: InternalExpoRouterParams\n) {\n  let newParams: Record<string, unknown> = {};\n  // Using nested params is a workaround for the issue with the preview key not being passed to the params\n  // https://github.com/Ubax/react-navigation/blob/main/packages/core/src/useNavigationBuilder.tsx#L573\n  // Another solution would be to propagate the preview key in the useNavigationBuilder,\n  // but that would require us to fork the @react-navigation/core package.\n  let nestedParams: Record<string, unknown> = {};\n  if (params) {\n    newParams = { ...params };\n    if ('params' in params) {\n      if (typeof params.params === 'object' && params.params) {\n        nestedParams = params.params as Record<string, unknown>;\n      }\n    }\n  }\n  nestedParams = { ...nestedParams, ...expoParams };\n  newParams = { ...newParams, ...expoParams };\n  if (Object.keys(nestedParams).length > 0) {\n    newParams.params = nestedParams;\n  }\n  if (Object.keys(newParams).length === 0 && params === undefined) {\n    return undefined;\n  }\n  return newParams;\n}\n\nexport function getInternalExpoRouterParams(\n  _params: Record<string, unknown> | object | undefined\n): InternalExpoRouterParams {\n  const expoParams: InternalExpoRouterParams = {};\n  const params: Record<string, unknown> = _params ? (_params as Record<string, unknown>) : {};\n  const nestedParams: Record<string, unknown> =\n    'params' in params && typeof params.params === 'object' && params.params\n      ? (params.params as Record<string, unknown>)\n      : {};\n\n  for (const key of internalExpoRouterParamNames) {\n    if (key in params) {\n      expoParams[key] = params[key];\n    } else if (key in nestedParams) {\n      expoParams[key] = nestedParams[key];\n    }\n  }\n\n  return expoParams;\n}\n\nexport function removeInternalExpoRouterParams(\n  params: Record<string, unknown> | object\n): Record<string, unknown> | object;\nexport function removeInternalExpoRouterParams(\n  params: Record<string, unknown> | object | undefined\n): Record<string, unknown> | object | undefined;\nexport function removeInternalExpoRouterParams(\n  params: Record<string, unknown> | object | undefined\n): Record<string, unknown> | object | undefined {\n  if (!params) {\n    return undefined;\n  }\n  const newNestedParams =\n    'params' in params && typeof params.params === 'object' && params.params\n      ? Object.fromEntries(\n          Object.entries(params.params).filter(\n            ([key]) => !internalExpoRouterParamNames.includes(key as InternalExpoRouterParamName)\n          )\n        )\n      : {};\n  const newParams = Object.fromEntries(\n    Object.entries(params).filter(\n      ([key]) =>\n        !internalExpoRouterParamNames.includes(key as InternalExpoRouterParamName) &&\n        key !== 'params'\n    )\n  );\n  if (Object.keys(newNestedParams).length > 0) {\n    return { ...newParams, params: newNestedParams };\n  }\n  return newParams;\n}\n"]}