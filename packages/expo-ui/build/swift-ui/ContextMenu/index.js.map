{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/swift-ui/ContextMenu/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import { requireNativeView } from 'expo';\nimport { ComponentType, Children, ReactElement, ReactNode, useMemo } from 'react';\nimport { NativeSyntheticEvent, StyleProp, ViewStyle } from 'react-native';\n\nimport { Host } from '../Host';\nimport { MenuElement, transformChildrenToElementArray } from './utils';\nimport { ButtonProps } from '../Button';\nimport { PickerProps } from '../Picker';\nimport { SwitchProps } from '../Switch';\n\nconst MenuNativeView: ComponentType<NativeMenuProps> = requireNativeView('ExpoUI', 'ContextMenu');\n\nconst MenuNativeTriggerView: ComponentType<object> = requireNativeView(\n  'ExpoUI',\n  'ContextMenuActivationElement'\n);\n\nconst MenuNativePreviewView: ComponentType<object> = requireNativeView(\n  'ExpoUI',\n  'ContextMenuPreview'\n);\n\ntype SubmenuElement =\n  | ReactElement<ButtonProps>\n  | ReactElement<SwitchProps>\n  | ReactElement<PickerProps>\n  | ReactElement<SubmenuProps>;\n\nexport type ContextMenuContentProps = {\n  children: SubmenuElement | SubmenuElement[];\n};\n\n/**\n * @hidden\n */\nexport type EventHandlers = Record<\n  string,\n  Record<string, (event: NativeSyntheticEvent<any>) => void>\n>;\n\n/**\n * @hidden\n */\nexport type ContextMenuElementBase = { contextMenuElementID: string };\n\n/**\n * Activation method of the context menu.\n * - `singlePress`: The context menu is opened with a single tap. Does not isolate the content.\n * - `longPress`: The context menu is opened with a long press. On iOS additionally Highlights the content by blurring the background.\n */\nexport type ActivationMethod = 'singlePress' | 'longPress';\n\n/**\n * Props of the `ContextMenu` component.\n */\nexport type ContextMenuProps = {\n  /**\n   * Determines how the context menu will be activated.\n   */\n  activationMethod?: ActivationMethod;\n\n  /**\n   * The contents of the submenu are used as an anchor for the context menu.\n   * The children will be wrapped in a pressable element, which triggers opening of the context menu.\n   */\n  children: ReactNode;\n};\n\n/**\n * Props of the `Submenu` component.\n */\nexport type SubmenuProps = {\n  /**\n   * The button that will be used to expand the submenu. On Android the `text` prop of the `Button` will be used as a section title.\n   */\n  button: ReactElement<ButtonProps>;\n  /**\n   * Children of the submenu. Only `Button`, `Switch`, `Picker` and `Submenu` elements should be used.\n   */\n  children: ReactNode;\n};\n\n/**\n * @hidden\n */\nexport type NativeMenuProps = ContextMenuProps & {\n  elements: MenuElement[];\n  onContextMenuButtonPressed: (\n    event: NativeSyntheticEvent<{ contextMenuElementID: string }>\n  ) => void;\n  onContextMenuSwitchValueChanged: (\n    event: NativeSyntheticEvent<{\n      contextMenuElementID: string;\n      value: boolean;\n    }>\n  ) => void;\n  onContextMenuPickerOptionSelected: (\n    event: NativeSyntheticEvent<{\n      index: number;\n      label: string;\n      contextMenuElementID: string;\n    }>\n  ) => void;\n};\n\n/**\n * The `Submenu` component is used to create a nested context menu. Submenus can be infinitely nested.\n * Android does not support nesting in the context menu. All the submenus will be flat-mapped into a single level with multiple titled sections.\n */\nexport function Submenu(props: SubmenuProps) {\n  return <></>;\n}\n\n/**\n * Items visible inside the context menu. Pass input components as immidiate children of the tag.\n * `Button`, `Switch` and `Submenu` components are supported on both Android and iOS.\n * The `Picker` component is supported only on iOS. Remember to use components from the `@expo/ui` library.\n */\nexport function Items(props: { children: React.ReactNode }) {\n  return <></>;\n}\nItems.tag = 'Items';\n\n/**\n * The component visible all the time that triggers the menu when tapped or long-pressed.\n */\nexport function Trigger(props: { children: React.ReactNode }) {\n  return <MenuNativeTriggerView {...props} />;\n}\n\n/**\n * The component visible above the menu when it is opened.\n * @platform ios\n */\nexport function Preview(props: { children: React.ReactNode }) {\n  return <MenuNativePreviewView {...props} />;\n}\n\n/**\n * `<ContextMenu>` component without a host view.\n * You should use this with a `Host` component in ancestor.\n */\nfunction ContextMenuPrimitive(props: ContextMenuProps) {\n  const eventHandlersMap: EventHandlers = {};\n  const initialChildren = Children.map(\n    props.children as any,\n    (c: { type: { tag: string }; props: { children: React.ReactNode } }) =>\n      c.type.tag === Items.tag ? c.props.children : null\n  );\n  const processedElements = useMemo(\n    () => transformChildrenToElementArray(initialChildren, eventHandlersMap),\n    [initialChildren]\n  );\n\n  const createEventHandler =\n    (handlerType: string) => (event: NativeSyntheticEvent<{ contextMenuElementID: string }>) => {\n      const handler = eventHandlersMap[event.nativeEvent.contextMenuElementID]?.[handlerType];\n      handler?.(event);\n    };\n\n  return (\n    <MenuNativeView\n      elements={processedElements}\n      onContextMenuButtonPressed={createEventHandler('onPress')}\n      onContextMenuSwitchValueChanged={createEventHandler('onValueChange')}\n      onContextMenuPickerOptionSelected={createEventHandler('onOptionSelected')}\n      {...props}\n    />\n  );\n}\n\n/**\n * `ContextMenuPrimitive` allows you to create a context menu, which can be used to provide additional options to the user.\n *\n * There are some platform-specific differences in the behavior of the context menu:\n * - On Android, the expansion of the context menu is controlled by the `expanded` prop. iOS, does not allow for manual control of the expansion state.\n * - On iOS, the context menu can be triggered by a single press or a long press. The `activationMethod` prop allows you to choose between these two options.\n * - Android does not support nesting in the context menu. All the submenus will be flat-mapped into a single level with multiple sections. The `title` prop of the `Button`, which opens the submenu on iOS will be used as a section title.\n * - Android does not support showing a `Picker` element in the context menu.\n */\nfunction ContextMenu(props: ContextMenuProps & { style?: StyleProp<ViewStyle> }) {\n  return (\n    <Host style={props.style} matchContents>\n      <ContextMenuPrimitive {...props} />\n    </Host>\n  );\n}\n\nContextMenuPrimitive.Trigger = Trigger;\nContextMenuPrimitive.Preview = Preview;\nContextMenuPrimitive.Items = Items;\nContextMenu.Trigger = Trigger;\nContextMenu.Preview = Preview;\nContextMenu.Items = Items;\n\nexport { ContextMenuPrimitive, ContextMenu };\n"]}