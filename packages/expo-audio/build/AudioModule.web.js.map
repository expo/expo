{"version":3,"file":"AudioModule.web.js","sourceRoot":"","sources":["../src/AudioModule.web.ts"],"names":[],"mappings":"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","sourcesContent":["import { Asset } from 'expo-asset';\nimport { PermissionResponse, PermissionStatus } from 'expo-modules-core';\n\nimport {\n  AudioMode,\n  AudioPlayerOptions,\n  AudioPlaylistLoopMode,\n  AudioPlaylistStatus,\n  AudioSource,\n  AudioSourceInfo,\n  AudioStatus,\n  PitchCorrectionQuality,\n  RecorderState,\n  RecordingInput,\n  RecordingOptions,\n  RecordingOptionsWeb,\n  RecordingStartOptions,\n} from './Audio.types';\nimport {\n  PLAYBACK_STATUS_UPDATE,\n  PLAYLIST_STATUS_UPDATE,\n  RECORDING_STATUS_UPDATE,\n  TRACK_CHANGED,\n} from './AudioEventKeys';\nimport {\n  AudioPlayer,\n  AudioEvents,\n  AudioPlaylist,\n  AudioPlaylistEvents,\n  RecordingEvents,\n  AudioRecorder,\n} from './AudioModule.types';\nimport { RecordingPresets } from './RecordingConstants';\nimport { resolveSource } from './utils/resolveSource';\n\nconst nextId = (() => {\n  let id = 0;\n  return () => String(id++);\n})();\n\nasync function getPermissionWithQueryAsync(\n  name: PermissionNameWithAdditionalValues\n): Promise<PermissionStatus | null> {\n  if (!navigator || !navigator.permissions || !navigator.permissions.query) return null;\n\n  try {\n    const { state } = await navigator.permissions.query({ name });\n    switch (state) {\n      case 'granted':\n        return PermissionStatus.GRANTED;\n      case 'denied':\n        return PermissionStatus.DENIED;\n      default:\n        return PermissionStatus.UNDETERMINED;\n    }\n  } catch {\n    // Firefox - TypeError: 'microphone' (value of 'name' member of PermissionDescriptor) is not a valid value for enumeration PermissionName.\n    return PermissionStatus.UNDETERMINED;\n  }\n}\n\nfunction getUserMedia(constraints: MediaStreamConstraints): Promise<MediaStream> {\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    return navigator.mediaDevices.getUserMedia(constraints);\n  }\n\n  // Some browsers partially implement mediaDevices. We can't just assign an object\n  // with getUserMedia as it would overwrite existing properties.\n  // Here, we will just add the getUserMedia property if it's missing.\n\n  // First get ahold of the legacy getUserMedia, if present\n  const getUserMedia =\n    // TODO: this method is deprecated, migrate to https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    navigator.getUserMedia ||\n    navigator.webkitGetUserMedia ||\n    navigator.mozGetUserMedia ||\n    function () {\n      const error: any = new Error('Permission unimplemented');\n      error.code = 0;\n      error.name = 'NotAllowedError';\n      throw error;\n    };\n\n  return new Promise((resolve, reject) => {\n    // TODO(@kitten): The types indicates that this is incorrect.\n    // Please check whether this is correct!\n    // @ts-expect-error: The `successCallback` doesn't match a `resolve` function\n    getUserMedia.call(navigator, constraints, resolve, reject);\n  });\n}\n\nfunction getStatusFromMedia(media: HTMLMediaElement, id: string): AudioStatus {\n  const isPlaying = !!(\n    media.currentTime > 0 &&\n    !media.paused &&\n    !media.ended &&\n    media.readyState > 2\n  );\n\n  const status: AudioStatus = {\n    id,\n    isLoaded: true,\n    duration: media.duration,\n    currentTime: media.currentTime,\n    playbackState: '',\n    timeControlStatus: isPlaying ? 'playing' : 'paused',\n    reasonForWaitingToPlay: '',\n    playing: isPlaying,\n    didJustFinish: media.ended,\n    isBuffering: false,\n    playbackRate: media.playbackRate,\n    shouldCorrectPitch: true,\n    mute: media.muted,\n    loop: media.loop,\n  };\n\n  return status;\n}\n\nexport class AudioPlayerWeb\n  extends globalThis.expo.SharedObject<AudioEvents>\n  implements AudioPlayer\n{\n  constructor(source: AudioSource, options: AudioPlayerOptions = {}) {\n    super();\n    const { updateInterval = 500, crossOrigin } = options;\n    this.src = source;\n    this.interval = Math.max(updateInterval, 1);\n    this.crossOrigin = crossOrigin;\n    this.media = this._createMediaElement();\n  }\n\n  id: string = nextId();\n  isAudioSamplingSupported = false;\n  isBuffering = false;\n  shouldCorrectPitch = false;\n\n  private src: AudioSource = null;\n  private media: HTMLAudioElement;\n  private interval = 500;\n  private isPlaying = false;\n  private loaded = false;\n  private crossOrigin?: 'anonymous' | 'use-credentials';\n\n  get playing(): boolean {\n    return this.isPlaying;\n  }\n\n  get muted(): boolean {\n    return this.media.muted;\n  }\n\n  set muted(value: boolean) {\n    this.media.muted = value;\n  }\n\n  get loop(): boolean {\n    return this.media.loop;\n  }\n\n  set loop(value: boolean) {\n    this.media.loop = value;\n  }\n\n  get duration(): number {\n    return this.media.duration;\n  }\n\n  get currentTime(): number {\n    return this.media.currentTime;\n  }\n\n  get paused(): boolean {\n    return this.media.paused;\n  }\n\n  get isLoaded(): boolean {\n    return this.loaded;\n  }\n\n  get playbackRate(): number {\n    return this.media.playbackRate;\n  }\n\n  set playbackRate(value: number) {\n    this.media.playbackRate = value;\n  }\n\n  get volume(): number {\n    return this.media.volume;\n  }\n\n  set volume(value: number) {\n    this.media.volume = value;\n  }\n\n  get currentStatus(): AudioStatus {\n    return getStatusFromMedia(this.media, this.id);\n  }\n\n  play(): void {\n    this.media.play();\n    this.isPlaying = true;\n  }\n\n  pause(): void {\n    this.media.pause();\n    this.isPlaying = false;\n  }\n\n  replace(source: AudioSource): void {\n    const wasPlaying = this.isPlaying;\n\n    // we need to remove the current media element and create a new one\n    this.remove();\n\n    this.src = source;\n    this.isPlaying = false;\n    this.loaded = false;\n    this.media = this._createMediaElement();\n\n    // Resume playback if it was playing before\n    if (wasPlaying) {\n      this.play();\n    }\n  }\n\n  async seekTo(\n    seconds: number,\n    toleranceMillisBefore?: number,\n    toleranceMillisAfter?: number\n  ): Promise<void> {\n    this.media.currentTime = seconds;\n  }\n\n  // Not supported on web\n  setAudioSamplingEnabled(enabled: boolean): void {\n    this.isAudioSamplingSupported = false;\n  }\n\n  setPlaybackRate(second: number, pitchCorrectionQuality?: PitchCorrectionQuality): void {\n    this.media.playbackRate = second;\n    this.shouldCorrectPitch = pitchCorrectionQuality === 'high';\n    this.media.preservesPitch = this.shouldCorrectPitch;\n  }\n\n  remove(): void {\n    this.media.pause();\n    // Clear event handlers to prevent memory leaks\n    this.media.ontimeupdate = null;\n    this.media.onplay = null;\n    this.media.onpause = null;\n    this.media.onseeked = null;\n    this.media.onended = null;\n    this.media.onloadeddata = null;\n    this.media.onerror = null;\n    this.media.removeAttribute('src');\n    this.media.load();\n  }\n\n  setActiveForLockScreen(active: boolean, metadata: Record<string, any>): void {}\n  updateLockScreenMetadata(metadata: Record<string, any>): void {}\n  clearLockScreenControls(): void {}\n\n  _createMediaElement(): HTMLAudioElement {\n    const newSource = getSourceUri(this.src);\n    const media = new Audio(newSource);\n    if (this.crossOrigin !== undefined) {\n      media.crossOrigin = this.crossOrigin;\n    }\n\n    let lastEmitTime = 0;\n    const intervalSec = this.interval / 1000;\n\n    // Throttled status updates based on interval\n    media.ontimeupdate = () => {\n      const now = media.currentTime;\n      // Handle backwards time (loop/seek)\n      if (now < lastEmitTime) {\n        lastEmitTime = now;\n      }\n      if (now - lastEmitTime >= intervalSec) {\n        lastEmitTime = now;\n        this.emit(PLAYBACK_STATUS_UPDATE, getStatusFromMedia(media, this.id));\n      }\n    };\n\n    media.onplay = () => {\n      this.isPlaying = true;\n      lastEmitTime = media.currentTime;\n      this.emit(PLAYBACK_STATUS_UPDATE, {\n        ...getStatusFromMedia(media, this.id),\n        playing: this.isPlaying,\n      });\n    };\n\n    media.onpause = () => {\n      this.isPlaying = false;\n      lastEmitTime = media.currentTime;\n      this.emit(PLAYBACK_STATUS_UPDATE, {\n        ...getStatusFromMedia(media, this.id),\n        playing: this.isPlaying,\n      });\n    };\n\n    media.onseeked = () => {\n      lastEmitTime = media.currentTime;\n      this.emit(PLAYBACK_STATUS_UPDATE, getStatusFromMedia(media, this.id));\n    };\n\n    media.onended = () => {\n      lastEmitTime = 0;\n    };\n\n    media.onloadeddata = () => {\n      this.loaded = true;\n      lastEmitTime = media.currentTime;\n      this.emit(PLAYBACK_STATUS_UPDATE, {\n        ...getStatusFromMedia(media, this.id),\n        isLoaded: this.loaded,\n      });\n    };\n\n    media.onerror = () => {\n      this.loaded = false;\n      this.isPlaying = false;\n      this.emit(PLAYBACK_STATUS_UPDATE, {\n        ...getStatusFromMedia(media, this.id),\n        isLoaded: false,\n        playing: false,\n      });\n    };\n\n    return media;\n  }\n}\n\nfunction getSourceUri(source: AudioSource): string | undefined {\n  if (typeof source === 'string') {\n    return source;\n  }\n  if (typeof source === 'number') {\n    const asset = Asset.fromModule(source);\n    return asset.uri;\n  }\n  if (typeof source?.assetId === 'number' && !source?.uri) {\n    const asset = Asset.fromModule(source.assetId);\n    return asset.uri;\n  }\n\n  return source?.uri ?? undefined;\n}\n\nfunction getSourceInfo(source: AudioSource): AudioSourceInfo {\n  const resolved = resolveSource(source);\n  if (resolved && typeof resolved === 'object') {\n    return {\n      uri: resolved.uri,\n      name: resolved.name,\n    };\n  }\n  return { uri: getSourceUri(source) };\n}\n\nexport class AudioRecorderWeb\n  extends globalThis.expo.SharedObject<RecordingEvents>\n  implements AudioRecorder\n{\n  constructor(options: Partial<RecordingOptions>) {\n    super();\n    this.options = options;\n  }\n\n  async setup() {\n    this.mediaRecorder = await this.createMediaRecorder(this.options);\n  }\n\n  id = nextId();\n  currentTime = 0;\n  uri: string | null = null;\n\n  private options: Partial<RecordingOptions>;\n  private mediaRecorder: MediaRecorder | null = null;\n  private mediaRecorderUptimeOfLastStartResume = 0;\n  private mediaRecorderIsRecording = false;\n  private timeoutIds: number[] = [];\n\n  get isRecording(): boolean {\n    return this.mediaRecorder?.state === 'recording';\n  }\n\n  record(options?: RecordingStartOptions): void {\n    if (this.mediaRecorder === null) {\n      throw new Error(\n        'Cannot start an audio recording without initializing a MediaRecorder. Run prepareToRecordAsync() before attempting to start an audio recording.'\n      );\n    }\n\n    // Clear any existing timeouts\n    this.clearTimeouts();\n\n    // Note: atTime is not supported on Web (no native equivalent), so we ignore it entirely\n    // Only forDuration is implemented using setTimeout\n    const { forDuration } = options || {};\n\n    this.startActualRecording();\n\n    if (forDuration !== undefined) {\n      this.timeoutIds.push(\n        setTimeout(() => {\n          this.stop();\n        }, forDuration * 1000)\n      );\n    }\n  }\n\n  private startActualRecording(): void {\n    if (this.mediaRecorder?.state === 'paused') {\n      this.mediaRecorder.resume();\n    } else {\n      this.mediaRecorder?.start();\n    }\n  }\n\n  getAvailableInputs(): RecordingInput[] {\n    return [];\n  }\n\n  getCurrentInput(): Promise<RecordingInput> {\n    return Promise.resolve({\n      type: 'Default',\n      name: 'Default',\n      uid: 'Default',\n    });\n  }\n\n  async prepareToRecordAsync(): Promise<void> {\n    return this.setup();\n  }\n\n  getStatus(): RecorderState {\n    return {\n      canRecord:\n        this.mediaRecorder?.state === 'recording' || this.mediaRecorder?.state === 'inactive',\n      isRecording: this.mediaRecorder?.state === 'recording',\n      durationMillis: this.getAudioRecorderDurationMillis(),\n      mediaServicesDidReset: false,\n      url: this.uri,\n    };\n  }\n\n  pause(): void {\n    if (this.mediaRecorder === null) {\n      throw new Error(\n        'Cannot start an audio recording without initializing a MediaRecorder. Run prepareToRecordAsync() before attempting to start an audio recording.'\n      );\n    }\n\n    this.mediaRecorder?.pause();\n  }\n\n  recordForDuration(seconds: number): void {\n    this.record({ forDuration: seconds });\n  }\n\n  setInput(input: string): void {}\n\n  startRecordingAtTime(seconds: number): void {\n    this.record({ atTime: seconds });\n  }\n\n  async stop(): Promise<void> {\n    if (this.mediaRecorder === null) {\n      throw new Error(\n        'Cannot start an audio recording without initializing a MediaRecorder. Run prepareToRecordAsync() before attempting to start an audio recording.'\n      );\n    }\n\n    const dataPromise = new Promise<Blob>((resolve) =>\n      this.mediaRecorder?.addEventListener('dataavailable', (e) => resolve(e.data))\n    );\n\n    this.mediaRecorder?.stop();\n    this.mediaRecorder = null;\n\n    const data = await dataPromise;\n    const url = URL.createObjectURL(data);\n\n    this.uri = url;\n\n    this.emit(RECORDING_STATUS_UPDATE, {\n      id: this.id,\n      isFinished: true,\n      hasError: false,\n      error: null,\n      url,\n    });\n  }\n\n  clearTimeouts() {\n    this.timeoutIds.forEach((id) => clearTimeout(id));\n  }\n\n  private async createMediaRecorder(\n    options: Partial<RecordingOptions> & Partial<RecordingOptionsWeb>\n  ): Promise<MediaRecorder> {\n    if (typeof navigator !== 'undefined' && !navigator.mediaDevices) {\n      throw new Error('No media devices available');\n    }\n\n    this.mediaRecorderUptimeOfLastStartResume = 0;\n    this.currentTime = 0;\n\n    const stream = await getUserMedia({ audio: true });\n\n    const defaults = RecordingPresets.HIGH_QUALITY.web;\n    const mediaRecorderOptions: MediaRecorderOptions = {};\n\n    const mimeType = options.mimeType ?? defaults.mimeType;\n    if (mimeType && MediaRecorder.isTypeSupported(mimeType)) {\n      mediaRecorderOptions.mimeType = mimeType;\n    }\n\n    if (options.bitsPerSecond) {\n      mediaRecorderOptions.bitsPerSecond = options.bitsPerSecond;\n    } else if (options.bitRate) {\n      mediaRecorderOptions.audioBitsPerSecond = options.bitRate;\n    } else {\n      mediaRecorderOptions.bitsPerSecond = defaults.bitsPerSecond;\n    }\n\n    const mediaRecorder = new MediaRecorder(stream, mediaRecorderOptions);\n\n    mediaRecorder.addEventListener('pause', () => {\n      this.currentTime = this.getAudioRecorderDurationMillis();\n      this.mediaRecorderIsRecording = false;\n    });\n\n    mediaRecorder.addEventListener('resume', () => {\n      this.mediaRecorderUptimeOfLastStartResume = Date.now();\n      this.mediaRecorderIsRecording = true;\n    });\n\n    mediaRecorder.addEventListener('start', () => {\n      this.mediaRecorderUptimeOfLastStartResume = Date.now();\n      this.currentTime = 0;\n      this.mediaRecorderIsRecording = true;\n    });\n\n    mediaRecorder?.addEventListener('stop', () => {\n      this.currentTime = 0;\n      this.mediaRecorderIsRecording = false;\n\n      // Clears recording icon in Chrome tab\n      stream.getTracks().forEach((track) => track.stop());\n    });\n\n    return mediaRecorder;\n  }\n\n  private getAudioRecorderDurationMillis() {\n    let duration = this.currentTime;\n    if (this.mediaRecorderIsRecording && this.mediaRecorderUptimeOfLastStartResume > 0) {\n      duration += Date.now() - this.mediaRecorderUptimeOfLastStartResume;\n    }\n    return duration;\n  }\n}\n\nexport class AudioPlaylistWeb\n  extends globalThis.expo.SharedObject<AudioPlaylistEvents>\n  implements AudioPlaylist\n{\n  constructor(\n    initialSources: AudioSource[] = [],\n    updateInterval: number = 500,\n    loopMode: AudioPlaylistLoopMode = 'none',\n    crossOrigin?: 'anonymous' | 'use-credentials'\n  ) {\n    super();\n    this._updateInterval = Math.max(updateInterval, 1);\n    this._loopMode = loopMode;\n    this._crossOrigin = crossOrigin;\n\n    for (const source of initialSources) {\n      this._sources.push(source);\n      this._sourceInfos.push(getSourceInfo(source));\n    }\n\n    if (this._sources.length > 0) {\n      this._currentMedia = this._createMediaElement(this._sources[0]);\n      this._preloadNext();\n    }\n  }\n\n  id: string = nextId();\n\n  private _sources: AudioSource[] = [];\n  private _sourceInfos: AudioSourceInfo[] = [];\n  private _currentIndex = 0;\n  private _currentMedia: HTMLAudioElement | null = null;\n  private _nextMedia: HTMLAudioElement | null = null;\n  private _updateInterval = 500;\n  private _loopMode: AudioPlaylistLoopMode = 'none';\n  private _isPlaying = false;\n  private _isLoaded = false;\n  private _isBuffering = false;\n  private _volume = 1;\n  private _muted = false;\n  private _playbackRate = 1;\n  private _crossOrigin?: 'anonymous' | 'use-credentials';\n  private _knownDuration = 0;\n\n  get currentIndex(): number {\n    return this._currentIndex;\n  }\n\n  get trackCount(): number {\n    return this._sources.length;\n  }\n\n  get sources(): AudioSourceInfo[] {\n    return [...this._sourceInfos];\n  }\n\n  get playing(): boolean {\n    return this._isPlaying;\n  }\n\n  get muted(): boolean {\n    return this._muted;\n  }\n\n  set muted(value: boolean) {\n    this._muted = value;\n    if (this._currentMedia) {\n      this._currentMedia.muted = value;\n    }\n  }\n\n  get isLoaded(): boolean {\n    return this._isLoaded;\n  }\n\n  get isBuffering(): boolean {\n    return this._isBuffering;\n  }\n\n  get currentTime(): number {\n    return this._currentMedia?.currentTime ?? 0;\n  }\n\n  get duration(): number {\n    return this._knownDuration;\n  }\n\n  get volume(): number {\n    return this._volume;\n  }\n\n  set volume(value: number) {\n    this._volume = value;\n    if (this._currentMedia) {\n      this._currentMedia.volume = value;\n    }\n  }\n\n  get playbackRate(): number {\n    return this._playbackRate;\n  }\n\n  set playbackRate(value: number) {\n    this._playbackRate = value;\n    if (this._currentMedia) {\n      this._currentMedia.playbackRate = value;\n    }\n  }\n\n  get loop(): AudioPlaylistLoopMode {\n    return this._loopMode;\n  }\n\n  set loop(value: AudioPlaylistLoopMode) {\n    this._loopMode = value;\n  }\n\n  get currentStatus(): AudioPlaylistStatus {\n    return this._getStatus();\n  }\n\n  play(): void {\n    if (!this._currentMedia || this._sources.length === 0) {\n      return;\n    }\n    this._currentMedia.play();\n    this._isPlaying = true;\n  }\n\n  pause(): void {\n    if (this._currentMedia) {\n      this._currentMedia.pause();\n      this._isPlaying = false;\n    }\n  }\n\n  next(): void {\n    if (this._sources.length === 0) return;\n\n    const previousIndex = this._currentIndex;\n    let nextIndex = this._currentIndex + 1;\n\n    if (nextIndex >= this._sources.length) {\n      if (this._loopMode === 'all') {\n        nextIndex = 0;\n      } else {\n        return;\n      }\n    }\n\n    this._transitionToTrack(nextIndex, previousIndex);\n  }\n\n  previous(): void {\n    if (this._sources.length === 0) return;\n\n    const previousIndex = this._currentIndex;\n    let prevIndex = this._currentIndex - 1;\n\n    if (prevIndex < 0) {\n      if (this._loopMode === 'all') {\n        prevIndex = this._sources.length - 1;\n      } else {\n        return;\n      }\n    }\n\n    this._transitionToTrack(prevIndex, previousIndex);\n  }\n\n  skipTo(index: number): void {\n    if (index < 0 || index >= this._sources.length) {\n      return;\n    }\n    if (index === this._currentIndex) {\n      return;\n    }\n\n    const previousIndex = this._currentIndex;\n    this._transitionToTrack(index, previousIndex);\n  }\n\n  async seekTo(seconds: number): Promise<void> {\n    if (this._currentMedia) {\n      this._currentMedia.currentTime = seconds;\n    }\n  }\n\n  add(source: AudioSource): void {\n    this._sources.push(source);\n    this._sourceInfos.push(getSourceInfo(source));\n\n    if (this._sources.length === 1) {\n      this._currentMedia = this._createMediaElement(source);\n    } else {\n      this._preloadNext();\n    }\n\n    this._emitStatus();\n  }\n\n  insert(source: AudioSource, index: number): void {\n    if (index < 0) index = 0;\n    if (index > this._sources.length) index = this._sources.length;\n\n    this._sources.splice(index, 0, source);\n    this._sourceInfos.splice(index, 0, getSourceInfo(source));\n\n    if (index <= this._currentIndex && this._sources.length > 1) {\n      this._currentIndex++;\n    }\n\n    if (this._sources.length === 1) {\n      this._currentMedia = this._createMediaElement(source);\n    } else {\n      this._preloadNext();\n    }\n\n    this._emitStatus();\n  }\n\n  remove(index: number): void {\n    if (index < 0 || index >= this._sources.length) {\n      return;\n    }\n\n    const wasCurrentTrack = index === this._currentIndex;\n    const wasPlaying = this._isPlaying;\n\n    this._sources.splice(index, 1);\n    this._sourceInfos.splice(index, 1);\n\n    if (this._sources.length === 0) {\n      this._cleanupMedia(this._currentMedia);\n      this._currentMedia = null;\n      this._cleanupMedia(this._nextMedia);\n      this._nextMedia = null;\n      this._currentIndex = 0;\n      this._isPlaying = false;\n      this._isLoaded = false;\n      this._knownDuration = 0;\n    } else if (wasCurrentTrack) {\n      this._cleanupMedia(this._currentMedia);\n      if (this._currentIndex >= this._sources.length) {\n        this._currentIndex = this._sources.length - 1;\n      }\n      this._knownDuration = 0;\n      this._currentMedia = this._createMediaElement(this._sources[this._currentIndex]);\n      if (wasPlaying) {\n        this._currentMedia.play();\n      }\n      this._preloadNext();\n    } else if (index < this._currentIndex) {\n      this._currentIndex--;\n      this._preloadNext();\n    } else {\n      this._preloadNext();\n    }\n\n    this._emitStatus();\n  }\n\n  clear(): void {\n    this._cleanupMedia(this._currentMedia);\n    this._currentMedia = null;\n    this._cleanupMedia(this._nextMedia);\n    this._nextMedia = null;\n    this._sources = [];\n    this._sourceInfos = [];\n    this._currentIndex = 0;\n    this._isPlaying = false;\n    this._isLoaded = false;\n    this._knownDuration = 0;\n    this._emitStatus();\n  }\n\n  setPlaybackRate(rate: number): void {\n    this.playbackRate = rate;\n  }\n\n  setLoopMode(mode: AudioPlaylistLoopMode): void {\n    this._loopMode = mode;\n    this._emitStatus();\n  }\n\n  destroy(): void {\n    this.clear();\n  }\n\n  private _transitionToTrack(newIndex: number, previousIndex: number): void {\n    const wasPlaying = this._isPlaying;\n\n    if (this._currentMedia) {\n      this._currentMedia.pause();\n      this._cleanupMedia(this._currentMedia);\n    }\n\n    this._currentIndex = newIndex;\n    this._isLoaded = false;\n    this._isBuffering = true;\n    this._knownDuration = 0;\n\n    const isNextSequential = newIndex === (previousIndex + 1) % this._sources.length;\n    if (this._nextMedia && isNextSequential) {\n      this._currentMedia = this._nextMedia;\n      this._attachMediaHandlers(this._currentMedia);\n      this._nextMedia = null;\n    } else {\n      this._cleanupMedia(this._nextMedia);\n      this._nextMedia = null;\n      this._currentMedia = this._createMediaElement(this._sources[newIndex]);\n    }\n\n    if (wasPlaying) {\n      this._currentMedia.play();\n      this._isPlaying = true;\n    }\n\n    this._preloadNext();\n\n    this.emit(TRACK_CHANGED, { previousIndex, currentIndex: newIndex });\n    this._emitStatus();\n  }\n\n  private _preloadNext(): void {\n    if (this._nextMedia) {\n      this._cleanupMedia(this._nextMedia);\n      this._nextMedia = null;\n    }\n\n    // No need to preload if single track or 'single' loop mode\n    if (this._sources.length <= 1 || this._loopMode === 'single') {\n      return;\n    }\n\n    let nextIndex = this._currentIndex + 1;\n    if (nextIndex >= this._sources.length) {\n      if (this._loopMode === 'all') {\n        nextIndex = 0;\n      } else {\n        return;\n      }\n    }\n\n    const uri = getSourceUri(this._sources[nextIndex]);\n    if (uri) {\n      this._nextMedia = new Audio(uri);\n      if (this._crossOrigin !== undefined) {\n        this._nextMedia.crossOrigin = this._crossOrigin;\n      }\n      this._nextMedia.preload = 'auto';\n      this._nextMedia.volume = this._volume;\n      this._nextMedia.muted = this._muted;\n      this._nextMedia.playbackRate = this._playbackRate;\n    }\n  }\n\n  private _cleanupMedia(media: HTMLAudioElement | null): void {\n    if (!media) return;\n    media.pause();\n\n    media.ontimeupdate = null;\n    media.onplay = null;\n    media.onpause = null;\n    media.onseeked = null;\n    media.onended = null;\n    media.onloadedmetadata = null;\n    media.onloadeddata = null;\n    media.onwaiting = null;\n    media.oncanplaythrough = null;\n    media.onerror = null;\n    media.removeAttribute('src');\n    media.load();\n  }\n\n  private _attachMediaHandlers(media: HTMLAudioElement): void {\n    let lastEmitTime = 0;\n    const intervalSec = this._updateInterval / 1000;\n\n    if (media.readyState >= 1) {\n      const duration = media.duration;\n      if (!isNaN(duration) && isFinite(duration)) {\n        this._knownDuration = duration;\n      }\n    }\n\n    media.ontimeupdate = () => {\n      const now = media.currentTime;\n      if (now < lastEmitTime) {\n        lastEmitTime = now;\n      }\n      if (now - lastEmitTime >= intervalSec) {\n        lastEmitTime = now;\n        this._emitStatus();\n      }\n    };\n\n    media.onplay = () => {\n      this._isPlaying = true;\n      lastEmitTime = media.currentTime;\n      this._emitStatus();\n    };\n\n    media.onpause = () => {\n      if (!media.ended) {\n        this._isPlaying = false;\n      }\n      lastEmitTime = media.currentTime;\n      this._emitStatus();\n    };\n\n    media.onseeked = () => {\n      lastEmitTime = media.currentTime;\n      this._emitStatus();\n    };\n\n    media.onended = () => {\n      lastEmitTime = 0;\n      this._handleTrackEnded();\n    };\n\n    media.onloadedmetadata = () => {\n      const duration = media.duration;\n      if (!isNaN(duration) && isFinite(duration)) {\n        this._knownDuration = duration;\n        this._emitStatus();\n      }\n    };\n\n    media.onloadeddata = () => {\n      this._isLoaded = true;\n      this._isBuffering = false;\n      lastEmitTime = media.currentTime;\n      this._emitStatus();\n    };\n\n    media.onwaiting = () => {\n      this._isBuffering = true;\n      this._emitStatus();\n    };\n\n    media.oncanplaythrough = () => {\n      this._isBuffering = false;\n      this._emitStatus();\n    };\n\n    media.onerror = () => {\n      this._isLoaded = false;\n      this._isBuffering = false;\n      this._isPlaying = false;\n      this._emitStatus();\n    };\n  }\n\n  private _createMediaElement(source: AudioSource): HTMLAudioElement {\n    const uri = getSourceUri(source);\n    const media = new Audio(uri);\n    if (this._crossOrigin !== undefined) {\n      media.crossOrigin = this._crossOrigin;\n    }\n    media.volume = this._volume;\n    media.muted = this._muted;\n    media.playbackRate = this._playbackRate;\n    this._attachMediaHandlers(media);\n    return media;\n  }\n\n  private _handleTrackEnded(): void {\n    if (this._loopMode === 'single') {\n      if (this._currentMedia) {\n        this._currentMedia.currentTime = 0;\n        this._currentMedia.play();\n      }\n      return;\n    }\n\n    const isLastTrack = this._currentIndex >= this._sources.length - 1;\n\n    if (isLastTrack) {\n      if (this._loopMode === 'all') {\n        this._transitionToTrack(0, this._currentIndex);\n      } else {\n        this._isPlaying = false;\n        this.emit(PLAYLIST_STATUS_UPDATE, {\n          ...this._getStatus(),\n          didJustFinish: true,\n        });\n      }\n    } else {\n      this._transitionToTrack(this._currentIndex + 1, this._currentIndex);\n    }\n  }\n\n  private _getStatus(): AudioPlaylistStatus {\n    return {\n      id: this.id,\n      currentIndex: this._currentIndex,\n      trackCount: this._sources.length,\n      currentTime: this._currentMedia?.currentTime ?? 0,\n      duration: this._knownDuration,\n      playing: this._isPlaying,\n      isBuffering: this._isBuffering,\n      isLoaded: this._isLoaded,\n      playbackRate: this._playbackRate,\n      muted: this._muted,\n      volume: this._volume,\n      loop: this._loopMode,\n      didJustFinish: false,\n    };\n  }\n\n  private _emitStatus(): void {\n    this.emit(PLAYLIST_STATUS_UPDATE, this._getStatus());\n  }\n}\n\nexport async function setAudioModeAsync(mode: AudioMode) {}\nexport async function setIsAudioActiveAsync(active: boolean) {}\n\nexport async function getRecordingPermissionsAsync(): Promise<PermissionResponse> {\n  const maybeStatus = await getPermissionWithQueryAsync('microphone');\n  switch (maybeStatus) {\n    case PermissionStatus.GRANTED:\n      return {\n        status: PermissionStatus.GRANTED,\n        expires: 'never',\n        canAskAgain: true,\n        granted: true,\n      };\n    case PermissionStatus.DENIED:\n      return {\n        status: PermissionStatus.DENIED,\n        expires: 'never',\n        canAskAgain: true,\n        granted: false,\n      };\n    default:\n      return await requestRecordingPermissionsAsync();\n  }\n}\n\nexport async function requestRecordingPermissionsAsync(): Promise<PermissionResponse> {\n  try {\n    const stream = await getUserMedia({ audio: true });\n    stream.getTracks().forEach((track) => track.stop());\n    return {\n      status: PermissionStatus.GRANTED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: true,\n    };\n  } catch {\n    return {\n      status: PermissionStatus.DENIED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: false,\n    };\n  }\n}\n\nexport default {\n  AudioPlayer: AudioPlayerWeb,\n  AudioRecorder: AudioRecorderWeb,\n  AudioPlaylist: AudioPlaylistWeb,\n  setAudioModeAsync,\n  setIsAudioActiveAsync,\n  getRecordingPermissionsAsync,\n  requestRecordingPermissionsAsync,\n};\n"]}