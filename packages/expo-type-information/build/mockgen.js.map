{"version":3,"file":"mockgen.js","sourceRoot":"","sources":["../src/mockgen.ts"],"names":[],"mappings":"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","sourcesContent":["#!/usr/bin/env node\n'use strict';\n\nimport fs, { globSync } from 'fs';\nimport path from 'path';\nimport ts from 'typescript';\n\nimport {\n  BasicType,\n  ClassDeclaration,\n  EnumType,\n  FileTypeInformation,\n  FunctionDeclaration,\n  getFileTypeInformation,\n  IdentifierKind,\n  ModuleClassDeclaration,\n  OptionalType,\n  RecordType,\n  SumType,\n  Type,\n  TypeKind,\n  ViewDeclaration,\n} from './typeInformation';\nimport {\n  basicTypesIdentifiers,\n  getEnumDeclaration,\n  getIdentifierUnknownDeclaration,\n  getPropsTypeDeclaration,\n  getRecordDeclaration,\n  getTsClass,\n  getTsFunction,\n  getViewPropsTypeName,\n  prettifyCode,\n} from './typescriptGeneration';\n\nconst directoryPath = process.cwd();\nconst prefix = `Automatically generated by expo-type-information.\n\nThis autogenerated file provides a mock for native Expo module,\nand works out of the box with the expo jest preset.\n`;\n\nfunction getPrefix() {\n  return [ts.factory.createJSDocComment(prefix)];\n}\n\nlet freeId = 0;\n\nfunction getNextFreeId() {\n  freeId += 1;\n  return freeId;\n}\n\nconst newlineIdentifier = ts.factory.createIdentifier('\\n\\n') as any;\n\nfunction maybeWrapWithReturnStatement(\n  type: Type,\n  fileTypeInformation: FileTypeInformation\n): ts.ReturnStatement[] {\n  if (type.kind === TypeKind.BASIC) {\n    const basicType = type.type as BasicType;\n    if (basicType === BasicType.VOID || basicType === BasicType.ANY) {\n      return [];\n    }\n  }\n\n  // TODO maybe add a comment when we couldn't create a mock for the return type\n  const returnExpression = getMockedValueForType(type, fileTypeInformation);\n  if (returnExpression || type.kind !== TypeKind.BASIC || type.type === BasicType.UNRESOLVED) {\n    return [ts.factory.createReturnStatement(returnExpression)];\n  }\n  return [];\n}\n\nfunction getBasicTypeMockLiteral(type: BasicType): ts.PrimaryExpression | undefined {\n  switch (type) {\n    case BasicType.STRING:\n      return ts.factory.createStringLiteral('');\n    case BasicType.BOOLEAN:\n      return ts.factory.createFalse();\n    case BasicType.NUMBER:\n      return ts.factory.createNumericLiteral(0);\n    case BasicType.VOID:\n    case BasicType.UNDEFINED:\n    case BasicType.ANY:\n    default:\n      return undefined;\n  }\n}\n\nfunction getBasicTypeFromString(basicType: string): BasicType | undefined {\n  switch (basicType) {\n    case 'any':\n      return BasicType.ANY;\n    case 'number':\n      return BasicType.NUMBER;\n    case 'string':\n      return BasicType.STRING;\n    case 'boolean':\n      return BasicType.BOOLEAN;\n  }\n  return undefined;\n}\n\nfunction getMockedEnumInstance(enumType: EnumType): ts.Expression | undefined {\n  if (enumType.cases.length === 0) {\n    return undefined;\n  }\n\n  return ts.factory.createPropertyAccessExpression(\n    ts.factory.createRegularExpressionLiteral(enumType.name),\n    enumType.cases[0]\n  );\n}\n\nfunction getMockedRecordInstance(recordType: RecordType, fileTypeInformation: FileTypeInformation) {\n  return ts.factory.createObjectLiteralExpression(\n    recordType.fields.map((f) =>\n      ts.factory.createPropertyAssignment(\n        f.name ?? '_' + getNextFreeId(),\n        getMockedValueForType(f.type, fileTypeInformation) ?? ts.factory.createNull()\n      )\n    )\n  );\n}\n\nfunction getMockValueForIdentifier(\n  identifier: string,\n  fileTypeInformation: FileTypeInformation\n): ts.Expression | undefined {\n  if (!fileTypeInformation.typeIdentifierDefinitionMap.has(identifier)) {\n    return undefined;\n  }\n\n  const typeDefinition = fileTypeInformation.typeIdentifierDefinitionMap.get(identifier);\n  switch (typeDefinition?.kind) {\n    case IdentifierKind.BASIC: {\n      const basicType = getBasicTypeFromString(typeDefinition.definition as string);\n      if (basicType) {\n        return getBasicTypeMockLiteral(basicType);\n      }\n      return undefined;\n    }\n    case IdentifierKind.ENUM:\n      return getMockedEnumInstance(typeDefinition.definition as EnumType);\n    case IdentifierKind.RECORD:\n      return getMockedRecordInstance(typeDefinition.definition as RecordType, fileTypeInformation);\n  }\n  return undefined;\n}\n\nfunction getMockedValueForType(\n  type: Type,\n  fileTypeInformation: FileTypeInformation\n): ts.Expression | undefined {\n  switch (type.kind) {\n    case TypeKind.BASIC:\n      return getBasicTypeMockLiteral(type.type as BasicType);\n    case TypeKind.IDENTIFIER:\n      return getMockValueForIdentifier(type.type as string, fileTypeInformation);\n    case TypeKind.SUM:\n      return getMockedValueForType((type.type as SumType).types[0], fileTypeInformation);\n    case TypeKind.PARAMETRIZED:\n      return ts.factory.createNull();\n    case TypeKind.OPTIONAL:\n      return getMockedValueForType(type.type as OptionalType, fileTypeInformation);\n    case TypeKind.ARRAY:\n      return ts.factory.createArrayLiteralExpression();\n    case TypeKind.DICTIONARY:\n      return ts.factory.createObjectLiteralExpression();\n  }\n}\n\nfunction getFunctionReturnBlock(\n  functionDeclaration: FunctionDeclaration,\n  fileTypeInformation: FileTypeInformation\n): ts.ReturnStatement[] {\n  return maybeWrapWithReturnStatement(functionDeclaration.returnType, fileTypeInformation);\n}\n\nfunction getMockedFunctionDeclaration(\n  functionDeclaration: FunctionDeclaration,\n  fileTypeInformation: FileTypeInformation,\n  async: boolean,\n  exported: boolean\n): ts.FunctionDeclaration {\n  return getTsFunction(\n    functionDeclaration,\n    async,\n    false,\n    exported,\n    false,\n    maybeWrapWithReturnStatement(functionDeclaration.returnType, fileTypeInformation)\n  ) as ts.FunctionDeclaration;\n}\n\nfunction getMockedClass(\n  classDeclaration: ClassDeclaration,\n  fileTypeInformation: FileTypeInformation\n): ts.ClassDeclaration {\n  return getTsClass(classDeclaration, fileTypeInformation, true, false, getFunctionReturnBlock);\n}\n\nfunction getMockedView(viewDeclaration: ViewDeclaration): ts.Node[] {\n  const propsTypeName = getViewPropsTypeName(viewDeclaration);\n  const propsType = getPropsTypeDeclaration(\n    propsTypeName,\n    viewDeclaration.props,\n    viewDeclaration.events\n  );\n  const propsParameter = ts.factory.createParameterDeclaration(\n    undefined,\n    undefined,\n    'props',\n    undefined,\n    ts.factory.createTypeReferenceNode(propsTypeName, undefined),\n    undefined\n  );\n  const viewFunction = ts.factory.createFunctionDeclaration(\n    [ts.factory.createModifier(ts.SyntaxKind.ExportKeyword)],\n    undefined,\n    (viewDeclaration.name?.length ?? 0) > 0 ? viewDeclaration.name : 'View',\n    undefined,\n    [propsParameter],\n    undefined,\n    ts.factory.createBlock([])\n  );\n  return [...propsType, viewFunction];\n}\n\nfunction getMockForModule(\n  module: ModuleClassDeclaration,\n  fileTypeInformation: FileTypeInformation\n) {\n  const undeclaredTypeIdentifiers: Set<string> = fileTypeInformation.usedTypeIdentifiers\n    .difference(fileTypeInformation.declaredTypeIdentifiers)\n    .difference(basicTypesIdentifiers());\n  return ([] as ts.Node[])\n    .concat(\n      getPrefix(),\n      newlineIdentifier,\n      [...undeclaredTypeIdentifiers].map((identifier) =>\n        getIdentifierUnknownDeclaration(identifier, true, fileTypeInformation.typeParametersCount)\n      ),\n      newlineIdentifier,\n      fileTypeInformation.records.flatMap(getRecordDeclaration),\n      newlineIdentifier,\n      fileTypeInformation.enums.flatMap(getEnumDeclaration),\n      newlineIdentifier,\n      module.functions.map((f) =>\n        getMockedFunctionDeclaration(f, fileTypeInformation, false, true)\n      ),\n      module.asyncFunctions.map((f) =>\n        getMockedFunctionDeclaration(f, fileTypeInformation, true, true)\n      ),\n      module.classes.map((c) => getMockedClass(c, fileTypeInformation)),\n      module.views.map((v) => getMockedView(v)).flat()\n    )\n    .flat();\n}\n\nexport function generateTSMockForModule(\n  module: ModuleClassDeclaration,\n  fileTypeInformation: FileTypeInformation,\n  includeTypes: boolean\n): string {\n  const mockFileName = module.name + (includeTypes ? '.ts' : '.js');\n  const mock = ts.factory.createNodeArray(getMockForModule(module, fileTypeInformation));\n\n  const printer = ts.createPrinter({ newLine: ts.NewLineKind.LineFeed });\n  // get ts nodearray from getMockForModule(m) array\n  const resultFile = ts.createSourceFile(\n    mockFileName,\n    '',\n    ts.ScriptTarget.Latest,\n    false,\n    ts.ScriptKind.TSX\n  );\n  const printedTs = printer.printList(\n    ts.ListFormat.MultiLine + ts.ListFormat.PreserveLines,\n    mock,\n    resultFile\n  );\n\n  if (includeTypes) {\n    return printedTs;\n  }\n  return ts.transpileModule(printedTs, {\n    compilerOptions: {\n      module: ts.ModuleKind.ESNext,\n      target: ts.ScriptTarget.ESNext,\n    },\n  }).outputText;\n}\n\nexport async function generateMocks(\n  files: FileTypeInformation[],\n  outputLanguage: 'javascript' | 'typescript' = 'javascript'\n) {\n  if (files.length > 0) {\n    fs.mkdirSync(path.join(directoryPath, 'mocks'), { recursive: true });\n  }\n\n  for (const file of files) {\n    for (const module of file.moduleClasses) {\n      const mockFileName = module.name + (outputLanguage === 'typescript' ? '.ts' : '.js');\n      const mockFilePath = path.join(directoryPath, 'mocks', mockFileName);\n      const printedCode = generateTSMockForModule(module, file, outputLanguage === 'typescript');\n\n      if (outputLanguage === 'javascript') {\n        const prettifiedJs = await prettifyCode(printedCode);\n        fs.writeFileSync(mockFilePath, prettifiedJs);\n      } else {\n        const prettifiedTs = await prettifyCode(printedCode, 'typescript');\n        fs.writeFileSync(mockFilePath, prettifiedTs);\n      }\n    }\n  }\n}\n\nconst rootDir = process.cwd();\nconst pattern = `${rootDir}/**/*.swift`;\nexport function getAllExpoModulesInWorkingDirectory(): FileTypeInformation[] {\n  const files = globSync(pattern);\n  return files\n    .map((file) => getFileTypeInformation(fs.realpathSync(file)))\n    .filter((f) => f) as FileTypeInformation[];\n}\n"]}