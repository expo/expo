{"version":3,"file":"cli.js","sourceRoot":"","sources":["../src/cli.ts"],"names":[],"mappings":"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","sourcesContent":["import chalk from 'chalk';\nimport commander from 'commander';\nimport fs from 'fs';\n\nimport { generateMocks } from './mockgen';\nimport { getFileTypeInformation, serializeTypeInformation } from './typeInformation';\nimport {\n  getGeneratedModuleTypesFileContent,\n  getGeneratedViewTypesFileContent,\n} from './typescriptGeneration';\n\nasync function main(args: string[]) {\n  const cli = commander\n    .version(require('expo-type-information/package.json').version)\n    .description('CLI commands for retrieving type information from native files.');\n\n  typeInformationCommand(cli);\n  generateModuleTypesCommand(cli);\n  generateViewTypesCommand(cli);\n  generateMocksForFileCommand(cli);\n\n  await cli.parseAsync(args, { from: 'user' });\n}\n\nmain(process.argv.slice(2));\n\nfunction typeInformationCommand(cli: commander.CommanderStatic) {\n  return cli.command('type-information <filePath>').action((filePath: string) => {\n    const typeInfo = getFileTypeInformation(filePath, true);\n    if (typeInfo) {\n      const typeInfoSerialized = serializeTypeInformation(typeInfo);\n      console.log(JSON.stringify(typeInfoSerialized, null, 2));\n    } else {\n      console.log(chalk.red(`Provided file: ${filePath} couldn't be parsed for type infromation!`));\n    }\n  });\n}\n\nfunction generateModuleTypesCommand(cli: commander.CommanderStatic) {\n  return cli.command('generate-module-types <filePath>').action((filePath: string) => {\n    const typeInfo = getFileTypeInformation(filePath, true);\n    if (typeInfo) {\n      getGeneratedModuleTypesFileContent(fs.realpathSync(filePath), typeInfo).then(console.log);\n    } else {\n      console.log(chalk.red(`Provided file: ${filePath} couldn't be parsed for type infromation!`));\n    }\n  });\n}\n\nfunction generateViewTypesCommand(cli: commander.CommanderStatic) {\n  return cli.command('generate-view-types <filePath>').action((filePath: string) => {\n    const typeInfo = getFileTypeInformation(filePath, true);\n    if (typeInfo) {\n      getGeneratedViewTypesFileContent(fs.realpathSync(filePath), typeInfo).then(console.log);\n    } else {\n      console.log(chalk.red(`Provided file: ${filePath} couldn't be parsed for type infromation!`));\n    }\n  });\n}\n\nfunction generateMocksForFileCommand(cli: commander.CommanderStatic) {\n  return cli.command('generate-mocks-for-file <filePath>').action((filePath: string) => {\n    const typeInfo = getFileTypeInformation(filePath, true);\n    if (typeInfo) {\n      generateMocks([typeInfo], 'typescript');\n    } else {\n      console.log(chalk.red(`Provided file: ${filePath} couldn't be parsed for type infromation!`));\n    }\n  });\n}\n"]}