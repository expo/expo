{"version":3,"file":"peripheralCache.js","sourceRoot":"","sources":["../src/peripheralCache.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,kBAAkB,EAAE,MAAM,cAAc,CAAC;AAElD,2CAA2C;AAC3C,IAAI,YAAY,GAA2C,EAAE,CAAC;AAE9D,IAAI,eAAe,GAAQ,EAAE,CAAC;AAE9B,MAAM,UAAU,cAAc;IAC5B,OAAO,YAAY,CAAC;AACtB,CAAC;AAED,MAAM,UAAU,kBAAkB,CAAC,EAAU;IAC3C,MAAM,IAAI,GAAG,kBAAkB,CAAC,EAAE,CAAC,CAAC;IACpC,OAAO,YAAY,CAAC,IAAI,CAAC,CAAC;AAC5B,CAAC;AAED,MAAM,UAAU,gBAAgB;IAC9B,YAAY,GAAG,EAAE,CAAC;AACpB,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,IAAU;IACzC,OAAO,YAAY,CAAC,IAAI,CAAC,CAAC;AAC5B,CAAC;AAED,MAAM,UAAU,yBAAyB,CAAC,UAAsB;IAC9D,MAAM,EACJ,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE,iBAAiB,GAAG;QACnC,kBAAkB,EAAE,IAAI,CAAC,GAAG,EAAE;QAC9B,iBAAiB,EAAE,SAAS;QAC5B,IAAI,EAAE,IAAI;KACX,EACD,GAAG,MAAM,EACV,GAAG,YAAY,CAAC;IACjB,YAAY,GAAG;QACb,GAAG,MAAM;QACT,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;YACf,kBAAkB,EAAE,iBAAiB,CAAC,kBAAkB;YACxD,iBAAiB,EAAE,iBAAiB,CAAC,iBAAiB;YACtD,IAAI,EAAE,iBAAiB,CAAC,IAAI;YAC5B,wBAAwB;YACxB,GAAG,UAAU;SACd;KACF,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,4BAA4B,CAAC,YAAoB,EAAE,iBAAsB;IACvF,MAAM,EAAE,CAAC,YAAY,CAAC,EAAE,OAAO,GAAG,EAAE,EAAE,GAAG,MAAM,EAAE,GAAG,eAAe,CAAC;IACpE,eAAe,GAAG;QAChB,GAAG,MAAM;QACT,CAAC,YAAY,CAAC,EAAE;YACd,YAAY;YACZ,cAAc;YACd,GAAG,iBAAiB;SACrB;KACF,CAAC;AACJ,CAAC","sourcesContent":["import { Peripheral, UUID } from './Bluetooth.types';\nimport { peripheralIdFromId } from './operations';\n\n// Manage all of the bluetooth information.\nlet _peripherals: { [peripheralId: string]: Peripheral } = {};\n\nlet _advertisements: any = {};\n\nexport function getPeripherals(): { [peripheralId: string]: Peripheral } {\n  return _peripherals;\n}\n\nexport function getPeripheralForId(id: string): any {\n  const uuid = peripheralIdFromId(id);\n  return _peripherals[uuid];\n}\n\nexport function clearPeripherals() {\n  _peripherals = {};\n}\n\nexport function removePeripheral(uuid: UUID) {\n  delete _peripherals[uuid];\n}\n\nexport function updateStateWithPeripheral(peripheral: Peripheral) {\n  const {\n    [peripheral.id]: currentPeripheral = {\n      discoveryTimestamp: Date.now(),\n      advertisementData: undefined,\n      RSSI: null,\n    },\n    ...others\n  } = _peripherals;\n  _peripherals = {\n    ...others,\n    [peripheral.id]: {\n      discoveryTimestamp: currentPeripheral.discoveryTimestamp,\n      advertisementData: currentPeripheral.advertisementData,\n      RSSI: currentPeripheral.RSSI,\n      // ...currentPeripheral,\n      ...peripheral,\n    },\n  };\n}\n\nexport function updateAdvertisementDataStore(peripheralId: string, advertisementData: any) {\n  const { [peripheralId]: current = {}, ...others } = _advertisements;\n  _advertisements = {\n    ...others,\n    [peripheralId]: {\n      peripheralId,\n      // ...current,\n      ...advertisementData,\n    },\n  };\n}\n"]}