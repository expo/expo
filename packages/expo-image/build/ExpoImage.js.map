{"version":3,"file":"ExpoImage.js","sourceRoot":"","sources":["../src/ExpoImage.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,wBAAwB,EAAE,mBAAmB,EAAE,MAAM,mBAAmB,CAAC;AAClF,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAwB,UAAU,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,cAAc,CAAC;AASxF,MAAM,eAAe,GAAG,wBAAwB,CAAC,WAAW,CAAC,CAAC;AAE9D,MAAM,eAAe,GAAG,mBAAmB,CAAC,WAAW,CAAC,CAAC;AAEzD,SAAS,yBAAyB,CAChC,KAAwC;IAExC,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,WAAW,EAAE,aAAa,EAAE;QACtD,GAAG;YACD,OAAO,CAAC,IAAI,CACV,sHAAsH,CACvH,CAAC;YACF,OAAO,KAAK,CAAC,WAAW,CAAC;QAC3B,CAAC;KACF,CAAC,CAAC;IACH,OAAO,KAAK,CAAC,WAAW,CAAC;AAC3B,CAAC;AAED,MAAM,SAAU,SAAQ,KAAK,CAAC,aAA+B;IAC3D,WAAW,GAAG,GAAG,EAAE;QACjB,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC;IAC7B,CAAC,CAAC;IAEF,MAAM,GAAG,CAAC,KAA+C,EAAE,EAAE;QAC3D,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC,CAAC;QACtD,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC,CAAC;IAEF,UAAU,GAAG,CAAC,KAAmD,EAAE,EAAE;QACnE,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC,CAAC;IAC5D,CAAC,CAAC;IAEF,OAAO,GAAG,CAAC,KAAgD,EAAE,EAAE;QAC7D,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC,CAAC;IAEF,SAAS,GAAG,GAAG,EAAE;QACf,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC;IAC3B,CAAC,CAAC;IAEF,MAAM;QACJ,MAAM,EAAE,KAAK,EAAE,kBAAkB,EAAE,GAAG,EAAE,GAAG,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAChE,MAAM,aAAa,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAEhD,kDAAkD;QAClD,iDAAiD;QACjD,6CAA6C;QAC7C,IAAI,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE;YAC7B,OAAO,aAAa,CAAC,WAAW,CAAC;YACjC,OAAO,aAAa,CAAC,YAAY,CAAC;YAClC,OAAO,aAAa,CAAC,aAAa,CAAC;YACnC,OAAO,aAAa,CAAC,YAAY,CAAC;SACnC;aAAM;YACL,mBAAmB;YACnB,OAAO,aAAa,CAAC,SAAS,CAAC;SAChC;QAED,aAAa;QACb,MAAM,eAAe,GAAG,YAAY,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;QACpE,sFAAsF;QACtF,wHAAwH;QACxH,IAAI,QAAQ,CAAC,EAAE,KAAK,SAAS,EAAE;YAC7B,OAAO,aAAa,CAAC,eAAe,CAAC;SACtC;QAED,MAAM,SAAS,GAAG,YAAY,CAAC,KAAK,CAAC,SAAS,IAAI,aAAa,CAAC,SAAS,CAAC,CAAC;QAE3E,MAAM,WAAW,GAAG,YAAY,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAC5D,aAAa;QACb,MAAM,gBAAgB,GAAG,YAAY,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;QACtE,aAAa;QACb,MAAM,cAAc,GAAG,YAAY,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;QAClE,aAAa;QACb,MAAM,eAAe,GAAG,YAAY,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;QACpE,aAAa;QACb,MAAM,gBAAgB,GAAG,YAAY,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;QACtE,aAAa;QACb,MAAM,cAAc,GAAG,YAAY,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;QAClE,aAAa;QACb,MAAM,iBAAiB,GAAG,YAAY,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;QAExE,OAAO,CACL,CAAC,eAAe,CACd,IAAI,KAAK,CAAC,CACV,IAAI,aAAa,CAAC,CAClB,kBAAkB,CAAC,CAAC,kBAAkB,IAAI,GAAG,CAAC,CAC9C,KAAK,CAAC,CAAC,aAAa,CAAC,CACrB,WAAW,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAC9B,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CACpB,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAC5B,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CACtB,SAAS,CAAC,CAAC,SAAS,CAAC,CACrB,WAAW,CAAC,CAAC,WAAW,CAAC,CACzB,eAAe,CAAC,CAAC,eAAe,CAAC,CACjC,gBAAgB,CAAC,CAAC,gBAAgB,CAAC,CACnC,cAAc,CAAC,CAAC,cAAc,CAAC,CAC/B,iBAAiB,CAAC,CAAC,iBAAiB,CAAC,CACrC,gBAAgB,CAAC,CAAC,gBAAgB,CAAC,CACnC,cAAc,CAAC,CAAC,cAAc,CAAC,CAC/B,eAAe,CAAC,CAAC,eAAe,CAAC,CACjC,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,EACzB,CACH,CAAC;IACJ,CAAC;CACF;AAED,OAAO,EAAE,eAAe,EAAE,CAAC;AAC3B,eAAe,SAAS,CAAC","sourcesContent":["import { requireNativeViewManager, requireNativeModule } from 'expo-modules-core';\nimport React from 'react';\nimport { NativeSyntheticEvent, StyleSheet, Platform, processColor } from 'react-native';\n\nimport {\n  ImageErrorEventData,\n  ImageLoadEventData,\n  ImageNativeProps,\n  ImageProgressEventData,\n} from './Image.types';\n\nconst NativeExpoImage = requireNativeViewManager('ExpoImage');\n\nconst ExpoImageModule = requireNativeModule('ExpoImage');\n\nfunction withDeprecatedNativeEvent<NativeEvent>(\n  event: NativeSyntheticEvent<NativeEvent>\n): NativeEvent {\n  Object.defineProperty(event.nativeEvent, 'nativeEvent', {\n    get() {\n      console.warn(\n        '[expo-image]: Accessing event payload through \"nativeEvent\" is deprecated, it is now part of the event object itself'\n      );\n      return event.nativeEvent;\n    },\n  });\n  return event.nativeEvent;\n}\n\nclass ExpoImage extends React.PureComponent<ImageNativeProps> {\n  onLoadStart = () => {\n    this.props.onLoadStart?.();\n  };\n\n  onLoad = (event: NativeSyntheticEvent<ImageLoadEventData>) => {\n    this.props.onLoad?.(withDeprecatedNativeEvent(event));\n    this.onLoadEnd();\n  };\n\n  onProgress = (event: NativeSyntheticEvent<ImageProgressEventData>) => {\n    this.props.onProgress?.(withDeprecatedNativeEvent(event));\n  };\n\n  onError = (event: NativeSyntheticEvent<ImageErrorEventData>) => {\n    this.props.onError?.(withDeprecatedNativeEvent(event));\n    this.onLoadEnd();\n  };\n\n  onLoadEnd = () => {\n    this.props.onLoadEnd?.();\n  };\n\n  render() {\n    const { style, accessibilityLabel, alt, ...props } = this.props;\n    const resolvedStyle = StyleSheet.flatten(style);\n\n    // Shadows behave different on iOS, Android & Web.\n    // Android uses the `elevation` prop, whereas iOS\n    // and web use the regular `shadow...` props.\n    if (Platform.OS === 'android') {\n      delete resolvedStyle.shadowColor;\n      delete resolvedStyle.shadowOffset;\n      delete resolvedStyle.shadowOpacity;\n      delete resolvedStyle.shadowRadius;\n    } else {\n      // @ts-expect-error\n      delete resolvedStyle.elevation;\n    }\n\n    // @ts-ignore\n    const backgroundColor = processColor(resolvedStyle.backgroundColor);\n    // On Android, we have to set the `backgroundColor` directly on the correct component.\n    // So we have to remove it from styles. Otherwise, the background color won't take into consideration the border-radius.\n    if (Platform.OS === 'android') {\n      delete resolvedStyle.backgroundColor;\n    }\n\n    const tintColor = processColor(props.tintColor || resolvedStyle.tintColor);\n\n    const borderColor = processColor(resolvedStyle.borderColor);\n    // @ts-ignore\n    const borderStartColor = processColor(resolvedStyle.borderStartColor);\n    // @ts-ignore\n    const borderEndColor = processColor(resolvedStyle.borderEndColor);\n    // @ts-ignore\n    const borderLeftColor = processColor(resolvedStyle.borderLeftColor);\n    // @ts-ignore\n    const borderRightColor = processColor(resolvedStyle.borderRightColor);\n    // @ts-ignore\n    const borderTopColor = processColor(resolvedStyle.borderTopColor);\n    // @ts-ignore\n    const borderBottomColor = processColor(resolvedStyle.borderBottomColor);\n\n    return (\n      <NativeExpoImage\n        {...props}\n        {...resolvedStyle}\n        accessibilityLabel={accessibilityLabel ?? alt}\n        style={resolvedStyle}\n        onLoadStart={this.onLoadStart}\n        onLoad={this.onLoad}\n        onProgress={this.onProgress}\n        onError={this.onError}\n        tintColor={tintColor}\n        borderColor={borderColor}\n        borderLeftColor={borderLeftColor}\n        borderRightColor={borderRightColor}\n        borderTopColor={borderTopColor}\n        borderBottomColor={borderBottomColor}\n        borderStartColor={borderStartColor}\n        borderEndColor={borderEndColor}\n        backgroundColor={backgroundColor}\n        ref={props.nativeViewRef}\n      />\n    );\n  }\n}\n\nexport { ExpoImageModule };\nexport default ExpoImage;\n"]}