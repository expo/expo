{"version":3,"file":"ExpoFirebaseAnalytics.js","sourceRoot":"","sources":["../src/ExpoFirebaseAnalytics.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAC;AACxC,OAAO,EAAE,kBAAkB,EAAE,mBAAmB,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAC;AACvF,OAAO,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,MAAM,oBAAoB,CAAC;AAC3E,MAAM,EAAE,qBAAqB,EAAE,GAAG,kBAAkB,CAAC;AAErD,IAAI,CAAC,qBAAqB,EAAE;IAC1B,OAAO,CAAC,IAAI,CACV,qHAAqH,CACtH,CAAC;CACH;AAED,IAAI,8BAA8B,GAAG,IAAI,CAAC;AAC1C,IAAI,6BAA6B,GAAG,KAAK,CAAC;AAE1C,SAAS,mBAAmB,CAAC,QAAgB,EAAE,GAAG,IAAI;IACpD,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,EAAE;QACpC,MAAM,IAAI,mBAAmB,CAAC,yBAAyB,EAAE,QAAQ,CAAC,CAAC;KACpE;IACD,IAAI,CAAC,mBAAmB,EAAE;QACxB,MAAM,IAAI,UAAU,CAClB,4BAA4B,EAC5B,gEAAgE,QAAQ,CAAC,MAAM,CAAC;YAC9E,GAAG,EAAE,0BAA0B;YAC/B,OAAO,EAAE,sBAAsB;SAChC,CAAC,cAAc,CACjB,CAAC;KACH;IAED,wEAAwE;IACxE,gEAAgE;IAChE,8EAA8E;IAC9E,2EAA2E;IAC3E,IAAI,gBAAgB,KAAK,WAAW,EAAE;QACpC,IAAI,8BAA8B,EAAE;YAClC,IAAI,CAAC,6BAA6B,EAAE;gBAClC,OAAO,CAAC,IAAI,CACV,iMAAiM,CAClM,CAAC;gBACF,6BAA6B,GAAG,IAAI,CAAC;aACtC;YACD,OAAO,CAAC,IAAI,CAAC,yBAAyB,QAAQ,KAAK,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAC5E;QACD,OAAO;KACR;IAED,gBAAgB;IAChB,OAAO,qBAAqB,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,GAAG,IAAI,CAAC,CAAC;AAC9E,CAAC;AAED,eAAe;IACb,IAAI,IAAI;QACN,OAAO,uBAAuB,CAAC;IACjC,CAAC;IACD,KAAK,CAAC,QAAQ,CAAC,IAAY,EAAE,UAAmC;QAC9D,OAAO,mBAAmB,CAAC,UAAU,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC;IAC3D,CAAC;IACD,KAAK,CAAC,6BAA6B,CAAC,SAAkB;QACpD,OAAO,mBAAmB,CAAC,qBAAqB,EAAE,SAAS,CAAC,CAAC;IAC/D,CAAC;IACD,KAAK,CAAC,gBAAgB,CAAC,UAAmB,EAAE,mBAA4B;QACtE,OAAO,mBAAmB,CAAC,kBAAkB,EAAE,UAAU,EAAE,mBAAmB,CAAC,CAAC;IAClF,CAAC;IACD,KAAK,CAAC,yBAAyB,CAAC,sBAA8B;QAC5D,OAAO,mBAAmB,CAAC,2BAA2B,EAAE,sBAAsB,CAAC,CAAC;IAClF,CAAC;IACD,KAAK,CAAC,SAAS,CAAC,MAAqB;QACnC,OAAO,mBAAmB,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;IAClD,CAAC;IACD,KAAK,CAAC,iBAAiB,CAAC,UAAkC;QACxD,OAAO,mBAAmB,CAAC,mBAAmB,EAAE,UAAU,CAAC,CAAC;IAC9D,CAAC;IACD,KAAK,CAAC,kBAAkB;QACtB,OAAO,mBAAmB,CAAC,oBAAoB,CAAC,CAAC;IACnD,CAAC;IACD,wBAAwB,CAAC,SAAkB;QACzC,8BAA8B,GAAG,SAAS,CAAC;IAC7C,CAAC;CACF,CAAC","sourcesContent":["import { Platform } from 'react-native';\nimport { NativeModulesProxy, UnavailabilityError, CodedError } from '@unimodules/core';\nimport { DEFAULT_APP_NAME, DEFAULT_APP_OPTIONS } from 'expo-firebase-core';\nconst { ExpoFirebaseAnalytics } = NativeModulesProxy;\n\nif (!ExpoFirebaseAnalytics) {\n  console.warn(\n    \"No native ExpoFirebaseAnalytics module found, are you sure the expo-firebase-analytics's module is linked properly?\"\n  );\n}\n\nlet isUnavailabilityLoggingEnabled = true;\nlet isUnavailabilityWarningLogged = false;\n\nfunction callAnalyticsModule(funcName: string, ...args) {\n  if (!ExpoFirebaseAnalytics[funcName]) {\n    throw new UnavailabilityError('expo-firebase-analytics', funcName);\n  }\n  if (!DEFAULT_APP_OPTIONS) {\n    throw new CodedError(\n      'ERR_FIREBASE_NOTCONFIGURED',\n      `Firebase is not configured. Ensure that you have configured '${Platform.select({\n        ios: 'GoogleService-Info.plist',\n        android: 'google-services.json',\n      })}' correctly.`\n    );\n  }\n\n  // Analytics is only available for the [DEFAULT] app. On the Expo client\n  // a sandboxed app is returned which does not support analytics.\n  // In that case we show a warning and log the analytics events to the console.\n  // The user can disable these by calling `setUnavailabilityLogging(false)`.\n  if (DEFAULT_APP_NAME !== '[DEFAULT]') {\n    if (isUnavailabilityLoggingEnabled) {\n      if (!isUnavailabilityWarningLogged) {\n        console.warn(\n          'Firebase Analytics is not available in the Expo client. To test Firebase Analytics create a stand-alone build or custom client. To suppress this warning use `setUnavailabilityLogging(false)`.'\n        );\n        isUnavailabilityWarningLogged = true;\n      }\n      console.info(`ExpoFirebaseAnalytics.${funcName}: ${JSON.stringify(args)}`);\n    }\n    return;\n  }\n\n  // Make the call\n  return ExpoFirebaseAnalytics[funcName].call(ExpoFirebaseAnalytics, ...args);\n}\n\nexport default {\n  get name(): string {\n    return 'ExpoFirebaseAnalytics';\n  },\n  async logEvent(name: string, properties?: { [key: string]: any }): Promise<void> {\n    return callAnalyticsModule('logEvent', name, properties);\n  },\n  async setAnalyticsCollectionEnabled(isEnabled: boolean): Promise<void> {\n    return callAnalyticsModule('setAnalyticsEnabled', isEnabled);\n  },\n  async setCurrentScreen(screenName?: string, screenClassOverride?: string): Promise<void> {\n    return callAnalyticsModule('setCurrentScreen', screenName, screenClassOverride);\n  },\n  async setSessionTimeoutDuration(sessionTimeoutInterval: number): Promise<void> {\n    return callAnalyticsModule('setSessionTimeoutDuration', sessionTimeoutInterval);\n  },\n  async setUserId(userId: string | null): Promise<void> {\n    return callAnalyticsModule('setUserId', userId);\n  },\n  async setUserProperties(properties: { [key: string]: any }): Promise<void> {\n    return callAnalyticsModule('setUserProperties', properties);\n  },\n  async resetAnalyticsData(): Promise<void> {\n    return callAnalyticsModule('resetAnalyticsData');\n  },\n  setUnavailabilityLogging(isEnabled: boolean): void {\n    isUnavailabilityLoggingEnabled = isEnabled;\n  },\n};\n"]}