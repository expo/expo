{"version":3,"file":"ExpoFirebaseAnalytics.web.js","sourceRoot":"","sources":["../src/ExpoFirebaseAnalytics.web.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,mBAAmB,EAAE,MAAM,oBAAoB,CAAC;AACzD,OAAO,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAE/C,SAAS,iBAAiB;IACxB,IAAI;QACF,MAAM,cAAc,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;QACtD,MAAM,QAAQ,GAAG,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC;QACxF,IAAI,mBAAmB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE;YAChD,QAAQ,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;SAC7C;QACD,OAAO,QAAQ,CAAC;KACjB;IAAC,OAAO,EAAE,OAAO,EAAE,EAAE;QACpB,MAAM,IAAI,KAAK,CAAC,oCAAoC,GAAG,OAAO,CAAC,CAAC;KACjE;AACH,CAAC;AACD,SAAS,kBAAkB;IACzB,IAAI;QACF,MAAM,QAAQ,GAAG,iBAAiB,EAAE,CAAC;QACrC,OAAO,CAAC,2BAA2B,CAAC,CAAC;QACrC,OAAO,QAAQ,CAAC,SAAS,EAAE,CAAC;KAC7B;IAAC,OAAO,EAAE,OAAO,EAAE,EAAE;QACpB,MAAM,IAAI,KAAK,CAAC,8CAA8C,GAAG,OAAO,CAAC,CAAC;KAC3E;AACH,CAAC;AAED,eAAe;IACb,IAAI,IAAI;QACN,OAAO,uBAAuB,CAAC;IACjC,CAAC;IACD;;OAEG;IACH,KAAK,CAAC,QAAQ,CAAC,IAAY,EAAE,UAAmC;QAC9D,kBAAkB,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IAClD,CAAC;IACD;;OAEG;IACH,KAAK,CAAC,6BAA6B,CAAC,SAAkB;QACpD,kBAAkB,EAAE,CAAC,6BAA6B,CAAC,SAAS,CAAC,CAAC;IAChE,CAAC;IACD;;OAEG;IACH,KAAK,CAAC,gBAAgB,CAAC,UAAmB,EAAE,mBAA4B;QACtE,kBAAkB,EAAE,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;QAElD,0FAA0F;QAC1F,2EAA2E;QAC3E,uHAAuH;QACvH,IAAI,UAAU,EAAE;YACd,kBAAkB,EAAE,CAAC,QAAQ,CAAC,aAAa,EAAE;gBAC3C,WAAW,EAAE,UAAU;aACxB,CAAC,CAAC;SACJ;IACH,CAAC;IACD;;OAEG;IACH,KAAK,CAAC,SAAS,CAAC,MAAqB;QACnC,kBAAkB,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IACzC,CAAC;IACD;;OAEG;IACH,KAAK,CAAC,iBAAiB,CAAC,UAAkC;QACxD,kBAAkB,EAAE,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;IACrD,CAAC;IACD;;OAEG;IACH,wBAAwB,CAAC,SAAkB;QACzC,MAAM;IACR,CAAC;IACD;;OAEG;IACH,KAAK,CAAC,mBAAmB,CAAC,SAAkB;QAC1C,MAAM,IAAI,UAAU,CAClB,4BAA4B,EAC5B,0IAA0I,CAC3I,CAAC;IACJ,CAAC;CACF,CAAC","sourcesContent":["import { DEFAULT_APP_OPTIONS } from 'expo-firebase-core';\nimport { CodedError } from 'expo-modules-core';\n\nfunction getFirebaseModule() {\n  try {\n    const firebaseModule = require('firebase/compat/app');\n    const firebase = firebaseModule.initializeApp ? firebaseModule : firebaseModule.default;\n    if (DEFAULT_APP_OPTIONS && !firebase.apps.length) {\n      firebase.initializeApp(DEFAULT_APP_OPTIONS);\n    }\n    return firebase;\n  } catch ({ message }) {\n    throw new Error('Firebase JS SDK is not installed: ' + message);\n  }\n}\nfunction getAnalyticsModule() {\n  try {\n    const firebase = getFirebaseModule();\n    require('firebase/compat/analytics');\n    return firebase.analytics();\n  } catch ({ message }) {\n    throw new Error('Firebase JS Analytics SDK is not available: ' + message);\n  }\n}\n\nexport default {\n  get name(): string {\n    return 'ExpoFirebaseAnalytics';\n  },\n  /**\n   * https://firebase.google.com/docs/reference/js/firebase.analytics.Analytics#log-event\n   */\n  async logEvent(name: string, properties?: { [key: string]: any }): Promise<void> {\n    getAnalyticsModule().logEvent(name, properties);\n  },\n  /**\n   * https://firebase.google.com/docs/reference/js/firebase.analytics.Analytics#set-analytics-collection-enabled\n   */\n  async setAnalyticsCollectionEnabled(isEnabled: boolean): Promise<void> {\n    getAnalyticsModule().setAnalyticsCollectionEnabled(isEnabled);\n  },\n  /**\n   * https://firebase.google.com/docs/reference/js/firebase.analytics.Analytics#set-current-screen\n   */\n  async setCurrentScreen(screenName?: string, screenClassOverride?: string): Promise<void> {\n    getAnalyticsModule().setCurrentScreen(screenName);\n\n    // On web, calling `setCurrentScreen` does not automatically record a screen_view event as\n    // it does on native. We therefore record the 'screen_view' event manually.\n    // https://stackoverflow.com/questions/59330467/how-to-track-page-view-with-firebase-analytics-in-a-web-single-page-app\n    if (screenName) {\n      getAnalyticsModule().logEvent('screen_view', {\n        screen_name: screenName,\n      });\n    }\n  },\n  /**\n   * https://firebase.google.com/docs/reference/js/firebase.analytics.Analytics#set-user-id\n   */\n  async setUserId(userId: string | null): Promise<void> {\n    getAnalyticsModule().setUserId(userId);\n  },\n  /**\n   * https://firebase.google.com/docs/reference/js/firebase.analytics.Analytics#set-user-properties\n   */\n  async setUserProperties(properties: { [key: string]: any }): Promise<void> {\n    getAnalyticsModule().setUserProperties(properties);\n  },\n  /**\n   * No implementation on web\n   */\n  setUnavailabilityLogging(isEnabled: boolean): void {\n    // nop\n  },\n  /**\n   * Not supported on web\n   */\n  async setDebugModeEnabled(isEnabled: boolean): Promise<void> {\n    throw new CodedError(\n      'ERR_FIREBASE_NOTCONFIGURED',\n      `setDebugModeEnabled is not available on the web. See \"https://firebase.google.com/docs/analytics/debugview\" on how to enable debug mode.`\n    );\n  },\n};\n"]}