{"version":3,"file":"TokenEmitter.js","sourceRoot":"","sources":["../src/TokenEmitter.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAgB,QAAQ,EAAE,MAAM,kBAAkB,CAAC;AAExE,OAAO,gBAAgB,MAAM,oBAAoB,CAAC;AAIlD,iCAAiC;AACjC,MAAM,YAAY,GAAG,IAAI,YAAY,CAAC,gBAAgB,CAAC,CAAC;AACxD,MAAM,iBAAiB,GAAG,mBAAmB,CAAC;AAE9C,MAAM,UAAU,gBAAgB,CAAC,QAAuB;IACtD,MAAM,gBAAgB,GAAG,CAAC,EAAE,eAAe,EAAE,EAAE,EAAE;IAC/C,mDAAmD;IACnD,QAAQ,CAAC,EAAE,IAAI,EAAE,eAAe,EAAE,IAAI,EAAE,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC;IACzD,OAAO,YAAY,CAAC,WAAW,CAAC,iBAAiB,EAAE,gBAAgB,CAAC,CAAC;AACvE,CAAC;AAED,MAAM,UAAU,uBAAuB,CAAC,YAA0B;IAChE,YAAY,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;AAChD,CAAC;AAED,MAAM,UAAU,uBAAuB;IACrC,YAAY,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,CAAC;AACrD,CAAC","sourcesContent":["import { EventEmitter, Subscription, Platform } from '@unimodules/core';\nimport { DevicePushToken } from './getDevicePushTokenAsync';\nimport PushTokenManager from './PushTokenManager';\n\nexport type TokenListener = (token: DevicePushToken) => void;\n\n// Web uses SyntheticEventEmitter\nconst tokenEmitter = new EventEmitter(PushTokenManager);\nconst newTokenEventName = 'onDevicePushToken';\n\nexport function addTokenListener(listener: TokenListener): Subscription {\n  const wrappingListener = ({ devicePushToken }) =>\n    // @ts-ignore: TS can't decide what Platform.OS is.\n    listener({ data: devicePushToken, type: Platform.OS });\n  return tokenEmitter.addListener(newTokenEventName, wrappingListener);\n}\n\nexport function removeTokenSubscription(subscription: Subscription) {\n  tokenEmitter.removeSubscription(subscription);\n}\n\nexport function removeAllTokenListeners() {\n  tokenEmitter.removeAllListeners(newTokenEventName);\n}\n"]}