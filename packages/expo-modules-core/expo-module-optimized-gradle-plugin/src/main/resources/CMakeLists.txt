cmake_minimum_required(VERSION 3.16)
set(CMAKE_VERBOSE_MAKEFILE ON)
set(CMAKE_CXX_STANDARD 20)

# This CMakeLists.txt is generated by expo-module-optimized-gradle-plugin
# It automatically includes generated C++ adapter code for @OptimizedFunction

if(NOT DEFINED EXPO_GENERATED_PROJECT_NAME)
  message(FATAL_ERROR "EXPO_GENERATED_PROJECT_NAME is not defined")
endif()
if(NOT DEFINED EXPO_GENERATED_CPP_DIR)
  message(FATAL_ERROR "EXPO_GENERATED_CPP_DIR is not defined")
endif()

project("${EXPO_GENERATED_PROJECT_NAME}")

find_package(fbjni REQUIRED CONFIG)
find_package(ReactAndroid REQUIRED CONFIG)

# Collect all generated C++ source files
file(GLOB GENERATED_SOURCES "${EXPO_GENERATED_CPP_DIR}/*.cpp")

# Add the generated sources to your existing native library
# Assuming your library is named after your module - adjust as needed
add_library(
  ${CMAKE_PROJECT_NAME}
  SHARED
  ${GENERATED_SOURCES}
)

# Link required libraries
target_link_libraries(
  ${CMAKE_PROJECT_NAME}
  fbjni::fbjni
  # react_nativemodule_core
  ReactAndroid::jsi
)
