{"version":3,"file":"AesModule.js","sourceRoot":"","sources":["../../src/aes/AesModule.ts"],"names":[],"mappings":"AAAA,OAAO,EAAgB,mBAAmB,EAAE,MAAM,MAAM,CAAC;AAsJzD,yDAAyD;AACzD,eAAe,mBAAmB,CAAwB,eAAe,CAAC,CAAC","sourcesContent":["import { NativeModule, requireNativeModule } from 'expo';\n\nimport {\n  DecryptOptions,\n  EncryptOptions,\n  KeySize,\n  SealedDataConfig,\n  BinaryInput,\n} from './aes.types';\n\n/**\n * Represents an AES encryption key that can be used for encryption and decryption operations.\n * This class provides methods to generate, import, and export encryption keys.\n */\ndeclare class EncryptionKey {\n  /**\n   * Generates a new AES encryption key of the specified size.\n   * @param size The size of the key (128, 192, or 256). Defaults to 256.\n   * @returns A promise that resolves to an EncryptionKey instance.\n   */\n  static generate(size?: KeySize): Promise<EncryptionKey>;\n  /**\n   * Imports an encryption key from a byte array.\n   * Validates the size of the key.\n   * @param bytes The key as a byte array.\n   * @returns A promise that resolves to an EncryptionKey instance.\n   */\n  static import(bytes: Uint8Array): Promise<EncryptionKey>;\n  /**\n   * Imports an encryption key from a string representation (hex or base64).\n   * Validates the size of the key.\n   * @param hexString The key as a string.\n   * @param encoding The encoding used in the string ('hex' or 'base64').\n   * @returns A promise that resolves to an EncryptionKey instance.\n   */\n  static import(hexString: string, encoding: 'hex' | 'base64'): Promise<EncryptionKey>;\n\n  /**\n   * The size of the encryption key in bits (128, 192, or 256).\n   */\n  size: KeySize;\n\n  /**\n   * Retrieves the key as a byte array.\n   * Asynchronous due to the use of SubtleCrypto exportKey API.\n   * @returns A promise that resolves to the byte array representation of the key.\n   */\n  bytes(): Promise<Uint8Array>;\n\n  /**\n   * Retrieves the key encoded as a string in the specified format.\n   * Asynchronous due to the use of SubtleCrypto exportKey API.\n   * @param encoding The encoding format to use ('hex' or 'base64').\n   * @returns A promise that resolves to the string representation of the key.\n   */\n  encoded(encoding: 'hex' | 'base64'): Promise<string>;\n}\n\n/**\n * Represents encrypted data, including ciphertext, initialization vector, and authentication tag.\n */\ndeclare class SealedData {\n  /**\n   * Creates a SealedData instance from a combined byte array, including the IV, ciphertext, and tag.\n   * @param combined The combined data array. When providing a string, it must be base64-encoded.\n   * @param config Configuration specifying IV and tag lengths. Defaults to 12-byte IV and 16-byte tag.\n   * @returns A SealedData object.\n   */\n  static fromCombined(combined: BinaryInput, config?: SealedDataConfig): SealedData;\n\n  /**\n   * Creates a SealedData instance from separate nonce, ciphertext, and optionally a tag.\n   * @param iv The initialization vector. When providing a string, it must be base64-encoded.\n   * @param ciphertext The encrypted data. Should not include GCM tag. When providing a string, it must be base64-encoded.\n   * @param tag The authentication tag. When providing a string, it must be base64-encoded.\n   * @returns A SealedData object.\n   */\n  static fromParts(iv: BinaryInput, ciphertext: BinaryInput, tag: BinaryInput): SealedData;\n  /**\n   * Creates a SealedData instance from separate nonce, ciphertext, and optionally a tag.\n   * @param iv The initialization vector. When providing a string, it must be base64-encoded.\n   * @param ciphertextWithTag The encrypted data with GCM tag appended. When providing a string, it must be base64-encoded.\n   * @param tagLength Authentication tag length in bytes. Defaults to 16.\n   * @returns A SealedData object.\n   */\n  static fromParts(iv: BinaryInput, ciphertextWithTag: BinaryInput, tagLength?: number): SealedData;\n\n  /**\n   * Retrieves the ciphertext from the sealed data.\n   * @param options Options controlling whether to include the authentication tag and output encoding.\n   * @returns The ciphertext as a Uint8Array or base64 string depending on encoding option.\n   */\n  ciphertext(options: { withTag?: boolean; encoding: 'base64' }): Promise<string>;\n  ciphertext(options?: { withTag?: boolean; encoding?: 'bytes' }): Promise<Uint8Array>;\n\n  /**\n   * Retrieves the initialization vector (nonce) from the sealed data.\n   * @param encoding Output encoding format. Defaults to 'bytes'.\n   * @returns The initialization vector as a Uint8Array or base64 string depending on encoding.\n   */\n  iv(encoding?: 'bytes'): Promise<Uint8Array>;\n  iv(encoding: 'base64'): Promise<string>;\n\n  /**\n   * Retrieves the authentication tag from the sealed data.\n   * @param encoding Output encoding format. Defaults to 'bytes'.\n   * @returns The authentication tag as a Uint8Array or base64 string depending on encoding.\n   */\n  tag(encoding?: 'bytes'): Promise<Uint8Array>;\n  tag(encoding: 'base64'): Promise<string>;\n\n  /**\n   * Retrieves a combined representation of the IV, ciphertext, and tag.\n   * @param encoding Output encoding format. Defaults to 'bytes'.\n   * @returns The combined data as a Uint8Array or base64 string depending on encoding.\n   */\n  combined(encoding?: 'bytes'): Promise<Uint8Array>;\n  combined(encoding: 'base64'): Promise<string>;\n\n  /** Total size of the combined data (IV + ciphertext + tag) in bytes. */\n  readonly combinedSize: number;\n  /** Size of the initialization vector in bytes. */\n  readonly ivSize: number;\n  /** Size of the authentication tag in bytes. */\n  readonly tagSize: number;\n}\n\ntype NativeEncryptOptions = Omit<EncryptOptions, 'nonce'> & {\n  nonce?: number | BinaryInput | undefined;\n};\n\ndeclare class NativeAesCryptoModule extends NativeModule {\n  EncryptionKey: typeof EncryptionKey;\n  SealedData: typeof SealedData;\n\n  generateKey(size?: KeySize): Promise<EncryptionKey>;\n  importKey(keyInput: string | Uint8Array, encoding?: 'hex' | 'base64'): Promise<EncryptionKey>;\n\n  encryptAsync(\n    plaintext: BinaryInput,\n    key: EncryptionKey,\n    options?: NativeEncryptOptions\n  ): Promise<SealedData>;\n  decryptAsync(\n    sealedData: SealedData,\n    key: EncryptionKey,\n    options?: DecryptOptions\n  ): Promise<string | Uint8Array>;\n}\n\n// This call loads the native module object from the JSI.\nexport default requireNativeModule<NativeAesCryptoModule>('ExpoCryptoAES');\n"]}