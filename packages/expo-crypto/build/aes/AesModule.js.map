{"version":3,"file":"AesModule.js","sourceRoot":"","sources":["../../src/aes/AesModule.ts"],"names":[],"mappings":"AAAA,OAAO,EAAgB,mBAAmB,EAAE,MAAM,MAAM,CAAC;AAiJzD,yDAAyD;AACzD,eAAe,mBAAmB,CAAwB,eAAe,CAAC,CAAC","sourcesContent":["import { NativeModule, requireNativeModule } from 'expo';\n\nimport {\n  AESDecryptOptions,\n  AESEncryptOptions,\n  AESKeySize,\n  AESSealedDataConfig,\n  BinaryInput,\n  GCMTagByteLength,\n} from './aes.types';\n\n/**\n * Represents an AES encryption key that can be used for encryption and decryption operations.\n * This class provides methods to generate, import, and export encryption keys.\n */\ndeclare class EncryptionKey {\n  /**\n   * Generates a new AES encryption key of the specified size.\n   * @param size The size of the key (128, 192, or 256). Defaults to 256.\n   * @returns A promise that resolves to an EncryptionKey instance.\n   */\n  static generate(size?: AESKeySize): Promise<EncryptionKey>;\n  /**\n   * Imports an encryption key from a byte array.\n   * Validates the size of the key.\n   * @param bytes The key as a byte array.\n   * @returns A promise that resolves to an `EncryptionKey` instance.\n   */\n  static import(bytes: Uint8Array): Promise<EncryptionKey>;\n  /**\n   * Imports an encryption key from a string representation (hex or base64).\n   * Validates the size of the key.\n   * @param hexString The key as a string.\n   * @param encoding The encoding used in the string ('hex' or 'base64').\n   * @returns A promise that resolves to an `EncryptionKey` instance.\n   */\n  static import(hexString: string, encoding: 'hex' | 'base64'): Promise<EncryptionKey>;\n\n  /**\n   * The size of the encryption key in bits (128, 192, or 256).\n   */\n  size: AESKeySize;\n\n  /**\n   * Retrieves the key as a byte array.\n   * Asynchronous due to the use of [`SubtleCrypto` `exportKey`](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/exportKey) API.\n   * @returns A promise that resolves to the byte array representation of the key.\n   */\n  bytes(): Promise<Uint8Array>;\n\n  /**\n   * Retrieves the key encoded as a string in the specified format.\n   * Asynchronous due to the use of [`SubtleCrypto` `exportKey`](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/exportKey) API.\n   * @param encoding The encoding format to use ('hex' or 'base64').\n   * @returns A promise that resolves to the string representation of the key.\n   */\n  encoded(encoding: 'hex' | 'base64'): Promise<string>;\n}\n\n/**\n * Represents encrypted data, including ciphertext, initialization vector, and authentication tag.\n */\ndeclare class SealedData {\n  static fromCombined(combined: BinaryInput, config?: AESSealedDataConfig): SealedData;\n  static fromParts(iv: BinaryInput, ciphertext: BinaryInput, tag: BinaryInput): SealedData;\n  static fromParts(iv: BinaryInput, ciphertextWithTag: BinaryInput, tagLength?: number): SealedData;\n\n  /** @hidden */\n  ciphertext(options: { withTag?: boolean; encoding: 'base64' }): Promise<string>;\n  /** @hidden */\n  ciphertext(options?: { withTag?: boolean; encoding?: 'bytes' }): Promise<Uint8Array>;\n  /**\n   * Retrieves the ciphertext from the sealed data.\n   * @param options Options controlling whether to include the authentication tag and output encoding.\n   * @returns The ciphertext as a `Uint8Array` or `base64` string depending on encoding option.\n   */\n  ciphertext(options: {\n    withTag?: boolean;\n    encoding?: 'base64' | 'bytes';\n  }): Promise<string | Uint8Array>;\n\n  /** @hidden */\n  iv(encoding?: 'bytes'): Promise<Uint8Array>;\n  /** @hidden */\n  iv(encoding: 'base64'): Promise<string>;\n  /**\n   * Retrieves the initialization vector (nonce) from the sealed data.\n   * @param encoding Output encoding format. Defaults to `bytes`.\n   * @returns The initialization vector as a `Uint8Array` or `base64` string depending on encoding.\n   */\n  iv(encoding?: 'bytes' | 'base64'): Promise<string | Uint8Array>;\n\n  /** @hidden */\n  tag(encoding?: 'bytes'): Promise<Uint8Array>;\n  /** @hidden */\n  tag(encoding: 'base64'): Promise<string>;\n  /**\n   * Retrieves the authentication tag from the sealed data.\n   * @param encoding Output encoding format. Defaults to `bytes`.\n   * @returns The authentication tag as a `Uint8Array` or `base64` string depending on encoding.\n   */\n  tag(encoding?: 'bytes' | 'base64'): Promise<string | Uint8Array>;\n\n  /** @hidden */\n  combined(encoding?: 'bytes'): Promise<Uint8Array>;\n  /** @hidden */\n  combined(encoding: 'base64'): Promise<string>;\n  /**\n   * Retrieves a combined representation of the IV, ciphertext, and tag.\n   * @param encoding Output encoding format. Defaults to `bytes`.\n   * @returns The combined data as a `Uint8Array` or `base64` string depending on encoding.\n   */\n  combined(encoding?: 'bytes' | 'base64'): Promise<string | Uint8Array>;\n\n  /** Total size of the combined data (IV + ciphertext + tag) in bytes. */\n  readonly combinedSize: number;\n  /** Size of the initialization vector in bytes. */\n  readonly ivSize: number;\n  /** Size of the authentication tag in bytes. */\n  readonly tagSize: GCMTagByteLength;\n}\n\ntype NativeAESEncryptOptions = Omit<AESEncryptOptions, 'nonce'> & {\n  nonce?: number | BinaryInput | undefined;\n};\n\ndeclare class NativeAesCryptoModule extends NativeModule {\n  EncryptionKey: typeof EncryptionKey;\n  SealedData: typeof SealedData;\n\n  generateKey(size?: AESKeySize): Promise<EncryptionKey>;\n  importKey(keyInput: string | Uint8Array, encoding?: 'hex' | 'base64'): Promise<EncryptionKey>;\n\n  encryptAsync(\n    plaintext: BinaryInput,\n    key: EncryptionKey,\n    options?: NativeAESEncryptOptions\n  ): Promise<SealedData>;\n  decryptAsync(\n    sealedData: SealedData,\n    key: EncryptionKey,\n    options?: AESDecryptOptions\n  ): Promise<string | Uint8Array>;\n}\n\n// This call loads the native module object from the JSI.\nexport default requireNativeModule<NativeAesCryptoModule>('ExpoCryptoAES');\n"]}