{"version":3,"file":"Facebook.js","sourceRoot":"","sources":["../src/Facebook.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,mBAAmB,EAAc,MAAM,kBAAkB,CAAC;AAEnE,OAAO,gBAAgB,MAAM,oBAAoB,CAAC;AAKlD,MAAM,CAAC,KAAK,UAAU,6BAA6B,CACjD,OAAyB;IAEzB,IAAI,CAAC,gBAAgB,CAAC,6BAA6B,EAAE;QACnD,MAAM,IAAI,mBAAmB,CAAC,UAAU,EAAE,+BAA+B,CAAC,CAAC;KAC5E;IAED,IAAI,CAAC,OAAO,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;QAC3C,OAAO,GAAG,EAAE,CAAC;KACd;IAED,OAAO,gBAAgB,CAAC,6BAA6B,CAAC,OAAO,CAAC,CAAC;AACjE,CAAC;AAED;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,mBAAmB;IACvC,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,EAAE;QACzC,MAAM,IAAI,mBAAmB,CAAC,UAAU,EAAE,qBAAqB,CAAC,CAAC;KAClE;IAED,OAAO,MAAM,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;AACtD,CAAC;AAED;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,WAAW;IAC/B,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE;QACjC,MAAM,IAAI,mBAAmB,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;KAC1D;IAED,OAAO,MAAM,gBAAgB,CAAC,WAAW,EAAE,CAAC;AAC9C,CAAC;AAED;;;;;;;;;;;;GAYG;AACH,MAAM,CAAC,KAAK,UAAU,+BAA+B,CAAC,OAAgB;IACpE,IAAI,CAAC,gBAAgB,CAAC,+BAA+B,EAAE;QACrD,MAAM,IAAI,mBAAmB,CAAC,UAAU,EAAE,iCAAiC,CAAC,CAAC;KAC9E;IACD,OAAO,MAAM,gBAAgB,CAAC,+BAA+B,CAAC,OAAO,CAAC,CAAC;AACzE,CAAC;AAED;;;;;;;;;;;;;;GAcG;AACH,MAAM,CAAC,KAAK,UAAU,uBAAuB,CAAC,OAAgB;IAC5D,IAAI,CAAC,gBAAgB,CAAC,uBAAuB,EAAE;QAC7C,MAAM,IAAI,mBAAmB,CAAC,UAAU,EAAE,yBAAyB,CAAC,CAAC;KACtE;IACD,OAAO,MAAM,gBAAgB,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC;AACjE,CAAC;AAED;;;;;;;;;;;;;GAaG;AACH,MAAM,CAAC,KAAK,UAAU,eAAe,CAAC,cAAoC,EAAE,OAAgB;IAC1F,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE;QACrC,MAAM,IAAI,mBAAmB,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;KAC9D;IAED,IAAI,OAAO,GAAgB,EAAE,CAAC;IAE9B,IAAI,OAAO,cAAc,KAAK,QAAQ,EAAE;QACtC,OAAO,CAAC,KAAK,GAAG,cAAc,CAAC;QAC/B,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC;QAC1B,OAAO,CAAC,IAAI,CACV,+JAA+J,CAChK,CAAC;KACH;SAAM;QACL,OAAO,GAAG,cAAc,CAAC;KAC1B;IAED,OAAO,MAAM,gBAAgB,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;AACzD,CAAC;AAED;;;;;;;;;;;;GAYG;AACH,MAAM,CAAC,KAAK,UAAU,qCAAqC,CAAC,OAAgB;IAC1E,IAAI,CAAC,gBAAgB,CAAC,qCAAqC,EAAE;QAC3D,MAAM,IAAI,mBAAmB,CAAC,UAAU,EAAE,uCAAuC,CAAC,CAAC;KACpF;IACD,OAAO,MAAM,gBAAgB,CAAC,qCAAqC,CAAC,OAAO,CAAC,CAAC;AAC/E,CAAC","sourcesContent":["import { UnavailabilityError, CodedError } from '@unimodules/core';\n\nimport ExponentFacebook from './ExponentFacebook';\nimport { FacebookAuth, FacebookLoginResult, FacebookOptions, InitOptions } from './Facebook.types';\n\nexport { FacebookLoginResult, FacebookOptions, FacebookAuth };\n\nexport async function logInWithReadPermissionsAsync(\n  options?: FacebookOptions\n): Promise<FacebookLoginResult> {\n  if (!ExponentFacebook.logInWithReadPermissionsAsync) {\n    throw new UnavailabilityError('Facebook', 'logInWithReadPermissionsAsync');\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {};\n  }\n\n  return ExponentFacebook.logInWithReadPermissionsAsync(options);\n}\n\n/**\n * Returns the `FacebookAuth` object if a user is authenticated, and `null` if no valid authentication exists.\n *\n * You can use this method to check if the user should sign-in or not.\n */\nexport async function getAccessTokenAsync(): Promise<FacebookAuth | null> {\n  if (!ExponentFacebook.getAccessTokenAsync) {\n    throw new UnavailabilityError('Facebook', 'getAccessTokenAsync');\n  }\n\n  return await ExponentFacebook.getAccessTokenAsync();\n}\n\n/**\n * Logs out of the currently authenticated session.\n *\n * - [Web Functionality](https://developers.facebook.com/docs/reference/javascript/FB.logout) can be unstable and may require reloading the page before `Facebook.getAccessTokenAsync()` returns `null` again.\n */\nexport async function logOutAsync() {\n  if (!ExponentFacebook.logOutAsync) {\n    throw new UnavailabilityError('Facebook', 'logOutAsync');\n  }\n\n  return await ExponentFacebook.logOutAsync();\n}\n\n/**\n * Sets whether Facebook SDK should log app events. App events involve eg. app installs,\n * app launches (more info [here](https://developers.facebook.com/docs/app-events/getting-started-app-events-android/#auto-events)\n * and [here](https://developers.facebook.com/docs/app-events/getting-started-app-events-ios#auto-events)).\n *\n * In some cases, you may want to disable or delay the collection of automatically logged events,\n * such as to obtain user consent or fulfill legal obligations.\n *\n * This method corresponds to [this](https://developers.facebook.com/docs/app-events/getting-started-app-events-ios#disable-auto-events)\n * and [this](https://developers.facebook.com/docs/app-events/getting-started-app-events-android/#disable-auto-events) native SDK methods.\n *\n * @param enabled Whether automatic events logging of the Facebook SDK should be enabled\n */\nexport async function setAutoLogAppEventsEnabledAsync(enabled: boolean) {\n  if (!ExponentFacebook.setAutoLogAppEventsEnabledAsync) {\n    throw new UnavailabilityError('Facebook', 'setAutoLogAppEventsEnabledAsync');\n  }\n  return await ExponentFacebook.setAutoLogAppEventsEnabledAsync(enabled);\n}\n\n/**\n * Sets whether Facebook SDK should autoinitialize itself. SDK initialization involves eg.\n * fetching app settings from Facebook or a profile of the logged in user.\n * In some cases, you may want to disable or delay the SDK initialization,\n * such as to obtain user consent or fulfill legal obligations.\n *\n * This method corresponds to [this](https://developers.facebook.com/docs/app-events/getting-started-app-events-ios#disable-sdk-initialization)\n * and [this](https://developers.facebook.com/docs/app-events/getting-started-app-events-android/#disable-sdk-initialization) native SDK methods.\n *\n * Note: Even though calling this method with `enabled == true` initialized the Facebook SDK on iOS,\n * it does not on Android and we recommend always calling `initializeAsync` before performing\n * any actions with effects that should be visible to the user (like `loginWithPermissions`).\n *\n * @param enabled Whether autoinitialization of the Facebook SDK should be enabled\n */\nexport async function setAutoInitEnabledAsync(enabled: boolean) {\n  if (!ExponentFacebook.setAutoInitEnabledAsync) {\n    throw new UnavailabilityError('Facebook', 'setAutoInitEnabledAsync');\n  }\n  return await ExponentFacebook.setAutoInitEnabledAsync(enabled);\n}\n\n/**\n * Calling this method ensures that the SDK is initialized.\n * You have to call this method before calling any method that uses\n * the FBSDK (ex: `logInWithReadPermissionsAsync`, `logOutAsync`) to ensure that\n * Facebook support is initialized properly.\n *\n * - On native platforms you can optional provide an `appId` argument.\n *   - If you don't provide it, Facebook SDK will try to use `appId` from native app resources (which in standalone apps you would define in `app.json`, in Expo client are unavailable and in bare you configure yourself according to Facebook setup documentation for [iOS](https://developers.facebook.com/docs/facebook-login/ios#4--configure-your-project) and [Android](https://developers.facebook.com/docs/facebook-login/android#manifest)). If it fails to find one, the promise will be rejected.\n *   - The same resolution mechanism works for `appName`.\n *   - On web `appId` and `version` options must be included to start the app. This method downloads the JS FBSDK script, which will generate a side-effect of `window.FB` globally.\n * - If you provide an explicit `appId`, it will override any other source.\n *\n * @param options The options used to configure how Facebook is initialized\n */\nexport async function initializeAsync(optionsOrAppId: InitOptions | string, appName?: string) {\n  if (!ExponentFacebook.initializeAsync) {\n    throw new UnavailabilityError('Facebook', 'initializeAsync');\n  }\n\n  let options: InitOptions = {};\n\n  if (typeof optionsOrAppId === 'string') {\n    options.appId = optionsOrAppId;\n    options.appName = appName;\n    console.warn(\n      'The parameters of `initializeAsync(appId, appName)` have changed to support web, you must now provide an object instead: initializeAsync({ appId, appName }).'\n    );\n  } else {\n    options = optionsOrAppId;\n  }\n\n  return await ExponentFacebook.initializeAsync(options);\n}\n\n/**\n * Whether the Facebook SDK should collect advertiser ID properties, like the Apple IDFA\n * and Android Advertising ID, automatically. Advertiser IDs let you identify and target specific customers.\n * To learn more visit [Facebook documentation](https://developers.facebook.com/docs/app-ads/targeting/mobile-advertiser-ids)\n * describing that topic.\n *\n * In some cases, you may want to disable or delay the collection of `advertiser-id`,\n * such as to obtain user consent or fulfill legal obligations.\n *\n * This method corresponds to [this](https://developers.facebook.com/docs/app-events/getting-started-app-events-ios#disable-advertiser-id)\n * and [this](https://developers.facebook.com/docs/app-events/getting-started-app-events-android/#disable-advertiser-id) native SDK methods.\n * @param enabled Whether `advertiser-id` should be collected\n */\nexport async function setAdvertiserIDCollectionEnabledAsync(enabled: boolean) {\n  if (!ExponentFacebook.setAdvertiserIDCollectionEnabledAsync) {\n    throw new UnavailabilityError('Facebook', 'setAdvertiserIDCollectionEnabledAsync');\n  }\n  return await ExponentFacebook.setAdvertiserIDCollectionEnabledAsync(enabled);\n}\n"]}